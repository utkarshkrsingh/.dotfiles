"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[777],{8541:(e,t,s)=>{s.d(t,{w:()=>m});var a=s(30758),i=s(97500),n=s.n(i),r=s(23965),l=s(64721),o=s(53998),c=s(16992);const d="pvGZ831aNzHTQMZ8CA_u";var u=s(86070);const m=(0,a.memo)((function({onClick:e=(()=>{}),size:t,className:s,uri:i,sharingInfo:m,interactionData:h,ariaLabel:v=l.Ru.get("mwp.list.item.share"),condensedAll:f,placement:x,semanticColor:p,disableTooltip:j}){const{onCopyLink:y}=(0,c.L)({sharingInfo:m,uri:i,interactionData:h}),g=(0,a.useCallback)((()=>{y(),e()}),[e,y]);return(0,u.jsx)(o.a,{ariaLabel:v,size:t,onClick:g,className:n()(d,s),icon:r.C,condensedAll:f,placement:x,condensed:!0,semanticColor:p,disableTooltip:j})}))},92295:(e,t,s)=>{s.d(t,{W:()=>l});var a=s(30758),i=s(29004),n=s(64721),r=s(86070);const l=(0,a.memo)((function({isFollowing:e,onClick:t,disabled:s=!1,buttonText:a,size:l="small",className:o}){const c=e?n.Ru.get("following"):n.Ru.get("follow");return(0,r.jsx)(i.n,{onClick:t,disabled:s,size:l,className:o,children:a||c})}))},47641:(e,t,s)=>{s.d(t,{WatchFeedViewContainer:()=>Rs});var a=s(54628),i=s(64526),n=s(30758),r=s(87347),l=s(86070);const o=(0,n.createContext)(null);function c(){const e=(0,n.useContext)(o);if(null===e)throw new Error("Trying to use 'OverturePlaybackContext' without 'OverturePlaybackProvider'!");return e}const d=({children:e,overridePlatformId:t})=>{const s=(0,n.useMemo)((()=>({videoPlayerContainer:".playbackContainerWatchFeed",audioPlayerContainer:".playbackContainerWatchFeed"})),[]),a=(0,r.H)(s,t);return(0,l.jsx)(o.Provider,{value:a,children:e})};var u=s(97500),m=s.n(u),h=s(40638),v=s(97589),f=s(57615),x=s(6128),p=s(40748),j=s(41089),y=s(52450),g=s(64721),b=s(66810),N=s(12758),w=s(43494),E=s(89494),k=s(32751);const C=n.memo((function({uri:e,className:t,onClick:s=(()=>{}),size:a=b.t.xs,placement:i}){const r=(0,k.z)(),o=(0,E.W)(),c=(0,n.useCallback)((()=>{o({intent:"add-to-queue",type:"click"}),r.addToQueue([{uri:e,uid:null}]),s()}),[o,r,e,s]),d=g.Ru.get("contextmenu.add-to-queue");return(0,l.jsx)(w.Zp,{label:d,placement:i,children:(0,l.jsx)(p.H,{iconOnly:N.V,"aria-label":d,onClick:c,"data-testid":"add-button",size:a,className:t})})}));var I=s(38386),S=s(8541),L=s(44979),R=s(17221),P=s(84889),F=s(75990),M=s(72744),U=s(51064),T=s(28911),A=s(8097);const _="IQsUjbPtrVLyyA5iu3zQ",D=({iconSize:e="small",toggleMute:t,isMuted:s,className:a,labelPlacement:i})=>s?(0,l.jsx)(w.Zp,{label:g.Ru.get("playback-control.unmute"),placement:i,children:(0,l.jsx)(p.H,{condensedAll:!0,onClick:t,"aria-label":g.Ru.get("playback-control.unmute"),className:a,children:(0,l.jsx)(U.X,{size:e})})}):(0,l.jsx)(w.Zp,{label:g.Ru.get("playback-control.mute"),placement:i,children:(0,l.jsxs)(p.H,{condensedAll:!0,onClick:t,"aria-label":g.Ru.get("playback-control.mute"),className:a,children:[(0,l.jsx)(T.C,{size:e}),(0,l.jsx)(A.J,{animated:!0,white:!0,className:_})]})});var O=s(8143),W=s(21743),B=s(50780),z=s(13377),H=s(24648);const G="JXh51ebDftiwM49U49IA",Q="IId345zLSrSuzIWtN4Sd",Y="EMcF5GoJ2mLzcp0t365T",q="V795GKOEZNiChr8dJcD4",J="pGPb4TiSkhPdYEt8h2Av",V="FWBI05WNSb4HR8goMhai",K="BWyVJ8XXZ0jRGpFaA9iW",X="gWworaJ45IDWOdwjrZKh",Z=()=>{const[e,t]=(0,n.useState)(!1);return(0,n.useLayoutEffect)((()=>{setTimeout((()=>t(!0)),200)}),[]),(0,l.jsxs)("div",{className:m()(G,{[Q]:e}),children:[(0,l.jsx)("div",{className:m()(q,J)}),(0,l.jsx)("div",{className:m()(q,V)}),(0,l.jsx)("div",{className:m()(q,K)}),(0,l.jsx)("div",{className:m()(q,V)}),(0,l.jsx)("div",{className:Y}),(0,l.jsx)("div",{className:m()(q,X)}),(0,l.jsx)("div",{className:m()(q,K)}),(0,l.jsx)("div",{className:m()(q,J)}),(0,l.jsx)("div",{className:m()(q,V)})]})};var $=s(3924),ee=s(70490),te=s(18003),se=s(49543);const ae="YHeDUF3aquXRxYmKOs1A",ie="Ul_Er3t8veggCi1APkwp",ne="fhmiZPVDhaOYIlNd7Myq",re="sJnarE2UKqyhLo0LFNqy",le="bPMdcQr8gSb4AgWfkolx",oe="cjZ23zZucJkKFMIrGZa4",ce="qgczwXDFdF_gy4gRs3LN",de="rCxYvbE1hq2_VEMOM6M_",ue="iQnF1gu0Mg2rGsKVHIFn";const me=({parentEl:e,item:t})=>{const[s,a]=(0,n.useState)({shouldRender:!0,hasError:!1}),i=(0,H.Eg)(t?.canvas?.fileId,t?.canvas?.uri)&&!s.hasError;(0,n.useEffect)((()=>{a({shouldRender:!0,hasError:!1})}),[t?.uri]);const r=(0,n.useCallback)((e=>{e&&a({shouldRender:!1,hasError:!0})}),[]);return(0,O.createPortal)((0,l.jsx)(l.Fragment,{children:i&&(0,l.jsx)(z.h,{menu:(0,l.jsx)(R.P,{uri:t.uri}),children:(0,l.jsx)("div",{className:ie,children:(0,l.jsx)(H.Gg,{fileId:t.canvas?.fileId,canvasUrl:t.canvas?.url,canvasUri:t.canvas?.uri,className:ne,overridePlatformId:$.R,playerContainerClass:"canvasContainerWatchFeed",onError:r,playbackType:H.RT.Loop})})})}),e)},he=(0,n.memo)((function({item:e,itemPosition:t,isActive:s,onItemPositionInView:a,carouselEl:i,itemElByPositionRef:r}){const o=function(e){return e.canvas?.thumbnail?.sources?e.canvas.thumbnail.sources.sort(((e,t)=>(t.width??0)-(e.width??0)))[0]?.url:e.coverArt?.sources.sort(((e,t)=>(t.width??0)-(e.width??0)))[0]?.url}(e),c=null===e.canvas,[d,u]=(0,n.useState)(null),{ref:h,inView:v}=(0,W.Wx)({threshold:c?1:.6,root:i});(0,n.useEffect)((()=>{v&&a(t)}),[v,a,t]);const f=(0,n.useCallback)((e=>{r.current.set(t,e)}),[r,t]),x=(0,te.S)([h,u,f]);return o?(0,l.jsx)(z.h,{menu:(0,l.jsx)(R.P,{uri:e.uri}),children:(0,l.jsxs)("div",{ref:x,className:re,children:[c&&s&&(0,l.jsx)(Z,{}),(0,l.jsx)("div",{className:m()(ce,{[de]:s,[oe]:c}),style:{"--background-color":e.coverArt?.extractedColors?.colorDark.hex??B.l0o},children:(0,l.jsx)("div",{className:le,children:(0,l.jsx)(ee._,{className:ue,loading:"lazy",src:o,radius:12,width:"100%"})})}),s&&d&&(0,l.jsx)(me,{parentEl:d,item:e})]})}):null})),ve=({items:e,currentItemPosition:t,onItemPositionInView:s,itemElByPositionRef:a,onScroll:i,setScrollingState:r})=>{const[o,c]=(0,n.useState)(null);return(0,n.useEffect)((()=>{if((0,se.n)())return()=>{};const e=()=>r(!0),t=()=>r(!1);return o?.addEventListener("scroll",e,{once:!0}),o?.addEventListener("scrollend",t),()=>{o?.removeEventListener("scroll",e),o?.removeEventListener("scrollend",t)}}),[o,r,t]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:ae,tabIndex:-1,ref:c,onScroll:i,onKeyDown:e=>{e.preventDefault()},children:e.map(((e,i)=>(0,l.jsx)(he,{item:e,isActive:i===t,carouselEl:o,itemPosition:i,onItemPositionInView:s,itemElByPositionRef:a},e.uri)))})})};var fe=s(68832),xe=s(96613),pe=s(57682),je=s(13728),ye=s(55285),ge=s(92295),be=s(49066),Ne=s(11716);const we="g47sxYAVvWCq_6T4Ba5L",Ee=({artistUri:e,initialLibraryState:t,spec:s})=>{const[a,i]=(0,be.A)(e,t),r=(0,Ne.s)(),o=(0,n.useCallback)((async()=>{let t;t=a?s.followButtonFactory().hitUnfollow({itemToBeUnfollowed:e}):s.followButtonFactory().hitFollow({itemToBeFollowed:e}),r.logInteraction(t);try{await i(!a)}catch{}}),[a,i,e,s,r]),c=a?g.Ru.get("unfollow"):g.Ru.get("follow");return(0,l.jsx)(ge.W,{className:we,isFollowing:a,onClick:o,buttonText:c})};var ke=s(95082);const Ce=200,Ie="ease-in-out";var Se=function(e){return e[e.UP=-1]="UP",e[e.NONE=0]="NONE",e[e.DOWN=1]="DOWN",e}(Se||{});const Le=e=>{if(!e)return Se.NONE;const{previous:t,current:s}=e;return void 0===t||void 0===s?Se.NONE:Math.sign(s.position-t.position)},Re=(e,t,s)=>{if(!e.animate)return void(e.style.opacity="1");const a=Le(s);e.animate({opacity:[0,1],transform:[`translateY(${50*a}%)`,"translateY(0%)"]},{duration:Ce,easing:Ie,fill:"forwards",delay:100})},Pe=(e,t,s,a)=>{if(!e.animate)return void s();const i=Le(a);e.animate({opacity:[1,0],transform:["translateY(0%)",`translateY(${-1*i*50}%)`]},{duration:Ce,easing:Ie,delay:100}).addEventListener("finish",s,{once:!0})},Fe=e=>{e.animate?e.animate({opacity:[0,1]},{duration:Ce,easing:Ie,fill:"forwards"}):e.style.opacity="1"},Me=(e,t,s)=>{if(!e.animate)return void s();e.animate({opacity:[1,0]},{duration:Ce,easing:Ie}).addEventListener("finish",s,{once:!0})},Ue=({hideEnteringElements:e,animateEnteringElements:t,animateExitingElements:s,animateFlippedElements:a})=>{e(),s(),a(),t()},Te="dkbQiFBHMdijQeINl_ij",Ae="aiSwqZguOk1P52s9o9xP",_e="bl3iefJaRs18m1sL93Eh",De="zrFS4My93WidFfSAb0u6",Oe="mENWYVW_PAl8OWp2Ut6e",We="dErRUxXewpEkZd52uLTh",Be="q2y15bQqkJDcBixyP5oa",ze=({mainArtist:e,hashtags:t,sectionUri:s,spec:a,logger:i,position:r,itemUri:o})=>{const{open:c}=(0,ke.P)(),d=(0,n.useCallback)((e=>{const t=a.hashtagButtonFactory({uri:e}).hitUiNavigate({destination:e});i.logInteraction(t),c(s,e)}),[i,c,s,a]),u=(0,n.useCallback)((()=>{const t=a.artistNameFactory().hitUiNavigate({destination:e.uri});i.logInteraction(t)}),[i,e.uri,a]);return(0,l.jsx)(fe.ZI,{flipKey:`wf-${o}-footer`,handleEnterUpdateDelete:Ue,decisionData:{position:r},children:(0,l.jsxs)("div",{className:Te,children:[(0,l.jsx)(z.h,{renderInline:!0,menu:(0,l.jsx)(je.t,{uri:e.uri,isInLibrary:e.saved}),children:(0,l.jsxs)("div",{className:Ae,children:[(0,l.jsx)("div",{className:We,children:(0,l.jsx)(fe.lf,{flipId:`wf-artist-avatar-${o}`,translate:!1,opacity:!1,scale:!1,onAppear:Fe,onExit:Me,children:(0,l.jsxs)("div",{className:We,children:[(0,l.jsx)(pe.e,{label:e.name,images:e.avatar?.sources||[],width:32,userIconSize:"small"})," "]})},`wf-artist-avatar-${o}`)}),(0,l.jsxs)("div",{className:_e,children:[(0,l.jsx)(fe.lf,{flipId:"wf-artist-name",translate:!0,children:(0,l.jsx)("div",{className:We,children:(0,l.jsx)(fe.lf,{flipId:e.name,translate:!1,opacity:!1,scale:!1,onAppear:Fe,onExit:Me,children:(0,l.jsx)("div",{className:We,children:(0,l.jsx)(x.E,{variant:"bodySmall",semanticColor:"textSubdued",children:(0,l.jsx)(ye.N,{to:e.uri,onClick:u,children:e.name})})})},e.name)})}),e.listeners&&(0,l.jsx)(fe.lf,{flipId:"wf-listeners",translate:!0,children:(0,l.jsx)("div",{className:We,children:(0,l.jsx)(x.E,{variant:"bodySmall",semanticColor:"textSubdued",className:Be,children:g.Ru.formatNumber(e.listeners,{notation:"compact",maximumFractionDigits:0})})})})]}),(0,l.jsx)(fe.lf,{flipId:"wf-follow-button",translate:!0,children:(0,l.jsx)("div",{className:We,children:(0,l.jsx)(Ee,{artistUri:e.uri,initialLibraryState:e.saved,spec:a})})})]})}),t.length>0&&(0,l.jsx)("div",{className:De,children:t.map(((e,t)=>(0,l.jsx)(fe.lf,{flipId:t,translate:!0,children:(0,l.jsx)("div",{className:We,children:(0,l.jsx)(xe.v,{onClick:()=>d(e.uri),children:(0,l.jsx)("span",{className:Oe,children:e.title})},t)})},t)))})]})})};var He=s(99842),Ge=s(58681),Qe=s(49382),Ye=s(43898),qe=s(68437);const Je="edeYmiJw2Fd9EFB2SQZo",Ve="cpE_cN95GCusnLJ3Mssy",Ke=()=>{const{progressMs:e,durationMs:t,animate:s}=function(){const e=c(),t=(0,n.useRef)(Date.now()),s=(0,n.useRef)(0),[a,i]=(0,n.useState)(0),[r,l]=(0,n.useState)(3e4),[o,d]=(0,n.useState)(!1),u=(0,qe.g)();return e.on(Ye.LW.PROGRESS,(e=>{const a=Date.now();a-t.current>=500&&(i(e.data.position),t.current=a,e.data.position>s.current?d(!0):d(!1),s.current=e.data.position)})),e.on(Ye.LW.BEFORE_TRACK_LOAD,(()=>{i(0),d(!1)})),e.on(Ye.LW.DURATION_CHANGED,(e=>{l(e.data.duration)})),e.on(Ye.LW.TRACK_ENDED,(()=>{i(r)})),{progressMs:a,durationMs:r,animate:o&&"visible"===u}}();return(0,l.jsx)(Qe.z,{className:m()(Je,{[Ve]:s}),semanticColor:"essentialBase",value:100*e/t,dir:"ltr"})};var Xe=s(90861);const Ze="BKbRtjcDGVGtwX86D6Q4",$e="Cypiobiw1yGi5E9N48gJ",et="E0LdRRiYvrkUdZCmAXqQ",tt="yJJKqce9DPVQnrFseKKU",st="_bMlIQGXEMMBRZOVM71Z",at="omghgDzOcUFl6oOXYNHX",it="TaaunKIj990MWZKrBWHW",nt=({item:e,handleTitleClick:t,widthBreakpoint:s,position:a})=>{const i=function(e){return e?.coverArt?.sources.sort(((e,t)=>(e.width??0)-(t.width??0)))[0]?.url}(e),n=e.canvas&&i;return(0,l.jsx)(fe.ZI,{flipKey:`wf-${e.uri}-itemInfo`,handleEnterUpdateDelete:Ue,decisionData:{position:a},children:(0,l.jsxs)("div",{className:et,children:[(0,l.jsx)(z.h,{renderInline:!0,menu:(0,l.jsx)(R.P,{uri:e.uri,albumUri:e.album?.uri,artists:e.artists}),children:(0,l.jsx)(fe.lf,{flipId:`wf-title-${e.uri}`,translate:!0,onAppear:Re,onExit:Pe,children:(0,l.jsx)("div",{className:it,children:(0,l.jsx)(x.E,{variant:s===Xe.E.LARGE?"titleSmall":"titleMedium",className:tt,semanticColor:"textBase",children:(0,l.jsx)(ye.N,{to:e.uri,onClick:t,children:e.title})})})},`wf-title-${e.uri}`)}),(0,l.jsx)("div",{children:e.artists.map(((e,t)=>(0,l.jsx)(z.h,{renderInline:!0,menu:e?.uri?(0,l.jsx)(je.t,{uri:e?.uri}):null,children:(0,l.jsx)(fe.lf,{flipId:`wf-artist-${e.uri}`,translate:!0,children:(0,l.jsxs)("div",{className:m()(it,Ze),children:[t>0?g.Ru.getSeparator():null,(0,l.jsx)(ye.N,{to:e.uri,children:(0,l.jsx)(x.E,{variant:"bodyMedium",className:$e,children:e.name})})]})},`wf-artist-${e.uri}`)},t)))}),(0,l.jsxs)("div",{className:at,children:[n&&(0,l.jsx)(z.h,{renderInline:!0,menu:e.album?.uri?(0,l.jsx)(Ge.h,{uri:e.album?.uri}):null,children:(0,l.jsx)(fe.lf,{flipId:`wf-coverart-${e.uri}`,translate:!1,opacity:!1,scale:!1,onAppear:Fe,onExit:Me,children:(0,l.jsx)("div",{className:it,children:(0,l.jsx)(He._,{src:i,className:st})})},`wf-coverart-${e.uri}`)}),(0,l.jsx)(Ke,{})]})]})})};var rt=s(48472);const lt="YKRW27BSGgfw1jw43dpT",ot="FlQup9bGmLLKYjTrsGQ0",ct=()=>(0,l.jsxs)("div",{className:ae,tabIndex:0,children:[(0,l.jsx)("div",{className:re,children:(0,l.jsx)("div",{className:ot})}),(0,l.jsx)("div",{className:re,children:(0,l.jsx)("div",{className:ce,children:(0,l.jsx)("div",{className:lt,ref:e=>{e?.scrollIntoView({block:"center",inline:"nearest"})}})})}),(0,l.jsx)("div",{className:re,children:(0,l.jsx)("div",{className:ce,children:(0,l.jsx)("div",{className:lt})})})]}),dt="DJxOEatMU2PHk0cCYWoX",ut="FP_XXx0FMQPJEu3WzfpM",mt="JYvxp3Y58xF59FA7Mnaf",ht="WLr9Q6nJ_Hv35r7pNEa3",vt="uwkK6FkoyBrxvGSYBbhw",ft="AkStH5UDLsXzudcPz_J_",xt="YmJS4xMTXdNQLvbP2VAt",pt="Qtx4b7Wc1c7NEX49CMeH",jt="SliTY9e8oKOiypDQdhlw",yt="OGPXh73aLJDzhfFAdPvM",gt="d9bbNw4YiAXpQpjrSgBJ",bt="ji0qx5PBc5_4aMgNLGrp",Nt="BLIxyum1wPNrFibaQ9wr",wt="NazSI1w8xaruwFqTP3sS",Et="ZRarvpz5og3ifOVHzGOv",kt="RQaEu8T4LvqfvRmirqJy",Ct="jskTw7aMQHNyh13AZI6R",It="hK5DaTfJaFpo2BJuoy5k",St=({hide:e})=>(0,l.jsxs)("div",{className:m()(ht,mt,{[vt]:e}),children:[(0,l.jsxs)("div",{className:It,children:[(0,l.jsx)("div",{className:ft,children:(0,l.jsx)(rt.Y,{as:"div",variant:"bodySmall",charCount:8,isLoading:!0})}),(0,l.jsxs)("div",{className:et,children:[(0,l.jsx)(rt.Y,{as:"div",variant:"titleMedium",charCount:10,isLoading:!0}),(0,l.jsx)(rt.Y,{as:"div",variant:"bodyMedium",charCount:15,isLoading:!0}),(0,l.jsx)(rt.Y,{as:"div",variant:"bodySmall",charCount:20,isLoading:!0})]}),(0,l.jsxs)("div",{className:Te,children:[(0,l.jsx)(rt.Y,{as:"div",variant:"titleSmall",charCount:10}),(0,l.jsx)(rt.Y,{as:"div",variant:"bodySmall",charCount:15})]})]}),(0,l.jsx)("div",{className:Et,children:(0,l.jsx)(ct,{})}),(0,l.jsx)("div",{className:bt})]});var Lt=s(37948),Rt=s(61214),Pt=s(85834),Ft=s(20729),Mt=s(56570),Ut=s(92441),Tt=s(15437),At=s(28833),_t=s(76698);const Dt="dcZW_YRCwhi9TTJMPxzX",Ot="JSNVglrzXyqMjvBqTdjS",Wt="HfPg2vA6Xn7iwiUnz1e9",Bt="f7MX2BXkHu1edOXcPYc6",zt="GMCJTC2SwK0uAZrugIfm",Ht=({children:e})=>(0,l.jsx)("div",{className:Dt,children:e}),Gt=({children:e})=>{const[t,s]=(0,_t.x)("watch-feed.dismissed-shortcut-onboarding",!1),a=(0,At.W)();if((0,n.useEffect)((()=>{const e=e=>{"?"===e.key&&s(!t)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[t,s]),t)return(0,l.jsx)(l.Fragment,{children:e});const i=(0,l.jsxs)(Ft.A,{colorSet:"announcement",popoverTitle:g.Ru.get("web-player.watch-feed.view.shortcuts.title"),children:[(0,l.jsx)(x.E,{as:"p",variant:"bodyMedium",paddingBottom:"tighter-2",children:g.Ru.get("web-player.watch-feed.view.shortcuts.description")}),(0,l.jsxs)("div",{className:Bt,children:[(0,l.jsxs)("div",{className:zt,children:[(0,l.jsx)(x.E,{variant:"bodySmall",children:g.Ru.get("web-player.watch-feed.view.shortcuts.previous")}),(0,l.jsx)(Ht,{children:(0,l.jsx)(Mt.J,{size:"small"})})]}),(0,l.jsxs)("div",{className:zt,children:[(0,l.jsx)(x.E,{variant:"bodySmall",children:g.Ru.get("web-player.watch-feed.view.shortcuts.next")}),(0,l.jsx)(Ht,{children:(0,l.jsx)(Ut.y,{size:"small"})})]}),(0,l.jsxs)("div",{className:zt,children:[(0,l.jsx)(x.E,{variant:"bodySmall",children:g.Ru.get("web-player.watch-feed.view.shortcuts.add-to-library")}),(0,l.jsx)(Ht,{children:(0,l.jsx)(Ut.y,{size:"small",className:Ot})})]}),(0,l.jsxs)("div",{className:zt,children:[(0,l.jsx)(x.E,{variant:"bodySmall",children:g.Ru.get("web-player.watch-feed.view.shortcuts.add-to-queue")}),(0,l.jsx)(Ht,{children:(0,l.jsx)(Ut.y,{size:"small",className:Wt})})]}),(0,l.jsxs)("div",{className:zt,children:[(0,l.jsx)(x.E,{variant:"bodySmall",children:g.Ru.get("web-player.watch-feed.view.shortcuts.mute-unmute")}),(0,l.jsx)(Ht,{children:(0,l.jsx)(x.E,{variant:"marginal",children:(0,l.jsx)("kbd",{children:"M"})})})]})]})]});return(0,l.jsx)(Tt.W,{overlay:i,onHide:()=>{s(!0)},placement:a?Tt.W.topLeft:Tt.W.leftTop,children:e})},Qt="bsYqS4l_sJOvBGGeudDj",Yt="XIKBfnA7TQOV1T8LLiAS",qt="kT3dFHdVmU0vyeE71IDE",Jt=({hasNext:e,hasInteracted:t,moveDown:s,isRTL:a,widthBreakpoint:i})=>{const r=g.Ru.get("web-player.watch-feed.view.next-button"),o=a?"right":"left",c=(0,n.useRef)(null);return(0,n.useLayoutEffect)((()=>{t&&c.current?.focus({preventScroll:!0})}),[t]),t?(0,l.jsx)(w.Zp,{label:r,placement:o,children:(0,l.jsx)(p.H,{className:Qt,"aria-label":r,label:r,disabled:!e,iconOnly:Lt.r,onClick:()=>s(),ref:c,size:i===Xe.E.SMALL?"small":"medium"})}):(0,l.jsx)("div",{className:Yt,children:(0,l.jsx)(Gt,{children:(0,l.jsx)(Rt.$,{className:qt,disabled:!e,colorSet:"invertedLight",iconTrailing:Pt.R,onClick:()=>s(),size:i===Xe.E.SMALL?"small":"medium",children:g.Ru.get("web-player.watch-feed.view.next-button")})})})};var Vt=s(42683);const Kt="fCykqEza3WtgKmxjL0C1",Xt=({hasPrevious:e,moveUp:t,isRTL:s,widthBreakpoint:a})=>{const i=g.Ru.get("web-player.watch-feed.view.previous-button"),n=s?"right":"left";return e?(0,l.jsx)(w.Zp,{label:i,placement:n,children:(0,l.jsx)(p.H,{className:Kt,"aria-label":i,label:i,iconOnly:Vt.o,onClick:()=>t(),size:a===Xe.E.SMALL?"small":"medium"})}):null};var Zt=s(95440),$t=s(1978),es=s(33565),ts=s(76822),ss=s(22290);const as=({uri:e,moveUp:t,moveDown:s,toggleMute:a})=>{const i=(0,ss.i)(e),r=(0,k.z)(),l=(0,$t.Zp)(),o=(0,Zt.d4)((e=>e.platform.isDesktop)),[c,d]=(0,be.A)(i),u=(0,E.W)(),m=(0,n.useCallback)((()=>{u({targetUri:i,intent:c?"remove-from-library":"add-to-library",type:"key-press"}),d(!c)}),[c,u,i,d]),h=(0,n.useCallback)((()=>{u({intent:"add-to-queue",type:"key-press"}),r.addToQueue([{uri:e,uid:null}])}),[u,r,e]),v=(0,n.useCallback)((()=>{l(-1)}),[l]),f=(0,n.useCallback)((()=>{l(1)}),[l]);return(0,es.Nx)(ts.g.GO_BACKWARDS,v,o),(0,es.Nx)(ts.g.GO_FORWARDS,f,o),(0,es.Nx)(ts.g.WF_ADD_TO_LIBRRY,m),(0,es.Nx)(ts.g.WF_ADD_TO_QUEUE,h),(0,es.Nx)(ts.g.WF_MUTE_UNMUTE,a),(0,es.Nx)(ts.g.WF_GO_TO_PREVIOUS,t),(0,es.Nx)(ts.g.WF_GO_TO_NEXT,s),null};var is=s(26524);function ns({playbackContainerClass:e,onError:t=(()=>{})}){const s=c(),[a,i]=(0,n.useState)(!1),r=(0,qe.g)();(0,n.useEffect)((()=>(s.on(Ye.LW.TRACK_LOADED,(()=>{const t=document.getElementsByClassName(e),s=t[0]?.querySelector("video");s&&(s.loop=!0,s.muted=!1,s.autoplay=!0)})),s.on(Ye.LW.ERROR,(e=>{e.data.error&&t(e.data.error),t(new Error("PreviewPlayback error"))})),s.on(Ye.LW.VOLUME_CHANGED,(({data:e})=>{i(0===e.volume)})),()=>{s.removeListener(Ye.LW.TRACK_LOADED),s.removeListener(Ye.LW.ERROR),s.removeListener(Ye.LW.VOLUME_CHANGED)})),[t,s,e]);const l=(0,n.useCallback)((async()=>{const e=(await s.getCurrentState()).playbackState.playing;"hidden"===r&&e?s.pause():"visible"!==r||e||s.resume()}),[r,s]);(0,n.useEffect)((()=>{l()}),[l]);const o=(0,n.useCallback)((e=>{const t=function(e){const t=e?.preview;return e?.uri&&t?.url?(0,Ye.a2)({uri:e.uri,format:"MP3",url:t.url,logData:{playbackId:(0,is.E)()}}):null}(e);t&&s.playTracks([t],{paused:!1})}),[s]),d=(0,n.useCallback)((async()=>{s.setMuted(!a)}),[a,s]),u=(0,n.useCallback)((()=>s.getCurrentState()),[s]);return{playPreview:o,toggleMute:d,isMuted:a,getCurrentState:u}}var rs=s(86502);var ls=s(48603);var os=s(49097),cs=s(86565);s(50684);const ds=new cs.l("watchFeedView","query","4eb0691296f18d98a553ed288853f579f8c7c4fca66b80c0e223e47dd30e935b",null);var us=s(49058),ms=s(71906),hs=s(48125),vs=s(4490);function fs(e){if("TrackResponseWrapper"===e.content.__typename&&"Track"===e.content.data.__typename){const s=e.content.data,a=function(e=[]){return e.find((e=>!!e.fileId))||null}(s.previews?.audioPreviews?.items);return{uri:s.uri,preview:a,title:s.name,album:s.albumOfTrack,artists:(t=s.artists.items,t.map((e=>({uri:e.uri,verified:e.profile.verified||!1,name:e.profile.name,avatar:e.visuals.avatarImage,saved:e.saved,listeners:e.stats.monthlyListeners})))),canvas:s.canvas,coverArt:s.albumOfTrack?.coverArt||null,sharingInfo:s.sharingInfo,hashtags:s.discoveryFeedHashtags}}var t;return null}const xs={offset:0,previousItems:[]};function ps(e){const t=e?.extractedColors?.colorDark;if(t&&!t.isFallback)return t.hex}var js=s(49872),ys=s(20520),gs=s(91470),bs=s(83926),Ns=s(18426),ws=s(84014),Es=s(33058),ks=s(1620);const Cs={intent:"share",type:"click",itemIdSuffix:"watchfeed/share"},Is="playbackContainerWatchFeed";const Ss=({sectionUri:e,discoveryFeedUri:t,firstItemUri:s,resumeOnClose:a})=>{const{close:i}=(0,ke.P)(),r=(0,At.W)(),[o,c]=(0,n.useState)(!1),d=(0,F.B)(),u=(0,n.useRef)(!1),N=(0,n.useRef)(new Map),[E,k]=(0,n.useState)(a),[U,T]=(0,n.useState)(!1),{closeSnackbar:A}=(0,M.d)(),{spec:_,logger:O}=(0,ks.r)(y.r,{data:{uri:t}}),W=(0,n.useCallback)((e=>{e&&A(),T(e)}),[A]),{content:{title:B,items:z},error:H,fetchNextPage:G,isFetching:Q}=function(e){const{sectionUri:t,discoveryFeedUri:s,firstItemUri:a}=e,i=(0,Zt.d4)(us.JJ),{request:r}=(0,n.useContext)(hs.j),{data:l,error:o,isFetching:c,fetchNextPage:d}=(0,os.q)({queryKey:["watch-feed","view",t,s,a],queryFn:({pageParam:e})=>(0,vs.c)(r,ds,{sp_t:(0,ms.v8)("sp_t")??"",country:i,discoveryFeedUri:s,uri:t,firstItemUri:e.offset?"":a??"",offset:e.offset,limit:40,previousItems:e.previousItems}),gcTime:18e5,staleTime:3e5,initialPageParam:xs,getNextPageParam:(e,t)=>{const s=t.reduce(((e,t)=>("HomeSectionCollection"===t?.data?.homeSections.__typename&&t.data.homeSections.sections.forEach((t=>{"HomeSection"===t.__typename&&"HomeWatchFeedSectionData"===t.data?.__typename&&(e.offset=t.sectionItems.pagingInfo.nextOffset??0,e.previousItems=e.previousItems.concat(t.sectionItems.items.map((e=>fs(e)?.uri??null)).filter((e=>null!==e))))})),e)),{...xs});if(0!==s.offset)return s}});return{content:(0,n.useMemo)((()=>l?.pages?l.pages.reduce(((e,t)=>{const s=t?.data?.homeSections;if("HomeSectionCollection"===s?.__typename){let t=e.title;return s.sections.forEach((s=>{"HomeSection"===s.__typename&&"HomeWatchFeedSectionData"===s.data?.__typename&&(t=s.data.title?.transformedLabel||null,s.sectionItems.items.forEach((t=>{const s=fs(t);s&&e.items.push(s)})))})),{items:e.items,title:t}}return e}),{items:[],title:null}):{items:[],title:null}),[l]),error:o,isFetching:c,fetchNextPage:d}}({sectionUri:e,discoveryFeedUri:t,firstItemUri:s}),[Y,q]=(0,n.useState)(0),J=z[Y]||null,[V,K]=(0,n.useState)(!J),[X,Z]=(0,n.useState)(!1);(0,n.useEffect)((()=>{J?(Z(!0),setTimeout((()=>{K(!1)}),400)):(Z(!1),K(!0))}),[J]);const $=(0,n.useMemo)((()=>_.trackTitleFactory({uri:J?.uri})),[_,J]),ee=(0,Es.t)($);!function({sectionUri:e,discoveryFeedUri:t,firstItemUri:s,currentItemUri:a,resumeOnClose:i}){const{close:r,updateLocationState:l}=(0,ke.P)(),o=(0,$t.zy)(),c=(0,n.useRef)();(0,n.useEffect)((()=>{c.current?o.pathname!==c.current?r({resumePlayback:i,forceClose:!0}):a&&a!==o.state?.watchFeed?.lastSeenItemUri&&l({isOpen:!0,resumeOnClose:i,firstItemUri:s||"",lastSeenItemUri:a,sectionUri:e,discoveryFeedUri:t}):c.current=o.pathname}),[r,o,i,a,s,l,e,t])}({sectionUri:e,discoveryFeedUri:t,firstItemUri:s,currentItemUri:J?.uri,resumeOnClose:E}),function(e){const t=(0,rs.XB)(),{close:s}=(0,ke.P)(),a=(0,n.useRef)();(0,n.useEffect)((()=>{a.current?t!==a.current&&s({resumePlayback:e}):a.current=t}),[s,e,t])}(E),function(e){const{close:t}=(0,ke.P)();(0,n.useEffect)((()=>{const s=s=>{"Escape"===s.key&&(s.target instanceof HTMLElement&&s.target.closest(`#${ls.v}`)||t({resumePlayback:e}))};return document.addEventListener("keyup",s),()=>{document.removeEventListener("keyup",s)}}),[e,t])}(a);const te=e=>{const t=_.closeButtonFactory().hitUiHide();O.logInteraction(t),i({resumePlayback:e})},se=(0,n.useCallback)((e=>{c(!0),u.current=!0,q((t=>{const s=t+e;return s in z?(setTimeout((()=>{N.current.get(s)?.scrollIntoView({block:"center",inline:"nearest",behavior:"smooth"})})),s):t}))}),[z]),{playPreview:ae,toggleMute:ie,isMuted:ne,getCurrentState:re}=ns({playbackContainerClass:Is}),le=(0,n.useCallback)((async()=>{const{playbackState:e}=await re(),t=_.previousButtonFactory().hitSkipToPrevious({itemToBeSkipped:z[Y].uri,positionMs:e.position??-1,totalContentMs:e.duration??-1});O.logInteraction(t),se(-1)}),[se,z,O,Y,_,re]);(0,n.useLayoutEffect)((()=>{q(0),N.current.get(0)?.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})}),[t]),(0,n.useLayoutEffect)((()=>{0!==Y&&c(!0)}),[Y]);const oe=(0,n.useCallback)((async()=>{const{playbackState:e}=await re(),t=_.nextButtonFactory().hitSkipToNext({itemToBeSkipped:z[Y].uri,positionMs:e.position??-1,totalContentMs:e.duration??-1});O.logInteraction(t),se(1)}),[se,z,O,Y,_,re]),ce=(0,h.YQ)((0,n.useCallback)((()=>{u.current=!1}),[]),100,{leading:!1,trailing:!0}),de=(0,n.useCallback)((e=>{u.current||q(e)}),[]),ue=(0,n.useCallback)((()=>{if(ne){const e=_.muteButtonFactory().hitUnmutePlayback();O.logInteraction(e)}else{const e=_.muteButtonFactory().hitMutePlayback();O.logInteraction(e)}ie()}),[ne,O,_,ie]),me=(0,n.useCallback)((()=>{const e=_.shareButtonFactory().hitShare({entityToBeShared:J?.uri,shareId:J?.sharingInfo?.shareId||""});O.logInteraction(e)}),[J,O,_]),he=(0,n.useCallback)((()=>{if(!J)return;const e=_.addToQueueFactory().hitAddItemToQueue({itemToAddToQueue:J?.uri});O.logInteraction(e)}),[J,O,_]),fe=(0,n.useCallback)((()=>{const e=_.trackTitleFactory({uri:J.uri}).hitUiNavigate({destination:J.uri});O.logInteraction(e),k(!1)}),[J,_,O]);(0,n.useEffect)((()=>{!H&&J&&function(e,t,s){return e>=t-5&&!(t>50)&&!s}(Y,z.length,Q)&&G()}),[H,J,Y,Q,z,G]),(0,n.useEffect)((()=>{ae(J)}),[J,ae]),(0,n.useEffect)((()=>{q(0)}),[t]);const xe=Boolean(z[Y-1]),pe=Boolean(z[Y+1]),je=(0,n.useRef)(null),ye=(0,Ns.H)();let ge=null;if(ye){const e=(0,v.r6)((0,bs.c)(ye,"higherContrast"));ge=(0,bs.I)(e)}const{breakpoint:be}=(0,ys.x)({[Xe.E.SMALL]:0,[Xe.E.MEDIUM]:778,[Xe.E.LARGE]:1102},je),Ne=(0,ws.o)((e=>(e?.restrictions?.disallowAddToQueueReasons||[]).length>0));if(H)return null;const we=J?.artists[0],Ee={backgroundColor:ye?.higherContrast.backgroundBase.toCSS(gs.a.RGBA)??(ps(J?.coverArt)||f.PQ2)},Ce=r?"right":"left";return(0,l.jsx)(js.s,{focusTrapOptions:{allowOutsideClick:!0},children:(0,l.jsx)("div",{className:dt,onClick:()=>te(a),role:"presentation",children:(0,l.jsxs)("div",{style:Ee,className:ut,onClick:e=>{e.stopPropagation()},role:"presentation",tabIndex:-1,children:[J&&(0,l.jsxs)("div",{className:mt,ref:je,children:[(0,l.jsxs)("div",{className:It,ref:ee,children:[(0,l.jsx)("div",{children:(0,l.jsx)(x.E,{className:ft,semanticColor:"textBase",children:B})}),(0,l.jsx)(nt,{item:J,handleTitleClick:fe,widthBreakpoint:be,position:Y}),(0,l.jsx)(ze,{mainArtist:we,hashtags:J.hashtags,sectionUri:e,spec:_,logger:O,position:Y,itemUri:J.uri})]}),(0,l.jsxs)("div",{className:Et,children:[(0,l.jsx)(ve,{items:z,currentItemPosition:Y,onItemPositionInView:de,itemElByPositionRef:N,onScroll:ce,setScrollingState:W}),(0,l.jsx)("div",{className:m()(kt,{[Ct]:U}),ref:d})]}),(0,l.jsxs)("div",{className:bt,children:[(0,l.jsxs)("div",{className:xt,children:[(0,l.jsx)("div",{className:pt,children:(0,l.jsx)(D,{toggleMute:ue,isMuted:ne,labelPlacement:Ce,iconSize:be===Xe.E.SMALL?"small":"medium"})}),(0,l.jsx)(w.Zp,{label:g.Ru.get("close"),placement:"bottom",children:(0,l.jsx)(p.H,{onClick:()=>te(a),"aria-label":g.Ru.get("close"),condensedAll:!0,children:(0,l.jsx)(j.M,{size:be===Xe.E.SMALL?"small":"medium"})})})]}),(0,l.jsxs)("div",{className:jt,style:{...ge},children:[(0,l.jsx)(L.b,{renderInline:!0,placement:Ce,menu:(0,l.jsx)(R.P,{uri:J.uri,albumUri:J.album?.uri,artists:J.artists,sharingInfo:J.sharingInfo,menuBoundary:je?.current||void 0}),children:(0,l.jsx)(I.e,{size:be===Xe.E.SMALL?I.M.sm:I.M.md,label:g.Ru.get("more.label.context",J.title),placement:Ce,className:yt})}),(0,l.jsx)(S.w,{ariaLabel:g.Ru.get("context-menu.copy-track-link"),uri:J.uri,placement:Ce,interactionData:Cs,sharingInfo:null,size:be===Xe.E.SMALL?"small":"medium",onClick:me}),!Ne&&(0,l.jsx)(C,{uri:J.uri,size:be===Xe.E.SMALL?"small":"medium",placement:Ce,onClick:he,className:gt}),(0,l.jsx)(P.g,{uri:J.uri,size:be===Xe.E.SMALL?b.t.sm:b.t.md,labelPlacement:Ce,menuPlacement:Ce,className:Nt})]}),(0,l.jsxs)("div",{className:wt,children:[(0,l.jsx)(Xt,{hasPrevious:xe,moveUp:le,isRTL:r,widthBreakpoint:be}),(0,l.jsx)(Jt,{hasNext:pe,hasInteracted:o,moveDown:oe,isRTL:r,widthBreakpoint:be}),(0,l.jsx)("div",{className:Is}),(0,l.jsx)(as,{moveUp:le,moveDown:oe,toggleMute:ie,uri:J.uri})]})]})]}),V&&(0,l.jsx)(St,{hide:X})]})})})};var Ls=s(86864);const Rs=()=>{const{isOpen:e,sectionUri:t,discoveryFeedUri:s,firstItemUri:n,resumeOnClose:r}=(0,Ls.S)();return e?(0,l.jsx)(i.u,{pageId:a.$h.WATCHFEED,uri:s,children:(0,l.jsx)(d,{overridePlatformId:$.R,children:(0,l.jsx)(Ss,{sectionUri:t,discoveryFeedUri:s,firstItemUri:n,resumeOnClose:r})})}):null}},64526:(e,t,s)=>{s.d(t,{u:()=>r});var a=s(30758),i=s(14966),n=s(86070);const r=({pageId:e,uri:t,children:s})=>{const r=(0,i.u)(),l=(0,i.H)();return(0,a.useEffect)((()=>{r?.reportPageView({pageId:e,navigationalRoot:l??void 0,entityUri:t})}),[e,l,r,t]),(0,n.jsx)(n.Fragment,{children:s})}},68437:(e,t,s)=>{s.d(t,{g:()=>i});var a=s(30758);function i(){const[e,t]=(0,a.useState)(document.visibilityState);return(0,a.useEffect)((()=>{const e=()=>t(document.visibilityState);return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)}),[]),e}},18426:(e,t,s)=>{s.d(t,{H:()=>f});var a=s(63166),i=s(15758),n=s(12978),r=s(99612),l=s(85653),o=s(48125),c=s(4490),d=s(27602),u=s(85690),m=s(30758);var h=s(84014),v=s(49502);function f(){const e=(0,h.o)((e=>e?.item),((e,t)=>e?.uri===t?.uri)),t=(0,v.h)(e?.images||void 0,{desiredLabel:"large",desiredSize:600})??e?.images?.[0]?.url??"",{data:s}=function(e){const t=(0,a.NC)(d.HO),{request:s}=(0,m.useContext)(o.j);return(0,i.I)({enabled:t&&e.length>0&&e.every((e=>!!e)),queryKey:["useFetchDynamicColorsByUris",...e],gcTime:864e5,staleTime:432e5,queryFn:async()=>{const t=await(0,c.c)(s,r.DO,{imageUris:e}),a=t?.data,i=a?.dynamicColors.at(0);if(!i)throw new n.t("Empty response");switch(i.__typename){case"GenericError":throw new n.t(`Invalid response ${t}`);case"DynamicColors":break;default:(0,u.d)(i)}return(0,l.V)(i.dark)},select:e=>t?e:null})}([t]);return s??null}}}]);
//# sourceMappingURL=dwp-watch-feed-view-container.js.map