"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[472],{40472:(e,s,a)=>{a.d(s,{A:()=>Ce});var l=a(97500),t=a.n(l),r=a(95440),i=a(50780),n=a(63166),c=a(25453),o=a(75627),u=a(18212),d=a(36378),g=a(30758),m=a(6128),h=a(64721),v=a(34605),b=a(65234),y=a(32751);const x="lyrics-lyrics-contentContainer",S="lyrics-lyrics-contentWrapper",p="GML6YUVCeJvRhGznLnqm";var j=a(86070);const L=({trackUri:e,data:s,format:a,spec:l,logger:t,isSnippet:r})=>{const i=(0,y.z)(),n=(0,b.v7)(),{isTimeSynced:c}=s,o=(0,g.useCallback)(((e,s)=>{if(l&&t){const e=l.lyricsLineFactory().hitSeekToTime({msToSeekTo:s});t.logInteraction(e)}e.currentTarget.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),i.seekTo(s);const a=i.getState();a&&!a.isPaused||i.resume()}),[t,i,l]),u=(0,g.useCallback)((({lineRef:e,firstUpdate:s,isFirstLine:a,isActiveLine:l,activeLineIndex:t,hasSkipped:r,shouldAnimateScroll:i})=>{if(e.current&&n.current&&(l||a&&t<0)){const a=e.current.getBoundingClientRect().top,l=n.current.getBoundingClientRect().height,t=l/4,c=a>=t&&a<=l-t;if(!c&&!(s||r))return;const o="visible"===document.visibilityState&&i&&c?"smooth":"auto";e.current?.scrollIntoView({behavior:o,block:"center",inline:"center"})}}),[n]);return(0,j.jsx)("div",{className:x,children:(0,j.jsxs)("div",{className:S,children:[!r&&!c&&(0,j.jsx)(m.E,{as:"p",variant:"bodySmall",className:p,dir:"auto",children:h.Ru.get("web-player.lyrics.unsynced")}),(0,j.jsx)(v.x,{trackUri:e,data:s,format:a,onLineClick:c?o:void 0,onActiveLineChange:u,isSnippet:r},e)]})})};var f=a(82817),N=a(85690);const w="e7eFLioNSG5PAi1qVFT4",R="vkO5F4KbLk8mbjZoy1Lf",C=(0,g.memo)((function({version:e}){const{getMessage:s}=(()=>{const e=[h.Ru.get("web-player.lyrics.noLyrics0"),h.Ru.get("web-player.lyrics.noLyrics1"),h.Ru.get("web-player.lyrics.noLyrics2"),h.Ru.get("web-player.lyrics.noLyrics3")];return{getMessage:s=>{let a;switch(s){case"ad":a=h.Ru.get("web-player.lyrics.ad");break;case"error":a=h.Ru.get("web-player.lyrics.error");break;case"unavailable":a=e[Math.floor(Math.random()*e.length)];break;default:(0,N.k)(s),a=""}return a}}})();return(0,j.jsx)("div",{className:w,children:(0,j.jsx)("span",{className:R,children:s(e)})})}));var k=a(1978),A=a(20618),E=a(61214),G=a(90565),I=a(29748),F=a(33058);const T="hS_lrRHiW4BSWL8WcE8Q",_="O7ooKKJG0MArEwDgD6IV",O="XZ1MeB_1byeFy7W6Eg6u",Y="lq_cmE3Xcg5QJhvbBnPR",B="zPI8TW58LMxEQDIq_GdA",U="lyrics",D=({spec:e,logger:s})=>{const{openURLWithSessionTransfer:a}=(0,I.L)(),l=(0,G.k)(),{url:t,isExternal:r}=l,i=(0,k.Zp)(),n=(0,g.useCallback)((()=>{const l=new URL(t),n=new URLSearchParams(l.search);n.append("ref",U),l.search=n.toString();const c=l.href;if(!1===r){const e=(0,A.PI)({ref:U});i({pathname:"/premium",search:e.toString()})}else a(c);s.logInteraction(e.lyricsUpsellFactory().lyricsUpsellButtonFactory().hitNavigateToExternalUri({destination:c}))}),[t,r,s,e,i,a]),c=(0,F.t)(e.lyricsUpsellFactory());return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:T}),(0,j.jsx)("div",{className:_,children:(0,j.jsxs)("div",{className:B,ref:c,children:[(0,j.jsx)(m.E,{semanticColor:"textBase",variant:"titleLarge",className:Y,children:h.Ru.get("web-player.lyrics.upsell.title")}),(0,j.jsx)(E.$,{className:O,size:"small",onClick:n,colorSet:"invertedLight",children:h.Ru.get("web-player.lyrics.upsell.button")})]})})]})};var z=a(51064),W=a(28911),V=a(99232),H=a(7961),J=a(56570),M=a(92441),q=a(44979),P=a(99903),Z=a(1127),K=a(12433),Q=a(93775),X=a(63560);const $="na1tzIwfHqXPiMw_7NOd",ee="lVJJcrObmZtZsWaq8H3A",se=[{volume:Q.Y9.SING_ALONG_OFF,icon:(0,j.jsx)(z.X,{size:"small"}),get label(){return h.Ru.get("singalong.off")}},{volume:Q.Y9.HIGH,icon:(0,j.jsx)(W.C,{size:"small"}),get label(){return h.Ru.get("singalong.more-vocal")}},{volume:Q.Y9.LOW,icon:(0,j.jsx)(V.D,{size:"small"}),get label(){return h.Ru.get("singalong.less-vocal")}}],ae=g.memo((function({currentTrackUri:e}){const{isSupported:s,volume:a,setVocalVolume:l}=(e=>{const s=(0,X.S)(),[a,l]=(0,g.useState)(Q.Y9.SING_ALONG_OFF),{isSupported:t}=s.getCapabilities();return(0,g.useEffect)((()=>{s.setStatus(Q.nW.DISABLED).then((()=>{l(Q.Y9.SING_ALONG_OFF)}))}),[e,s]),(0,g.useEffect)((()=>()=>{s.setStatus(Q.nW.DISABLED)}),[s]),{isSupported:t,volume:a,setVocalVolume:(0,g.useCallback)((async e=>{e===Q.Y9.SING_ALONG_OFF?await s.setStatus(Q.nW.DISABLED):await s.setStatus(Q.nW.ENABLED),await s.setVocalVolume(e),l(e)}),[s])}})(e),r=(0,g.useCallback)((e=>{s&&l(e.volume)}),[s,l]);if(!s)return null;const i=se.find((e=>e.volume===a)),n=i?.volume===Q.Y9.SING_ALONG_OFF;return(0,j.jsx)(q.b,{menu:(0,j.jsxs)(P.W,{children:[(0,j.jsx)(Z.y,{children:h.Ru.get("singalong.title")}),se.map((e=>(0,j.jsx)(K.D,{role:"menuitemradio","aria-checked":a===e.volume,"aria-label":e.label,onClick:()=>r(e),leadingIcon:e.icon,children:e.label},e.volume)))]}),children:(e,s,a)=>(0,j.jsxs)("button",{onClick:s,ref:a,type:"button",className:t()($,{[ee]:n}),children:[n?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(H.q,{size:"small"}),(0,j.jsx)(m.E,{variant:"bodySmall",children:h.Ru.get("singalong.button")})]}):(0,j.jsxs)(j.Fragment,{children:[i.icon,(0,j.jsx)(m.E,{variant:"bodySmall",children:i.label})]}),e?(0,j.jsx)(J.J,{size:"small"}):(0,j.jsx)(M.y,{size:"small"})]})})}));var le=a(81178),te=a(29754),re=a(95826),ie=a(8476),ne=a(19412),ce=a(8296),oe=a(91470),ue=a(38254),de=a(18426),ge=a(84014),me=a(1620);const he="lyrics-lyrics-container",ve="VznvlkEh9fhk1AKhhZwe",be="iSeDDdAUlWo8OJbCKDLw",ye="rSXzEXBdsRTaK6qSBHYg",xe="UdJMosuRv5_ySWnmSPZH",Se="zEwFftu1Dw68QKaKj_EE",pe="lyrics-lyrics-background",je=(0,j.jsx)("div",{className:Se,children:(0,j.jsx)(d.m,{})}),Le=(0,j.jsx)(C,{version:"error"}),fe=(0,j.jsx)(C,{version:"ad"}),Ne=(0,j.jsx)(C,{version:"unavailable"}),we={active:i.ONy,inactive:i.Ql9,passed:i.Ql9,background:i.wdA,messaging:i.ONy},Re=(e,s)=>{switch(s){case ne.bYw.CONTROL:default:return e;case ne.bYw.EMPTY_LYRICS:return{...e,lyrics:[]};case ne.bYw.TRUNCATED_LYRICS:return{...e,lyrics:e.lyrics.slice(0,5)}}},Ce=({format:e})=>{const s=(0,re.X)(),a=(0,ue.v)((e=>e.activeDevice?.isLocal)),l=(0,ge.o)((e=>e?.item),((e,s)=>e?.uri===s?.uri)),i=l?.uri||"",{spec:d,logger:g}=(0,me.r)(c.V,{data:{uri:i}}),{data:m,loading:h,error:v}=(0,te.J)(),b=(0,n.NC)(ne.bOR),y=(0,n.NC)(ne.JSO,{loadingValue:ne.bYw.CONTROL}),x=(0,de.H)(),S=x?.higherContrast;let p=!1,N=we;m?.hasLyrics&&(b&&(p=m.showUpsell),y!==ne.bYw.TRUNCATED_LYRICS&&y!==ne.bYw.EMPTY_LYRICS||(p=!0),N={active:S?.textBase.toCSS(oe.a.RGBA)??m.colors.activeText,inactive:S?.textSubdued.toCSS(oe.a.RGBA)??m.colors.text,passed:S?.textBase.toCSS(oe.a.RGBA)??ce.Q.fromCSS(m.colors.activeText,.7).toCSS(oe.a.RGBA),background:S?.backgroundBase.toCSS(oe.a.RGBA)??m.colors.background,messaging:S?.textSubdued.toCSS(oe.a.RGBA)??m.colors.text}),(0,ie.z)(N.background,we.background);const w=(0,ge.o)((e=>e?.nextItems?.[0]),((e,s)=>e?.uri===s?.uri));(0,le.I)(w?.uri,w?.images);let R=je,C=!1;if(i)if((0,o.AIy)(i))R=fe;else if(v)R=Le;else if(h)R=je;else if(m)if(m.hasLyrics){const l=a??!1;C=s&&m.hasVocalRemoval&&l,R=(0,j.jsx)(L,{trackUri:i,data:Re(m,y),format:e,spec:d,logger:g,isSnippet:p})}else R=Ne;const k=(0,r.d4)((e=>e.ads.leaderboard.isEnabled)),A={"--lyrics-color-active":N.active,"--lyrics-color-inactive":N.inactive,"--lyrics-color-passed":N.passed,"--lyrics-color-background":N.background,"--lyrics-color-messaging":N.messaging,"--show-gradient-over-lyrics":p?"block":void 0};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(u.Q,{usePlayingItem:!0,children:"Spotify"}),(0,j.jsxs)("div",{className:t()(he,{[ve]:k}),style:A,children:[(0,j.jsx)("div",{className:pe}),R,(0,j.jsxs)("div",{className:be,children:[(0,j.jsx)("div",{className:ye,children:"cinema"!==e&&(0,j.jsx)(f.R,{})}),(0,j.jsx)("div",{className:xe,children:C?(0,j.jsx)(ae,{currentTrackUri:i}):null})]}),p&&(0,j.jsx)(D,{spec:d,logger:g})]})]})}},82817:(e,s,a)=>{a.d(s,{R:()=>G});var l=a(30758),t=a(97500),r=a.n(t),i=a(95440),n=a(62092),c=a(11333),o=a(6128),u=a(92441),d=a(63166),g=a(64721),m=a(44979),h=a(99903),v=a(12433),b=a(29754),y=a(15628),x=a(37145),S=a(27602);const p="ZEIqEgvTSLMYDUyg4fwD",j="JCMG2XpPpmwVFJCmRsv8",L="G5xyHz2quLjuzQhFHUb4",f="qYiwqn2o_ph2NxiAfCpG",N="aENlvMWeYBOLGGB34Tpl",w="GdrYdqKUxEn8rN8JLnFW",R="AH1Gz87FuBEFAIF3XbA4";var C=a(86070);const k=e=>{try{if(e){const s=new Intl.DisplayNames([e],{type:"language"}).of(e);return s?s.charAt(0).toUpperCase()+s.slice(1):e}return""}catch(s){return e||""}},A=()=>{const e=(0,i.wA)(),{data:s}=(0,b.J)(),a=(0,i.d4)(x.s),t=(0,l.useCallback)((()=>{e(a?(0,y.gL)(""):(0,y.gL)(navigator.language))}),[e,a]);return s?.hasLyrics&&(s.alternatives||[]).length>0?(0,C.jsx)("button",{className:p,onClick:t,children:(0,C.jsx)("div",{className:r()(f,{[L]:a}),children:(0,C.jsx)(n.H,{fill:"white",size:"small"})})}):null},E=()=>{const e=(0,i.wA)(),{data:s}=(0,b.J)(),a=(0,i.d4)(x.s),[t,d]=(0,l.useState)(!1),S=s?.hasLyrics&&(s.alternatives||[]).length>0,A=a&&s?.hasLyrics&&(s.alternatives||[]).find((e=>e.language.substring(0,2)===a.substring(0,2)));if(!S)return null;const E=(0,C.jsx)(h.W,{children:[{language:""},...s.alternatives||[]].map((({language:s})=>{let l=g.Ru.get("web-player.lyrics.translation.none");return s&&(l=k(s)),(0,C.jsx)(v.D,{trailingIcon:s===a?(0,C.jsx)(c.i,{size:"small",semanticColor:"textBrightAccent"}):null,role:"menuitem",onClick:()=>{e((0,y.gL)(s))},children:l},s)}))});return(0,C.jsx)("div",{className:p,children:(0,C.jsx)(m.b,{renderInline:!0,menu:E,onShow:()=>d(!0),onHide:()=>d(!1),children:(0,C.jsxs)("div",{className:r()(j,{[L]:A}),children:[(0,C.jsx)("div",{className:f,children:A?(0,C.jsx)(n.H,{fill:"black",size:"small"}):(0,C.jsx)(n.H,{size:"small"})}),(0,C.jsxs)("div",{className:R,children:[(0,C.jsx)(o.E,{variant:"bodySmallBold",children:a?A?g.Ru.get("web-player.lyrics.translating.to",k(a)):g.Ru.get("web-player.lyrics.translation.not_available",k(a)):g.Ru.get("web-player.lyrics.translate")}),(0,C.jsx)(u.y,{className:r()(N,{[w]:t}),size:"small"})]})]})})})},G=()=>{switch((0,d.NC)(S.Tc,{loadingValue:S.LZ.CONTROL})){case S.LZ.CONTROL:default:return null;case S.LZ.SYSTEM_LANGUAGE:return(0,C.jsx)(A,{});case S.LZ.ALL_LANGUAGES:return(0,C.jsx)(E,{})}}}}]);
//# sourceMappingURL=472.js.map