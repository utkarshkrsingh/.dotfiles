"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7811,7971,2746],{57594:(e,t,s)=>{s.d(t,{U:()=>d});var i=s(64721),n=s(49740),a=s(44979),r=s(86070);const d=({menu:e,onClick:t,"aria-label":s})=>(0,r.jsx)(a.b,{menu:e,children:(0,r.jsx)(n.e,{size:n.M.xs,label:i.Ru.get("more"),ariaLabel:s,onClick:t})})},97688:(e,t,s)=>{s.d(t,{n:()=>r});var i=s(40748),n=s(43494),a=s(86070);const r=({icon:e,activeIcon:t,label:s,isActive:r,...d})=>(0,a.jsx)(n.Zp,{label:s,children:(0,a.jsx)(i.H,{"aria-label":`${s}, ${r?"selected":"unselected"}, button`,"aria-pressed":r,semanticColor:r?"textBrightAccent":"textSubdued",iconOnly:r?t:e,"aria-haspopup":"menu",size:"small",...d})})},68890:(e,t,s)=>{s.d(t,{I:()=>l});var i=s(30758),n=s(7004),a=s(6128),r=s(75627),d=s(55285),o=s(45006),c=s(86070);const l=({uri:e,title:t,clickUrl:s,onClick:l,variant:u,semanticColor:v,testid:m="ad-link"})=>{const x=(0,i.useMemo)((()=>(0,r.o_h)(s)?.toURLPath(!0)),[s]);let p;return x?p=(0,c.jsx)(d.N,{to:x,dir:"auto","data-testid":m,children:t}):s&&(p=(0,c.jsx)(n.Y,{href:s,"data-testid":m,onClick:l,semanticColor:v,standalone:!0,dir:"auto",children:t})),(0,c.jsx)(o.r,{title:t,children:(0,c.jsx)(a.E,{as:"p",variant:u,semanticColor:v,dir:"auto",children:p||t})},e)}},17811:(e,t,s)=>{s.r(t),s.d(t,{AdsNpv:()=>Mt,default:()=>Vt});var i=s(97500),n=s.n(i),a=s(63166),r=s(95519),d=s(95602),o=s(6128),c=s(64721),l=s(45006);const u={standardHeader:"OnnbOInFe49hYMQmhwUC",fixedHeader:"XZaBo7y3JfnBbjVV9TZo",verticalVideoHeader:"UP1rH6cQZiAZCdkPnDOg"};var v=s(86070);const m=({item:e,variant:t="bodyMediumBold",semanticColor:s="textBase",experience:i="standard"})=>{const n=u[`${i}Header`],a=e.isPodcastAd?c.Ru.get("ad-formats.npv.header.podcast-context"):c.Ru.get("ad-formats.npv.header.music-context");return(0,v.jsx)("div",{className:n,children:(0,v.jsx)(l.r,{children:(0,v.jsx)(o.E,{variant:t,semanticColor:s,children:a})},a)})};var x=s(70490);const p="UhO5sUnZ2AoTQjzRdVvw",y=({url:e})=>(0,v.jsx)("div",{className:p,children:(0,v.jsx)(x._,{testid:"cover-art-image",loading:"lazy",src:e})}),g=({item:e,visualEnhancementUrl:t})=>(0,v.jsx)(y,{item:e,url:t}),h=e=>(0,v.jsx)(v.Fragment,{}),f="pvAyLo3KN8QP7KxQtiub",j="r4EqB8Z5_aywMW_8I84P",_=e=>{const{item:t}=e,s=t?.metadata?.["ad.canvas.type"];return"video"===s?(0,v.jsx)(h,{...e}):(0,v.jsx)(g,{...e})},b=e=>(0,v.jsxs)("div",{className:f,children:[(0,v.jsx)("div",{className:j}),(0,v.jsx)(_,{...e})]});var k=s(57594),I=s(92087),E=s(88482);const T="iDW7b6oChePRpgfDFY3U",A=({item:e})=>(0,v.jsxs)("div",{className:T,children:[(0,v.jsx)(E.T,{item:e}),(0,v.jsx)(I.t,{item:e})]});var C=s(40352),N=s(42746);const M="JiMklw0itqYJ1aE76Vi8",V=({item:e})=>(0,v.jsxs)("div",{className:M,children:[(0,v.jsx)(N.ContextAdTitle,{item:e,surface:"AD_NPV"}),(0,v.jsx)(C.ContextAdSubtitle,{item:e,surface:"AD_NPV"})]});var q=s(19369),w=s(56989),R=s(29204),S=s(84576);function U(){const e=(0,S.vh)();return{linkUbiEvent:function({adId:t,ubiEventId:s,product:i,format:n,requestId:a}){e.send((0,R.A)({ad_id:t,ad_request_id:a,ad_format:n,content_type:i,ubi_event_id:s}))}}}var P=s(30758),O=s(99903),F=s(12433),D=s(95440),Q=s(10718),z=s(66686),Z=s(99594),B=s(95309),L=s(11716);const W=({item:e,spec:t,contextTrack:s})=>{const i=(0,D.wA)(),n=(0,L.s)(),{linkUbiEvent:a}=U(),r=`${(0,q.Mj)(s)}_${(0,q.q5)(s)}`;return(0,v.jsx)(F.D,{role:"menuitem",testid:"about-this-ad-context-menu-item",leadingIcon:(0,v.jsx)(Q.p,{size:"small"}),"aria-label":c.Ru.get("ad-formats.dsa.aboutThisAd"),onClick:()=>{i((0,Z.Oc)()),i((0,z.b0)(e));const d=t.contextMenuFactory({identifier:e.metadata?.lineitem_id,reason:r}).triggerDsaFactory().hitUiNavigate({destination:"/context_menu"}),{interactionId:o}=n.logInteraction(d);a({adId:e.adId,requestId:e.requestId,ubiEventId:o,format:(0,q.Mj)(s),product:(0,q.q5)(s)})},divider:"before",children:c.Ru.get("ad-formats.dsa.aboutThisAd")})},H=(0,P.memo)((function(e){return(0,v.jsx)(B.pZ,{value:"about-this-ad",children:(0,v.jsx)(W,{...e})})})),$=(0,P.memo)((function({item:e,spec:t,contextTrack:s}){const i=(0,L.s)(),{linkUbiEvent:n}=U(),a=`${(0,q.Mj)(s)}_${(0,q.q5)(s)}`;return(0,P.useEffect)((()=>{(()=>{const r=i.logImpression(t.contextMenuFactory({identifier:e.metadata?.lineitem_id,reason:a}).impression());n({adId:e.adId,requestId:e.requestId,format:(0,q.Mj)(s),product:(0,q.q5)(s),ubiEventId:r})})()}),[]),(0,v.jsx)(B.pZ,{value:"ad",children:(0,v.jsxs)(O.W,{children:[(0,v.jsx)(B.pZ,{value:"ad-title",children:(0,v.jsx)(F.D,{role:"menuitem",testid:"ad-title-context-menu-item",divider:"after",disabled:!0,children:e.metadata.advertiser})}),(0,v.jsx)(H,{item:e,spec:t,contextTrack:s})]})})}));var Y=s(19412);const G="NYcvpWpgvQYZploOD6rI",J="OpXrpghZvv_w9ygosJFP",K=({item:e,spec:t})=>{const s=(0,a.NC)(Y.SeK,{loadingValue:!1}),i=(0,w.mr)(),n=(0,L.s)(),{linkUbiEvent:r}=U(),d=`${(0,q.Mj)(e)}_${(0,q.q5)(e)}`;return(0,v.jsxs)("div",{className:G,children:[(0,v.jsx)(V,{item:e}),(0,v.jsxs)("div",{className:J,children:[(0,v.jsx)(A,{item:e}),s&&i?.isDsaEligible&&(0,v.jsx)("div",{"data-testid":"PanelHeader_AdContextMenuButton",children:(0,v.jsx)(k.U,{menu:(0,v.jsx)($,{item:i,contextTrack:e,spec:t}),onClick:()=>{if(i){const s=t.infoContainerFactory().contextMenuButtonFactory({identifier:i.metadata?.lineitem_id,reason:d}).hitUiNavigate({destination:"/context_menu"}),{interactionId:a}=n.logInteraction(s);r({adId:i.adId,requestId:i.requestId,format:(0,q.Mj)(e),product:(0,q.q5)(e),ubiEventId:a})}}})})]})]})};var X=s(2732);const ee=({item:e,context:t,index:s})=>t?(0,v.jsx)(X.h,{context:t,item:e,index:s}):null,te="tD84X2SD0IicMx3osK8a",se=({item:e,spec:t,currentPanel:s,canvasVisualEnhancementUrl:i})=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(b,{item:e,visualEnhancementUrl:i,currentPanel:s,spec:t}),(0,v.jsx)("div",{className:te,children:(0,v.jsx)(K,{item:e,currentPanel:s,spec:t})})]}),ie=({item:e,spec:t,context:s,index:i,currentPanel:n})=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(ee,{item:e,context:s,index:i}),(0,v.jsx)(K,{item:e,currentPanel:n,spec:t})]}),ne=e=>{const{item:t}=e,s=(0,a.NC)(Y.Qdk,{loadingValue:!1}),i=t?.metadata?.["ad.canvas.type"],n="image"===i||"video"===i,r=t.metadata?.["ad.canvas.url"];return!!(s&&n&&"image"===i&&r)?(0,v.jsx)(se,{...e,canvasVisualEnhancementUrl:r}):(0,v.jsx)(ie,{...e})};var ae=s(96930),re=s(86560),de=s(65583),oe=s(27796),ce=s(62130),le=s(1759),ue=s(72630),ve=s(55285);const me="mJucukPuB6OTWgaD4MZk",xe="i3o8ABclZov7rz8zzKYP",pe=(0,P.lazy)((()=>s.e(8554).then(s.bind(s,8554)))),ye=({item:e,backgroundColor:t,className:s})=>{const i=(0,D.wA)(),{url:a,buttonMessage:r,tagline:d}=(0,q.iz)(e),o=r||c.Ru.get("ad-formats.learnMore");if(!a)return null;const l=n()(me,s),u=(0,ce.H)(a);return(0,v.jsx)(ve.N,{to:u,"data-testid":"ad-companion-card",className:l,onClick:()=>{i((0,ue.q5)(le.c.COMPANION_CARD,le.V.AD_NPV))},children:(0,v.jsx)(ae.v,{style:{backgroundColor:t},className:xe,onClickHint:c.Ru.get("ad-formats.learnMore"),variant:"tinted",horizontalGap:(0,re.po)("looser"),id:e.uri,title:(0,v.jsx)(de.d,{variant:"mestoBold","data-testid":"ad-companion-card-tagline",children:d||o}),trailing:(0,v.jsx)(P.Suspense,{fallback:(0,v.jsx)(oe.V,{}),children:d?(0,v.jsx)(pe,{text:o,clickUrl:u,onClick:()=>{i((0,ue.q5)(le.c.CTA_BUTTON,le.V.AD_NPV))}}):(0,v.jsx)(oe.V,{semanticColor:"textBase"})})})})};var ge=s(33704),he=s(73762);const fe="_9mvd0bTv9vUHyKGzvBNV",je="hQjIgVttFxVwEZ52g6Rg",_e=({isPodcastAd:e,noticeType:t,primaryText:s})=>{(0,P.useEffect)((()=>{const e=document.getElementById("connected-box");if(e){const t=e.offsetWidth;e.style.height=`${t}px`}}),[]);const i=e?c.Ru.get("ad-formats.survey-podcast-content"):c.Ru.get("ad-formats.survey-music-content");return(0,v.jsx)("div",{className:je,id:"connected-box",children:(0,v.jsxs)(v.Fragment,{children:["success"===t?(0,v.jsx)(ge.T,{size:"xxlarge",spacing:"small",semanticColor:"textBase","data-testid":"survey-notice-check"}):(0,v.jsx)(he.b,{size:"xxlarge",spacing:"small",semanticColor:"textBase","data-testid":"survey-notice-exclamation"}),(0,v.jsx)(o.E,{as:"h1",variant:"titleSmall",paddingBottom:"tighter-2",className:fe,semanticColor:"textBase",children:s}),(0,v.jsx)(o.E,{children:i})]})})},be=({isPodcastAd:e,logger:t})=>((0,P.useEffect)((()=>{t.logSurveyAdEventWithoutAd({event:"event_survey_on_connect",eventReason:"secondary_device"})}),[]),(0,v.jsx)(_e,{isPodcastAd:e,noticeType:"alert",primaryText:c.Ru.get("ad-formats.survey-connected-note")})),ke=({isPodcastAd:e,validationResult:t,logger:s})=>((0,P.useEffect)((()=>{s.logAdEvent({event:"errored",reason:"survey_malformed"}),s.logAdError({errorType:"survey_malformed",errorMessage:t.errorMessage})}),[]),(0,v.jsx)(_e,{isPodcastAd:e,noticeType:"alert",primaryText:c.Ru.get("error-dialog.generic.header")}));var Ie=s(99912),Ee=s(36688),Te=s(81643),Ae=s(83878),Ce=s(82208);const Ne=()=>{const{logger:e}=(0,w.yU)();return e},Me="zr0dLusU4AgiRoEVZVx_",Ve="FQKI6EvRALxogOFyociA",qe=({data:e,selected:t,handleOptionClick:s,className:i,ad:a})=>{const r=Ne(),d=(i,n)=>{const d={id:i.id,"aria-label":`Select ${i.primaryText}`};return e.surveyQuestionType===Ee.xV.MULTI_SELECT?(0,v.jsx)(Te.c,{...d,checked:t.has(i.id),onChange:()=>{s({optionId:i.id,isExclusive:i.isExclusive,questionType:e.surveyQuestionType,position:n}),r.logSurveyAdEventWithAd({optionId:i.id,questionId:e.id,event:t.has(i.id)?"event_option_deselected":"event_option_selected",position:n,ad:a})}}):(0,v.jsx)(Ae.M,{...d,checked:t.has(i.id),onChange:()=>{s({optionId:i.id,isExclusive:i.isExclusive,questionType:e.surveyQuestionType,position:n}),r.logSurveyAdEventWithAd({optionId:i.id,questionId:e.id,event:"event_option_selected",position:n,ad:a})}})};return(0,v.jsx)(Ce.g,{labelFor:e.id,withFieldset:!0,className:n()(Me,i),children:(0,v.jsx)("div",{children:e.surveyQuestionOptions.map(((i,n)=>(0,v.jsx)(ae.v,{className:Ve,id:i.id,variant:"elevated",title:i.primaryText,leading:d(i,n),isSelected:t.has(i.id),onClick:()=>{s({optionId:i.id,isExclusive:i.isExclusive,questionType:e.surveyQuestionType,position:n}),r.logSurveyAdEventWithAd({optionId:i.id,questionId:e.id,event:t.has(i.id)?"event_option_deselected":"event_option_selected",position:n,ad:a})}},i.id)))})})};var we=s(61214);const Re="o1cH6TNkpq2sTkq1EAZU",Se="urYkLZy00wWdQH24F1Ja",Ue="GneD3mdmK5FDZVz6bzhB",Pe="MTSvglGhr7gd3paX4exJ",Oe=({selected:e,submitted:t,handleClick:s})=>(0,v.jsx)("div",{className:n()(Re,Se,{[Ue]:t}),children:(0,v.jsx)(we.$,{disabled:0===e.size,size:"medium",fullWidth:!0,colorSet:"invertedLight",label:"Submit","data-testid":"survey-submit-button",onClick:s,id:Pe,children:c.Ru.get("ad-formats.survey-submit-button")})}),Fe="HgfSrPwFpIvBDXNMx0NO",De="FjDNaretUQGhB3YYHUaZ",Qe="MDmTCQhrCnUXjUhyWx_A",ze=({showThankYou:e,ad:t,questionId:s})=>{const i=Ne();return(0,P.useEffect)((()=>{e&&i.logSurveyAdEventWithAd({questionId:s,event:"event_thank_you_displayed",ad:t})}),[s,e]),(0,v.jsxs)("div",{className:n()(De,{[Qe]:e}),children:[(0,v.jsx)(ge.T,{size:"xxlarge",spacing:"small"}),(0,v.jsx)(o.E,{as:"h1",variant:"titleSmall",paddingBottom:"tighter-2",className:Fe,children:c.Ru.get("ad-formats.survey-thankyou")})]})};function Ze(){const[e,t]=(0,P.useState)(new Map),[s,i]=(0,P.useState)(!1);return{selected:e,handleOptionClick:({optionId:s,isExclusive:i,questionType:n,position:a})=>{let r=new Map(e);n===Ee.xV.MULTI_SELECT?r=function({optionId:e,selected:t,isExclusive:s,position:i}){let n;t.has(e)?(n=new Map(t),n.delete(e)):n=function({optionId:e,selected:t,isExclusive:s,position:i}){const n=new Map(t);s&&n.clear();return t.forEach((({isExclusive:e},t)=>{e&&n.delete(t)})),n.set(e,{isExclusive:s,position:i}),n}({optionId:e,isExclusive:s,selected:t,position:i});return n}({optionId:s,isExclusive:i,selected:e,position:a}):n===Ee.xV.SINGLE_SELECT&&(r=function({optionId:e,selected:t,position:s}){let i=new Map(t);t.has(e)||(i=function({optionId:e,selected:t,position:s}){const i=new Map(t);return i.clear(),i.set(e,{isExclusive:!0,position:s}),i}({optionId:e,selected:t,position:s}));return i}({optionId:s,selected:e,position:a})),t(r)},setSurveyIsSubmitted:i,submitted:s}}class Be{constructor(e){this.isValid=e.isValid,this.errorMessage=e.errorMessage}}var Le=s(34964),We=s(34413);const He=({ad:e,eventSender:t,logger:s,questionId:i,selected:n})=>{const a=[];n.forEach(((e,t)=>{const s=(({id:e,selectedOption:t})=>We.$y.create({selectedSurveyQuestionOptionId:e,optionPositionIndex:t.position.toString()}))({id:t,selectedOption:e});a.push(s)}));const r=We.Tl.create({surveyQuestionId:i,selectedSurveyOptions:a}),d=We.BN.create({surveyQuestionAnswers:[r]}),o=We.A7.create({survey:d});s.logAdEvent({event:"survey_submitted",payload:o}),s.logAdEvent({event:"ended"}),t.send((0,Le.i)({ad_id:e.adId,event:"event_survey_submitted",format:(0,Ee.gh)(e.format).toLowerCase(),in_focus:!0,lineitem_id:e.metadata?.lineitem_id,product_name:"brand_survey",question_id:i,request_id:e.requestId,response:JSON.stringify(o),slot:e.slot}))};const $e=function(e,t=2e3){const s=(0,w.dY)();(0,P.useEffect)((()=>{if(!e)return;const i=setTimeout((()=>s.skipToNext()),t);return()=>clearTimeout(i)}),[t,e,s])},Ye="QcjxDZqAGwQOqerAjHdc",Ge="GZDC018jhUZA8opoHkpM",Je="xNk9rFVlHRml2zumyfQI",Ke="rA7_f0w9lodVUT7ad3RC",Xe="FfcoZWtdfcG0Ihbesrub",et="q1uiO23dnmvrVxxEOq9l",tt="KRI6OoYy611XXayRUTyE",st=({question:e,ad:t})=>{const s=Ne(),i=(0,S.vh)(),a=(0,w.dY)();(0,P.useEffect)((()=>{s.logSurveyAdEventWithAd({questionId:e.id,event:"event_companion_viewed",ad:t})}),[e.id]);const{selected:r,handleOptionClick:d,submitted:c,setSurveyIsSubmitted:l}=Ze();(0,P.useEffect)((()=>{e.surveyQuestionType in Ee.xV||(s.logAdEvent({event:"errored",reason:"survey_malformed"}),a.skipToNext())})),$e(c,2e3);return(0,v.jsxs)(Ie.a,{className:n()(Ye,Ke),padding:"looser",children:[(0,v.jsxs)("div",{className:n()(Ge,{[et]:c}),children:[(0,v.jsxs)("div",{className:tt,children:[(0,v.jsx)(o.E,{as:"h1",variant:"titleSmall",paddingBottom:"tighter-2",children:e.primaryText}),(0,v.jsx)(o.E,{as:"p",semanticColor:"textSubdued",variant:"bodySmall",children:e.secondaryText})]}),(0,v.jsx)(qe,{className:n()(Je,Xe),ad:t,selected:r,handleOptionClick:d,data:e})]}),(0,v.jsx)(Oe,{handleClick:()=>{l(!0),He({eventSender:i,ad:t,selected:r,logger:s,questionId:e.id})},submitted:c,selected:r}),(0,v.jsx)(ze,{showThankYou:c,ad:t,questionId:e.id})]})},it=({survey:e,ad:t})=>e?(0,v.jsx)(st,{question:e?.surveyQuestions[0],ad:t}):null,nt=e=>{return t=e,t.survey?.surveyQuestions?.length?(e=>!e.survey?.surveyTransparencyContent||0===Object.keys(e.survey.surveyTransparencyContent).length)(e)?new Be({isValid:!1,errorMessage:"survey.survey_transparency_content : missing"}):new Be({isValid:!0}):new Be({isValid:!1,errorMessage:"survey.survey_questions : missing"});var t},at=e=>{const t=e?.[0];if(s=t,!s?.id||s.id.length<1)return new Be({isValid:!1,errorMessage:"survey.survey_questions[0].id : missing"});var s;if((e=>(0,Ee.BM)(e?.surveyQuestionType)<=0)(t))return new Be({isValid:!1,errorMessage:"survey.survey_questions[0].survey_question_type : invalid type"});if((e=>!e?.primaryText||e?.primaryText?.length<1)(t))return new Be({isValid:!1,errorMessage:"survey.survey_questions[0].primary_text : missing"});if((e=>!e?.surveyQuestionOptions?.length)(t))return new Be({isValid:!1,errorMessage:"survey.survey_questions[0].survey_question_options : missing"});const i=t?.surveyQuestionOptions.find((e=>(e=>!e.id||e?.id?.length<1)(e)));if(i)return new Be({isValid:!1,errorMessage:`survey.survey_questions[0].survey_question_options[${t?.surveyQuestionOptions.indexOf(i)}].id : missing`});const n=t?.surveyQuestionOptions.find((e=>(e=>!e.primaryText||e.primaryText.length<1)(e)));return new Be(n?{isValid:!1,errorMessage:`survey.survey_questions[0].survey_question_options[${t?.surveyQuestionOptions.indexOf(n)}].primary_text : missing`}:{isValid:!0})},rt=e=>{if(!e)return new Be({isValid:!1,errorMessage:"no ad"});const t=(e=>e?.companions.find((e=>e.survey)))(e);if(!t)return new Be({isValid:!1,errorMessage:"companions.survey : missing"});const s=nt(t);if(s&&!s.isValid)return s;const i=t?.survey?.surveyQuestions,n=at(i);if(n&&!n.isValid)return n;const a=t?.survey?.surveyTransparencyContent,r=(d=a)&&(e=>!e?.transparencyLabel||e?.transparencyLabel.length<1)(d)?new Be({isValid:!1,errorMessage:"survey.survey_transparency_content.transparency_label : missing"}):d&&(e=>!e?.transparencyUrl||e?.transparencyUrl.length<1)(d)?new Be({isValid:!1,errorMessage:"survey.survey_transparency_content.transparency_url : missing"}):new Be({isValid:!0});var d;return r||new Be({isValid:!0})},dt=(0,P.memo)((function({displayText:e,url:t,ad:s,questionId:i}){const n=Ne();return(0,P.useEffect)((()=>{n.logSurveyAdEventWithAd({questionId:i,event:"event_context_menu",ad:s})}),[i]),(0,v.jsx)(O.W,{children:(0,v.jsx)(F.D,{role:"menuitem",leadingIcon:(0,v.jsx)(Q.p,{size:"small"}),"aria-label":`${e}, link`,to:t,children:e})})}));var ot=s(80488);const ct="iFWtvDR8p3PNwLx46nWu",lt="wj4kWjE4PuHVGqEf0ohK",ut=({item:e})=>{const t=(0,w.mr)(),s=rt(t),i=Ne(),n=(0,P.useMemo)((()=>t?.companions.find((e=>e.survey))?.survey),[t]),a=n?.surveyTransparencyContent,{currentDevice:r}=(0,ot.l)(),{isLocal:d}=r;return(0,v.jsxs)("div",{className:lt,children:[d?t&&s.isValid?(0,v.jsx)(it,{survey:n,ad:t}):(0,v.jsx)(ke,{isPodcastAd:e?.isPodcastAd,validationResult:s,logger:i}):(0,v.jsx)(be,{isPodcastAd:e?.isPodcastAd,logger:i}),(0,v.jsxs)("div",{className:ct,children:[(0,v.jsx)(V,{item:e}),a&&t&&(0,v.jsx)(k.U,{"aria-label":"More options, button",menu:(0,v.jsx)(dt,{questionId:n?.surveyQuestions[0]?.id,ad:t,displayText:a.transparencyLabel,url:a.transparencyUrl})})]})]})},vt=e=>{const t=(0,D.d4)((e=>e.ads?.vto));return"audio"===e?.mediaType||!t?.isMinimized};var mt=s(29507);const xt="M7UVXKPsARIM71fmtSUG",pt="HKhLNVB5OsH5osqax9lk",yt="i_7T75rV7Rj7AyykwrCf",gt="na5oNvZD9KtuYIUiIUZg",ht="_7QFCuyjgT6BwUe1JJVL",ft="g1fyNwi0G98CTbv9v4We",jt=({item:e,context:t,index:s,currentPanel:i,spec:a})=>{const r=vt(e),d="portrait"===e.videoOrientation,o=d&&!r?xt:"",c=n()(ht,{[ft]:d}),l=n()({[gt]:d});return(0,v.jsxs)("div",{className:c,children:[r?(0,v.jsx)(ee,{item:e,context:t,index:s}):(0,v.jsxs)("div",{className:yt,children:[d&&(0,v.jsx)("div",{className:pt}),(0,v.jsx)("div",{className:l,children:(0,v.jsx)(mt.F,{})})]}),(0,v.jsx)("div",{className:o,children:(0,v.jsx)(K,{item:e,currentPanel:i,spec:a})})]})};var _t=s(50780),bt=s(65819);var kt=s(16383);var It=s(1620);const Et="nONhpa6k5EMxHTR1RXhM",Tt="SDP4__0ksgTwERvZfjE8",At="cp7_8T7Q27pZ5zYXUFOW",Ct="IVGg8Hz4Py4BaPEyJz0T",Nt="tUurYuAJ2ZftcyLRFJ9z",Mt=({item:e,context:t,index:s,currentPanel:i})=>{const{logoImage:o}=(0,q.iz)(e),c=vt(e),l=e?.metadata?.["ad.canvas.type"],u="image"===l||"video"===l,x="portrait"===e.videoOrientation&&!c,{spec:p,UBIFragment:y}=(0,It.r)(r.m,{}),g=((e=null,t=0,s=_t.CpN)=>{const[i,n]=(0,P.useState)(s),a=(0,bt.z)(e,s,"colorDark");return(0,P.useEffect)((()=>{setTimeout((()=>{n(a)}),t)}),[t,a]),i})((0,d.Df)(e)?o:e?.images[0]?.url||o,600),h=(0,a.NC)(Y.gLA,{loadingValue:!1}),f=x?"verticalVideo":u?"fixed":"standard",j=(e=>{const t=(0,w.mr)(),s=t?.requestId,i=Ne(),n=(0,a.NC)(Y.o4S,{loadingValue:!1});return(0,P.useEffect)((()=>{s&&(0,kt.o)(e)&&!n&&i.logAdError({errorType:"survey_ad_feature_disabled",errorMessage:"survey feature flag is disabled"})}),[]),(0,kt.o)(e)&&n?"survey":(0,d.Df)(e)?"video":"audio"})(e),_="survey"===j;return(0,v.jsx)("div",{className:n()(Et,{[Tt]:_}),children:(0,v.jsx)(y,{spec:p,children:(0,v.jsxs)("div",{className:At,children:[(0,v.jsxs)("div",{className:n()(Ct,{[Tt]:_}),children:[(0,v.jsx)(m,{item:e,experience:f}),(()=>{switch(j){case"video":return(0,v.jsx)(jt,{item:e,spec:p,index:s,currentPanel:i,context:t});case"survey":return(0,v.jsx)(ut,{item:e});default:return(0,v.jsx)(ne,{item:e,context:t,index:s,currentPanel:i,spec:p})}})()]}),"survey"!==j?(0,v.jsx)(ye,{item:e,className:Nt,...h&&{backgroundColor:g}}):null]})})})},Vt=Mt},92087:(e,t,s)=>{s.d(t,{t:()=>h});var i=s(95440),n=s(91814),a=s(54336),r=s(64721),d=s(97688),o=s(40351),c=s(55705),l=s(5176),u=s(44979),v=s(30758),m=s(99903),x=s(12433),p=s(95309),y=s(86070);const g=(0,v.memo)((function({onFeedbackReasonSelect:e}){const t=new Map([["not_relevant",r.Ru.get("ad-formats.ad-feedback.dislike.not-relevant")],["too_often",r.Ru.get("ad-formats.ad-feedback.dislike.too-often")],["unpleasant",r.Ru.get("ad-formats.ad-feedback.dislike.unpleasant-content")],["offensive",r.Ru.get("ad-formats.ad-feedback.dislike.offensive-content")],["do_not_like",r.Ru.get("ad-formats.ad-feedback.dislike.do-not-like")]]);return(0,y.jsx)(p.pZ,{value:"dislike-ad",children:(0,y.jsx)(m.W,{children:Array.from(t).map((([t,s])=>(0,y.jsx)(p.pZ,{value:s,children:(0,y.jsx)(x.D,{role:"menuitem","aria-label":s,onClick:()=>e(t,s),children:s})},t)))})})})),h=({item:e,isDisabled:t})=>{const s=(0,i.wA)(),{logAdFeedback:v}=(0,o.L)(e),m=(0,i.d4)((t=>(0,l.N2)(t,e.id)));return(0,y.jsx)(u.b,{menu:(0,y.jsx)(g,{onFeedbackReasonSelect:(t,i)=>{e.id&&(s((0,c.NI)({adId:e.id,reason:i})),v(`dislike_${t}`))}}),children:(0,y.jsx)(d.n,{item:e,icon:n.P,activeIcon:a.X,label:r.Ru.get("ad-formats.ad-feedback.dislike"),isActive:m,"data-testid":"button-dislike-ad",onClick:()=>{if(e.id){if(m)return s((0,c.vA)({adId:e.id})),void v("cancel_dislike");s((0,c.NI)({adId:e.id})),v("dislike_menu")}},disabled:t})})}},88482:(e,t,s)=>{s.d(t,{T:()=>h});var i=s(95440),n=s(98449),a=s(5835),r=s(64721),d=s(97688),o=s(40351),c=s(55705),l=s(5176),u=s(44979),v=s(30758),m=s(99903),x=s(12433),p=s(95309),y=s(86070);const g=(0,v.memo)((function({onFeedbackReasonSelect:e}){const t=new Map([["relevant",r.Ru.get("ad-formats.ad-feedback.like.relevant")],["interested_in_brand",r.Ru.get("ad-formats.ad-feedback.like.interested-in-brand")],["interested_in_product",r.Ru.get("ad-formats.ad-feedback.like.interested-in-product")],["enjoyable",r.Ru.get("ad-formats.ad-feedback.like.enjoyable-content")],["discovered_new",r.Ru.get("ad-formats.ad-feedback.like.discovered-new")]]);return(0,y.jsx)(p.pZ,{value:"like-ad",children:(0,y.jsx)(m.W,{children:Array.from(t).map((([t,s])=>(0,y.jsx)(p.pZ,{value:s,children:(0,y.jsx)(x.D,{role:"menuitem","aria-label":s,onClick:()=>e(t,s),children:s})},t)))})})})),h=({item:e,isDisabled:t})=>{const s=(0,i.wA)(),{logAdFeedback:v}=(0,o.L)(e),m=(0,i.d4)((t=>(0,l.Tt)(t,e.id)));return(0,y.jsx)(u.b,{menu:(0,y.jsx)(g,{onFeedbackReasonSelect:(t,i)=>{e.id&&(s((0,c.F$)({adId:e.id,reason:i})),v(`like_${t}`))}}),children:(0,y.jsx)(d.n,{item:e,icon:n.G,activeIcon:a.q,label:r.Ru.get("ad-formats.ad-feedback.like"),isActive:m,"data-testid":"button-like-ad",onClick:()=>{if(e.id){if(m)return s((0,c.D$)({adId:e.id})),void v("cancel_like");s((0,c.F$)({adId:e.id})),v("like_menu")}},disabled:t})})}},40352:(e,t,s)=>{s.r(t),s.d(t,{ContextAdSubtitle:()=>c,default:()=>l});var i=s(95440),n=s(68890),a=s(19369),r=s(1759),d=s(72630),o=s(86070);const c=({item:e,variant:t="bodyMedium",semanticColor:s="textSubdued",surface:c})=>{const{subtitle:l,url:u}=(0,a.iz)(e),v=(0,i.wA)();return(0,o.jsx)(n.I,{testid:"context-item-info-ad-subtitle",title:l,variant:t,semanticColor:s,uri:e.uri,clickUrl:u,onClick:()=>{v((0,d.q5)(r.c.ADVERTISER_SUBTITLE,r.V[c]))}})},l=c},42746:(e,t,s)=>{s.r(t),s.d(t,{ContextAdTitle:()=>c,default:()=>l});var i=s(95440),n=s(68890),a=s(19369),r=s(1759),d=s(72630),o=s(86070);const c=({item:e,surface:t,variant:s="titleSmall",semanticColor:c="textBase"})=>{const l=(0,i.wA)(),{title:u,url:v}=(0,a.iz)(e);return u?(0,o.jsx)(n.I,{title:u,variant:s,semanticColor:c,uri:e.uri,clickUrl:v,onClick:()=>{l((0,d.q5)(r.c.ADVERTISER_TITLE,r.V[t]))}}):null},l=c},40351:(e,t,s)=>{s.d(t,{L:()=>r});var i=s(47359),n=s(56989),a=s(84576);const r=e=>{const t=(0,n.dY)(),s=(0,a.vh)(),r=t.getInStreamAd();return{logAdFeedback:function(t){s.send((0,i.F)({ad_id:e.id,advertiser:e.advertiser,creative_id:r?.adId===e.id?r?.metadata?.creative_id:void 0,format:e.mediaType,line_item_id:r?.adId===e.id?r?.metadata?.lineitem_id:void 0,event:t}))}}}},16383:(e,t,s)=>{function i(e){return"survey"===e?.metadata?.["ad.companion.type"]}s.d(t,{o:()=>i})},5176:(e,t,s)=>{s.d(t,{N2:()=>r,Tt:()=>a});var i=s(42551);const n=e=>e.ads.adFeedback,a=(0,i.Mz)([e=>n(e),(e,t)=>t],((e,t)=>!(!t||e.adId!==t)&&e.liked)),r=(0,i.Mz)([e=>n(e),(e,t)=>t],((e,t)=>!(!t||e.adId!==t)&&e.disliked));(0,i.Mz)([e=>n(e),(e,t)=>t],((e,t)=>t&&e.adId===t?e.feedback:null))}}]);
//# sourceMappingURL=7811.js.map