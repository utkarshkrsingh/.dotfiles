"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3885],{32218:(e,t,n)=>{n.d(t,{c:()=>ne});var i=n(30758),r=n(97500),s=n.n(r),a=n(20021),o=n(65583),l=n(91825),c=n(2339),u=n(95763),d=n(40748),m=n(96930),p=n(64721),T=n(58476),I=n(49740),N=n(44979),S=n(13377),g=n(95440),f=n(75627),v=n(99903),C=n(65848),E=n(36196),x=n(12433),U=n(34889),y=n(98255),k=n(48455),b=n(7927);var h=n(86070);const A=({commentUri:e,entityUri:t,divider:n})=>{const r=((e,t)=>{const n=(0,b.n)(),i=(0,U.jE)(),{mutate:r}=(0,y.n)({mutationFn:()=>n.deleteComment(e),onSettled:()=>{i.invalidateQueries({queryKey:k.K.byEntity(t)})}});return r})(e,t),s=(0,i.useCallback)((()=>{r()}),[r]);return(0,h.jsx)(x.D,{role:"menuitem",divider:n,onClick:s,leadingIcon:(0,h.jsx)(E.P,{semanticColor:"textSubdued",size:"small"}),children:p.Ru.get("contextmenu.delete")})};var _=n(27415),R=n(41861),O=n(2535),L=n(24902);const j=({author:e})=>{const{name:t,type:n}=e,i=(0,h.jsx)(R.b,{images:e.images,shape:n===L.c.USER?R.u.CIRCLE:R.u.ROUNDED_CORNERS,size:O.Qe.SIZE_32,iconSize:"small",type:n,title:t});return(0,h.jsx)(m.v,{id:"comment-menu-header",variant:"naked",title:t,media:i})};var D=n(97152),B=n(19412),M=n(95052),P=n(95309),w=n(90561);const W=i.memo((function({commentUri:e,entityUri:t,author:n}){const{user:i}=(0,g.d4)(M.Ht),{spec:r}=(0,w.o)(e),{uri:s,name:a,type:o}=n;if(!i?.uri)return null;const l=(0,f.B2u)(i.uri,s);return s?(0,h.jsx)(P.pZ,{value:"comment",children:(0,h.jsxs)(v.W,{children:[(0,h.jsx)(j,{author:n}),l?(0,h.jsx)(A,{commentUri:e,entityUri:t}):(0,h.jsxs)(h.Fragment,{children:[o===L.c.USER&&(0,h.jsx)(D.u,{property:B.NAP,renderNewExperience:()=>(0,h.jsx)(C.X,{uri:s,name:a??"",currentUserUri:i?.uri})}),(0,h.jsx)(_.P,{spec:r,uri:e})]})]})}):null}));var Y=n(1467),K=n(29760),G=n(55285);const J="m5OZXQj7TeGCKUuoKUQJ",z="fDtd4a5aWLa0rMQxCmn4",H="BcqJ5242UcnkbIJ3PabB",X="LWpR7exIYyWovDOCykgZ",Z="tNaMsTlRcClg0gNsIgSz",Q="U8WSYONc9O5jC7ci4mHs",F="NHPPWuOwx2n8BgTPBnXU",q="ixHYU0G9pFyR9yXX2PEs",V="E0bOD7hg_tyr9WBjrmHq",$="PRJpBjbhDySrUCuVu2Jh",ee=({reply:e,onClick:t})=>(0,h.jsxs)("div",{className:V,children:[(0,h.jsx)(R.b,{className:$,images:e.images,shape:R.u.ROUNDED_CORNERS,size:O.Qe.SIZE_20,iconSize:"small",type:L.c.SHOW,title:""}),(0,h.jsx)(d.H,{condensedAll:!0,size:"small",semanticColor:"textBase",onClick:t,children:(0,T.v)("1 reply")})]});var te=n(10871);const ne=({comment:e,entityUri:t,showSeparator:n,lineClamp:r,onClickNavigate:g,scrollIntoViewOnMount:f})=>{const v=(0,i.useRef)(null),C=(0,i.useRef)(null),E=(0,te.K)({ref:C}),{uri:x,id:U,author:y,creationDate:k,text:b,type:A}=e,{imagesReacted:_,replies:j}="comment"===A?e:{imagesReacted:void 0,replies:void 0},D=(0,i.useCallback)((()=>{g?.(U)}),[g,U]),B=g?D:void 0;(0,i.useEffect)((()=>{f&&v.current&&v.current.scrollIntoView({block:"start"})}),[f]);const M=(0,h.jsx)(R.b,{className:z,images:y.images,shape:y.type===L.c.USER?R.u.CIRCLE:R.u.ROUNDED_CORNERS,size:O.Qe.SIZE_32,iconSize:"small",type:y.type,title:y.name}),P=y.type===L.c.USER?(0,h.jsx)(K.B,{uri:y.uri}):(0,h.jsx)(Y.H,{uri:y.uri}),w=(0,h.jsxs)("span",{className:H,children:[y.type===L.c.SHOW?(0,h.jsx)(a.I,{size:"small",semanticColor:"textSubdued",className:X}):null,(0,h.jsx)(o.d,{lineClamp:1,as:"div",dir:"auto",className:H,children:(0,h.jsx)(S.h,{menu:P,children:(0,h.jsx)(G.N,{to:y.uri,children:y.name})})})]}),V=k.date&&Date.now()-new Date(k.date).getTime()<6e4,$=k.date&&(0,h.jsx)(l.j,{children:V?(0,T.v)("Just now"):p.Ru.formatRelativeDate(new Date(k.date),{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"},new Date,1/0)}),ie=(0,h.jsxs)("div",{className:Z,children:[_&&_.length>0&&(0,h.jsxs)("div",{className:Q,children:[(0,h.jsx)(R.b,{images:_,shape:R.u.ROUNDED_CORNERS,size:O.Qe.SIZE_16,iconSize:"small",type:L.c.SHOW,title:""}),(0,h.jsx)(c.F,{className:F,size:"xsmall",semanticColor:"textBrightAccent"})]}),(0,h.jsx)(N.b,{menu:(0,h.jsx)(W,{commentUri:x,entityUri:t,author:y}),children:(0,h.jsx)(I.e,{size:"small",condensedAll:!0})})]}),re=j&&j.length>0?j[0]:null;let se=null;re&&(se="reply"===re.type?(0,h.jsx)(ne,{comment:re,entityUri:t}):(0,h.jsx)(ee,{reply:re,onClick:B}));const ae=(0,h.jsxs)("div",{className:J,children:[(0,h.jsx)(u.v,{ref:e=>{C.current=e?.querySelector("span")??null},semanticColor:"textBase",lineClamp:r,children:b}),E&&(0,h.jsx)(d.H,{semanticColor:"textBase",condensedAll:!0,size:"small",onClick:B,children:(0,T.v)("See more")}),se]});return(0,h.jsx)(m.v,{ref:v,className:s()({[q]:n}),id:`comment-${x}`,size:"md",media:M,title:w,subtitle:$,trailing:ie,layout:"wide",body:ae,paddingInlineStart:"0",paddingInlineEnd:"0",paddingBlockStart:"comment"===A?"16px":"8px",paddingBlockEnd:"comment"===A?"16px":"0",titleGap:"0",onClick:B,children:e.text})}},78284:(e,t,n)=>{n.d(t,{K:()=>a});var i=n(6128),r=n(94811),s=n(86070);const a=({eligibility:e})=>{const{message:t,isRestricted:n}=(0,r.K)(e);return n?(0,s.jsx)(i.E,{variant:"bodySmall",semanticColor:"textSubdued",children:t}):null}},70451:(e,t,n)=>{n.d(t,{o:()=>s});var i=n(70162),r=n(25214);function s(){return(0,r.N)(i.g)}},58476:(e,t,n)=>{function i(e){return e}n.d(t,{v:()=>i})},48455:(e,t,n)=>{n.d(t,{K:()=>i});const i={all:["user-comments"],byEntity:e=>[...i.all,e],topComments:e=>[...i.byEntity(e),"top"],allComments:e=>[...i.byEntity(e),"all"]}},7927:(e,t,n)=>{n.d(t,{n:()=>s});var i=n(61350),r=n(25214);const s=()=>(0,r.N)(i.v)},94811:(e,t,n)=>{n.d(t,{K:()=>s});var i=n(58476);let r=function(e){return e.ELIGIBILITY_STATUS_UNSPECIFIED="ELIGIBILITY_STATUS_UNSPECIFIED",e.ELIGIBILITY_STATUS_UNRESTRICTED="ELIGIBILITY_STATUS_UNRESTRICTED",e.ELIGIBILITY_STATUS_HIDDEN="ELIGIBILITY_STATUS_HIDDEN",e.ELIGIBILITY_STATUS_DISABLED="ELIGIBILITY_STATUS_DISABLED",e.ELIGIBILITY_STATUS_NEW_USER_ACCOUNT="ELIGIBILITY_STATUS_NEW_USER_ACCOUNT",e.ELIGIBILITY_STATUS_ALREADY_COMMENTED="ELIGIBILITY_STATUS_ALREADY_COMMENTED",e}({});const s=e=>{let t=null,n=!1;switch(e){case r.ELIGIBILITY_STATUS_DISABLED:t=(0,i.v)("The host has turned off comments for this episode.");break;case r.ELIGIBILITY_STATUS_NEW_USER_ACCOUNT:t=(0,i.v)("You can start commenting once your account is 2 days old.");break;case r.ELIGIBILITY_STATUS_ALREADY_COMMENTED:t=(0,i.v)("Youâ€™ve already commented on this episode.");break;case r.ELIGIBILITY_STATUS_HIDDEN:n=!0}return{message:t,isRestricted:null!==t,isHidden:n}}},17488:(e,t,n)=>{n.d(t,{L:()=>o});var i=n(30758),r=n(88417),s=n(84014),a=n(60001);function o({episodeUri:e,start:t,stop:n}){const{togglePlay:o,triggerPlay:l,isPlaying:c,isActive:u}=(0,r.P)({uri:e},{featureIdentifier:"episode"}),d=(0,s.o)((e=>(0,a.s)(e)??0)),m=u&&function(e,t,n){return n>=e&&n<t}(t,n,d),p=c&&m;return{onClick:(0,i.useCallback)((e=>{m?o({seekTo:t,loggingParams:e}):l({seekTo:t,loggingParams:e})}),[m,t,o,l]),isPlaying:p,isActive:m}}},99010:(e,t,n)=>{n.d(t,{Q:()=>T});var i=n(21364),r=n(22795),s=n.n(r);let a=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.PLAINTEXT_CONTENT=1]="PLAINTEXT_CONTENT",e[e.MUSIC_TRACK=2]="MUSIC_TRACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e}({});function o(e){switch(e){case 0:case"UNKNOWN":return a.UNKNOWN;case 1:case"PLAINTEXT_CONTENT":return a.PLAINTEXT_CONTENT;case 2:case"MUSIC_TRACK":return a.MUSIC_TRACK;default:return a.UNRECOGNIZED}}const l={encode(e,t=s().Writer.create()){""!==e.version&&t.uint32(10).string(e.version),""!==e.episodeUri&&t.uint32(18).string(e.episodeUri),""!==e.publishedAt&&t.uint32(26).string(e.publishedAt);for(const n of e.sections)c.encode(n,t.uint32(34).fork()).ldelim();return""!==e.language&&t.uint32(42).string(e.language),!0===e.curated&&t.uint32(48).bool(e.curated),t},decode(e,t){const n=e instanceof s().Reader?e:new(s().Reader)(e);let i=void 0===t?n.len:n.pos+t;const r={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.version=n.string();break;case 2:r.episodeUri=n.string();break;case 3:r.publishedAt=n.string();break;case 4:r.sections.push(c.decode(n,n.uint32()));break;case 5:r.language=n.string();break;case 6:r.curated=n.bool();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({version:m(e.version)?String(e.version):"",episodeUri:m(e.episodeUri)?String(e.episodeUri):"",publishedAt:m(e.publishedAt)?String(e.publishedAt):"",sections:Array.isArray(e?.sections)?e.sections.map((e=>c.fromJSON(e))):[],language:m(e.language)?String(e.language):"",curated:!!m(e.curated)&&Boolean(e.curated)}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),void 0!==e.episodeUri&&(t.episodeUri=e.episodeUri),void 0!==e.publishedAt&&(t.publishedAt=e.publishedAt),e.sections?t.sections=e.sections.map((e=>e?c.toJSON(e):void 0)):t.sections=[],void 0!==e.language&&(t.language=e.language),void 0!==e.curated&&(t.curated=e.curated),t},fromPartial(e){const t={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};return t.version=e.version??"",t.episodeUri=e.episodeUri??"",t.publishedAt=e.publishedAt??"",t.sections=e.sections?.map((e=>c.fromPartial(e)))||[],t.language=e.language??"",t.curated=e.curated??!1,t}};const c={encode:(e,t=s().Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),0!==e.startMs&&t.uint32(16).int32(e.startMs),void 0!==e.plaintextContent&&u.encode(e.plaintextContent,t.uint32(26).fork()).ldelim(),void 0!==e.musicTrack&&d.encode(e.musicTrack,t.uint32(50).fork()).ldelim(),""!==e.title&&t.uint32(34).string(e.title),void 0!==e.fallback&&u.encode(e.fallback,t.uint32(42).fork()).ldelim(),t),decode(e,t){const n=e instanceof s().Reader?e:new(s().Reader)(e);let i=void 0===t?n.len:n.pos+t;const r={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.type=n.int32();break;case 2:r.startMs=n.int32();break;case 3:r.plaintextContent=u.decode(n,n.uint32());break;case 6:r.musicTrack=d.decode(n,n.uint32());break;case 4:r.title=n.string();break;case 5:r.fallback=u.decode(n,n.uint32());break;default:n.skipType(7&e)}}return r},fromJSON:e=>({type:m(e.type)?o(e.type):0,startMs:m(e.startMs)?Number(e.startMs):0,plaintextContent:m(e.plaintextContent)?u.fromJSON(e.plaintextContent):void 0,musicTrack:m(e.musicTrack)?d.fromJSON(e.musicTrack):void 0,title:m(e.title)?String(e.title):"",fallback:m(e.fallback)?u.fromJSON(e.fallback):void 0}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case a.UNKNOWN:return"UNKNOWN";case a.PLAINTEXT_CONTENT:return"PLAINTEXT_CONTENT";case a.MUSIC_TRACK:return"MUSIC_TRACK";default:return"UNKNOWN"}}(e.type)),void 0!==e.startMs&&(t.startMs=Math.round(e.startMs)),void 0!==e.plaintextContent&&(t.plaintextContent=e.plaintextContent?u.toJSON(e.plaintextContent):void 0),void 0!==e.musicTrack&&(t.musicTrack=e.musicTrack?d.toJSON(e.musicTrack):void 0),void 0!==e.title&&(t.title=e.title),void 0!==e.fallback&&(t.fallback=e.fallback?u.toJSON(e.fallback):void 0),t},fromPartial(e){const t={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};return t.type=e.type??0,t.startMs=e.startMs??0,t.plaintextContent=void 0!==e.plaintextContent&&null!==e.plaintextContent?u.fromPartial(e.plaintextContent):void 0,t.musicTrack=void 0!==e.musicTrack&&null!==e.musicTrack?d.fromPartial(e.musicTrack):void 0,t.title=e.title??"",t.fallback=void 0!==e.fallback&&null!==e.fallback?u.fromPartial(e.fallback):void 0,t}};const u={encode(e,t=s().Writer.create()){for(const n of e.plaintext)t.uint32(10).string(n);return t},decode(e,t){const n=e instanceof s().Reader?e:new(s().Reader)(e);let i=void 0===t?n.len:n.pos+t;const r={plaintext:[]};for(;n.pos<i;){const e=n.uint32();if(e>>>3==1)r.plaintext.push(n.string());else n.skipType(7&e)}return r},fromJSON:e=>({plaintext:Array.isArray(e?.plaintext)?e.plaintext.map((e=>String(e))):[]}),toJSON(e){const t={};return e.plaintext?t.plaintext=e.plaintext.map((e=>e)):t.plaintext=[],t},fromPartial(e){const t={plaintext:[]};return t.plaintext=e.plaintext?.map((e=>e))||[],t}};const d={encode:(e,t=s().Writer.create())=>(""!==e.uri&&t.uint32(10).string(e.uri),t),decode(e,t){const n=e instanceof s().Reader?e:new(s().Reader)(e);let i=void 0===t?n.len:n.pos+t;const r={uri:""};for(;n.pos<i;){const e=n.uint32();if(e>>>3==1)r.uri=n.string();else n.skipType(7&e)}return r},fromJSON:e=>({uri:m(e.uri)?String(e.uri):""}),toJSON(e){const t={};return void 0!==e.uri&&(t.uri=e.uri),t},fromPartial(e){const t={uri:""};return t.uri=e.uri??"",t}};function m(e){return null!=e}function p(e){return e.type===a.MUSIC_TRACK?{type:"track",startMs:e.startMs,content:e.fallback?.plaintext||[],trackUri:e.musicTrack?.uri}:{type:"text",startMs:e.startMs,content:e.plaintextContent?.plaintext||[]}}async function T(e){try{const t=await fetch(e,{});if(t.ok&&t.body){const e=await t.arrayBuffer(),n=l.decode(new Uint8Array(e));return n.sections.map(p)}return null}catch(e){return null}}s().util.Long!==i.A&&(s().util.Long=i.A,s().configure())}}]);
//# sourceMappingURL=3885.js.map