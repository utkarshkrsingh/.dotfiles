"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7988],{78511:(e,t,i)=>{i.d(t,{D:()=>u});var n=i(97500),r=i.n(n),s=i(43494);const o="Psc33HXPyazZYAAr1tgz",a="VGJz_GOARJ6j02JICvW6",l="VpNHGG5ZhoxQ8AqW709S",c="P7395UzhjxLUlLZvj5fb";var d=i(86070);const u=function(e){const{children:t,active:i=!1,focus:n=!0,label:u,onClick:v,noBackground:m=!1}=e;return(0,d.jsx)(s.Zp,{label:u,children:(0,d.jsx)("button",{className:r()(o,{[c]:i,[a]:m,[l]:n}),onClick:v,"aria-label":u,children:t})})}},45525:(e,t,i)=>{i.d(t,{C:()=>E});var n=i(30758),r=i(60942),s=i(64721),o=i(78511),a=i(44979),l=i(63166),c=i(99903),d=i(1127),u=i(12433),v=i(19412),m=i(95309),f=i(86070);const p=({languages:e=[],activeLanguage:t,onSelectLanguage:i,onClose:n})=>{const r=(0,l.NC)(v.bFi);return(0,f.jsx)(m.pZ,{value:"subtitles",children:(0,f.jsxs)(c.W,{onClose:n,getInitialFocusElement:e=>e?.querySelector('[aria-checked="true"]'),children:[(0,f.jsx)(d.y,{divider:"after",children:s.Ru.get("subtitles-picker.heading")}),(0,f.jsx)(u.D,{onClick:()=>{i(null)},"aria-checked":!t,role:"menuitemradio",children:s.Ru.get("subtitles-picker.option_off")}),e.map((e=>(0,f.jsxs)(u.D,{onClick:()=>{i(e)},role:"menuitemradio","aria-checked":"string"==typeof t&&e.toLowerCase()===t.toLowerCase(),children:[g(e)," ",r?`(${s.Ru.get("subtitles-picker.autogenerated")})`:null]},e)))]})})};function g(e){const[t]=e.toLowerCase().split("-");let i="";switch(t){case"zh":i=s.Ru.get("subtitles-picker.option_zh");break;case"cs":i=s.Ru.get("subtitles-picker.option_cs");break;case"nl":i=s.Ru.get("subtitles-picker.option_nl");break;case"en":i=s.Ru.get("subtitles-picker.option_en");break;case"fi":i=s.Ru.get("subtitles-picker.option_fi");break;case"fr":i=s.Ru.get("subtitles-picker.option_fr");break;case"de":i=s.Ru.get("subtitles-picker.option_de");break;case"el":i=s.Ru.get("subtitles-picker.option_el");break;case"hu":i=s.Ru.get("subtitles-picker.option_hu");break;case"id":i=s.Ru.get("subtitles-picker.option_id");break;case"it":i=s.Ru.get("subtitles-picker.option_it");break;case"ja":i=s.Ru.get("subtitles-picker.option_ja");break;case"ms":i=s.Ru.get("subtitles-picker.option_ms");break;case"pl":i=s.Ru.get("subtitles-picker.option_pl");break;case"pt":i=s.Ru.get("subtitles-picker.option_pt");break;case"es":i=s.Ru.get("subtitles-picker.option_es");break;case"sv":i=s.Ru.get("subtitles-picker.option_sv");break;case"tr":i=s.Ru.get("subtitles-picker.option_tr");break;case"vi":i=s.Ru.get("subtitles-picker.option_vi");break;default:i=e}return e.endsWith("-x-cc")&&(i+=" [CC]"),i}const h=e=>(0,f.jsx)(n.Suspense,{fallback:null,children:(0,f.jsx)(p,{...e})});var b=i(99965),y=i(60472),C=i(74843),x=i(39111),k=i(21111),P=i(1620);const j=x.S.SUBTITLE_LANGUAGES_CHANGED;const E=n.memo((function({renderInline:e=!1,noBackground:t,iconSize:i="small"}){const{isSupported:l,availableLanguages:c,preferredLanguage:d,setPreferredLanguage:u}=function(){const e=(0,C.$)(),t=e.getCapabilities(),{videoPlayerMode:i}=(0,y.d)(),{uri:r}=(0,k.f)(),{spec:s,logger:o}=(0,P.r)(b.E,{data:{uri:r??"",identifier:i}}),[a,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(null);return(0,n.useEffect)((()=>((async()=>{l(await e.getSubtitleLanguages())})(),e.getEvents().addListener(j,(({data:e})=>{l(e)})))),[e,l]),(0,n.useEffect)((()=>{(async()=>{d(await e.getPreferredSubtitleLanguage())})()}),[e,d]),{isSupported:t.hasSubtitleSupport,availableLanguages:a,preferredLanguage:c,setPreferredLanguage:async t=>{e.setPreferredSubtitleLanguage(t),d(t),t?o.logInteraction(s.subtitlesButtonFactory().hitUiReveal()):o.logInteraction(s.subtitlesButtonFactory().hitUiHide())}}}();return l&&0!==c.length?(0,f.jsx)(a.b,{renderInline:e,menu:(0,f.jsx)(h,{onSelectLanguage:u,languages:c,activeLanguage:d}),children:(0,f.jsx)(o.D,{noBackground:t,active:null!==d,label:s.Ru.get("subtitles-picker.heading"),children:(0,f.jsx)(r.j,{size:i})})}):null}))},44408:(e,t,i)=>{i.d(t,{VideoPlayer:()=>ft});var n=i(30758),r=i(95440),s=i(1978),o=i(6128),a=i(41089),l=i(63166),c=i(64721);var d=i(97500),u=i.n(d),v=i(61214),m=i(91989);const f="L30NtFiBvBcyDh05qn_u";var p=i(86070);const g=({onMinimizeButtonClick:e})=>(0,p.jsx)("div",{className:u()(f),children:(0,p.jsx)(v.$,{"aria-label":c.Ru.get("ad-formats.dismissAd"),colorSet:"overMedia",iconOnly:m.b,onClick:e,size:"small"})});var h=i(17674),b=i(19412);const y="aR68x7OIyGWzTgdtxZ6f",C="anoG0BFHzWPx97SA0qBF",x="CjNrWN36pkl9Lp6zxCxZ",k="Rn_VjXFoM0opnpQWlSw6",P="syutothNTJp78DxfFA5B",j="WAhXnEZZBOdLN1GhjuFs",E=({advertiser:e,isMinimized:t,onMinimizeButtonClick:i,onVideoTakeoverClick:n,refCallback:r,href:s,isVerticalVideo:o=!1})=>{const a=(0,l.NC)(b.okt,{loadingValue:!1})?".VTO__modal-slot":".Root__modal-slot",d=u()(y,{[C]:o});return(0,p.jsx)(h.A,{className:x,animation:{overlay:{base:k,beforeClose:j,afterOpen:P},closeTimeoutMs:300},isOpen:!t,parentSelector:()=>document.querySelector(a),shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,contentLabel:c.Ru.get("ad-formats.advertisement"),children:(0,p.jsxs)("div",{className:d,children:[(0,p.jsx)("a",{"aria-label":c.Ru.get("ad-formats.video-ad-overlay.cta-button",{advertiser:e}),className:d,"data-testid":"new-ads-npv-video-takeover-link",href:s,onClick:n,ref:r,target:"_blank"}),(0,p.jsx)(g,{onMinimizeButtonClick:i})]})})};var L=i(99594),R=i(1044),w=i(62130),N=i(18359),V=i(84014),I=i(45640);const M="fFoN1cMJLIJo0k_vgNyw",_="Lk23rM5uSl5mgEXroOPH",A="yJ2Sz652eyijqIrRrwpJ",B="ZPVxrOnQOQc_5KDCNgcI",O="f14LfcDx_wvogzdXzoq9",z="QMMTQfEw3AIHFf4dTRp3",D="Hj1B5D7WgG4aZkU8meAp",S="nPKDEvIoCzySBR24pZiN",F="dqP_KBPyAygbxKtY3k3w",K=({setVideoContainer:e})=>{const t=(0,r.wA)(),i=(0,V.o)((e=>e?.item??void 0),((e,t)=>e?.uri===t?.uri)),d=(0,I.N)(i)?i.url??void 0:void 0,u=((0,I.N)(i)?i.advertiser:void 0)||"Advertiser",v=(0,r.d4)((e=>e?.ads?.vto?.isMinimized)),m=(0,I.N)(i)&&"portrait"===i.videoOrientation,f=(0,n.useRef)(),g=(0,s.zy)(),y=(0,R.w)(i),C=(0,l.NC)(b.GEz);(0,n.useEffect)((()=>{f.current?t((0,L.iB)()):f.current=!0}),[t,g.pathname]);const[x,k]=(0,n.useState)(null);return(0,n.useEffect)((()=>{t((0,L.MW)())}),[t]),(0,n.useEffect)((()=>{null!==x&&e(x)}),[e,v,x]),y&&C?(0,p.jsx)(E,{advertiser:u,href:d?(0,w.H)(d):void 0,isMinimized:v,isVerticalVideo:m,onVideoTakeoverClick:()=>{t((0,L.i2)(N.ee.CLICKED,N.Wh.VIDEO_TAKEOVER,N.Lv.VIDEO_PLAYER))},onMinimizeButtonClick:()=>{t((0,L.Oc)()),t((0,L.i2)(N.ee.COLLAPSED,N.Wh.MINIMIZE_BUTTON,N.Lv.VIDEO_PLAYER))},refCallback:e=>k(e)}):(0,p.jsx)(h.A,{className:D,animation:{overlay:{base:z,beforeClose:F,afterOpen:S},closeTimeoutMs:300},isOpen:!v,parentSelector:()=>document.querySelector(".Root__modal-slot"),shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,contentLabel:c.Ru.get("ad-formats.advertisement"),children:(0,p.jsxs)("div",{className:M,children:[(0,p.jsxs)("div",{className:A,children:[(0,p.jsx)(o.E,{semanticColor:"textBase",variant:"bodySmallBold",className:B,children:c.Ru.get("ad-formats.advertisement")}),(0,p.jsx)("button",{"aria-label":c.Ru.get("ad-formats.dismissAd"),className:O,onClick:()=>{t((0,L.Oc)()),t((0,L.i2)(N.ee.COLLAPSED,N.Wh.MINIMIZE_BUTTON,N.Lv.VIDEO_PLAYER))},children:(0,p.jsx)(a.M,{semanticColor:"textBase",size:"small"})})]}),(0,p.jsx)("a",{"data-testid":"video-takeover-link",href:d?(0,w.H)(d):void 0,onClick:()=>{t((0,L.i2)(N.ee.CLICKED,N.Wh.VIDEO_TAKEOVER,N.Lv.VIDEO_PLAYER))},ref:e=>k(e),className:_})]})})},T=({setVideoContainer:e})=>(0,r.d4)((e=>e?.ads?.vto?.isHidden))?null:(0,p.jsx)(K,{setVideoContainer:e});var U=i(16249),W=i(8143),H=i(40638);function Z(){const[e,t]=(0,n.useState)(!1),i=(0,n.useRef)(null),r=(0,H.YQ)((()=>{i.current&&clearTimeout(i.current),i.current=setTimeout((()=>{t(!1)}),1500),t(!0)}),100,{maxWait:100,leading:!0}),s=(0,n.useCallback)((e=>{t(e),r.cancel()}),[r]);return(0,n.useEffect)((()=>()=>{i.current&&clearTimeout(i.current)}),[]),{isControlsVisible:e,setIsControlsVisible:s,handleKeepViewVisible:r}}var G=i(99062),q=i(2430),Y=i(87416),Q=i(28768),J=i(99965),X=i(66686),$=i(78511),ee=i(82185),te=i(8874),ie=i(36682),ne=i(96765),re=i(41569),se=i(58137),oe=i(60472),ae=i(37300),le=i(21111),ce=i(1620);const de="MBzbwWcyfbqSftBtnn3g",ue=({noBackground:e,iconSize:t="small"})=>{const{setVideoPlayerUIFlag:i,videoPlayerUIFlags:n,videoPlayerMode:r}=(0,oe.d)(),s=r===ae.K.cinemaLegacy,{uri:o}=(0,le.f)(),{hideLyrics:a}=(0,se.A)({referrer:"cinema-mode-toggle"}),d=(0,l.NC)(b.Au4),{spec:v,logger:m}=(0,ce.r)(J.E,{data:{uri:o??"",identifier:ae.K.cinemaLegacy}});if(!d||r===ae.K.fullscreen)return null;return(0,p.jsx)("div",{className:u()({[de]:s}),children:(0,p.jsx)($.D,{noBackground:e,active:s,label:s?c.Ru.get("video-player.default-view"):c.Ru.get("video-player.cinema-mode"),onClick:()=>{s?m.logInteraction(v.cinemaModeButtonFactory().hitUiHide()):m.logInteraction(v.cinemaModeButtonFactory().hitUiReveal()),a(),i(ae.n.cinemaLegacy,!n.cinemaLegacy)},children:s?(0,p.jsx)(ne.Q,{size:t}):(0,p.jsx)(re.C,{size:t})})})};var ve=i(8982),me=i(97038),fe=i(66531),pe=i(86502),ge=i(2799),he=i(94624);function be(){const e=(0,r.wA)(),t=(0,pe.XB)();return{enterPipVideoMode:(0,n.useCallback)((()=>{e((0,he.R)(ae.K.pip))}),[e]),leavePipVideoMode:(0,n.useCallback)((()=>{t===ge.Z.NowPlayingView&&e((0,he.R)(ae.K.npv))}),[e,t])}}var ye=i(86128),Ce=i(754);const xe="fuONPgUcYO2bf15HunlX",ke=({noBackground:e,iconSize:t="small",uri:i})=>{const n=(0,r.d4)(me.c),s=n===ae.K.pip,{enterPipVideoMode:o,leavePipVideoMode:a}=be(),{item:l}=(0,ie.L)()??{},{isActive:d}=(0,fe.D)({item:l}),v=(0,V.o)(Ce.A3),{spec:m,logger:f}=(0,ce.r)(J.E,{data:{uri:i,identifier:n}}),g=(0,ve.u)({parentAbsoluteLocation:m.pipButtonContainerFactory().getAbsoluteLocation()});if(!v)return null;let h=c.Ru.get("video-player.default-view");return s||(h=d?c.Ru.get("miniplayer.close"):c.Ru.get("miniplayer.open-in")),(0,p.jsx)("div",{className:u()({[xe]:s}),children:(0,p.jsx)($.D,{noBackground:e,active:s,label:h,onClick:()=>{(0,ye.ge)()&&(0,ye.SP)(),s?(a(),f.logInteraction(g.pipButtonFactory({uri:i}).hitUiHide())):(o(),g.pipButtonFactory({uri:i}).hitUiReveal())},children:(0,p.jsx)(G.F,{size:t})})})};var Pe=i(45525),je=i(74843),Ee=i(43895),Le=i(32751),Re=i(45231);const we="aHe1QDDI5hmYWAKf4MoR",Ne="DtWKCk0YYDlZT11U1niL",Ve="RTSxo7zS2ozOeg4gnC2c",Ie="ZcIaDrsIojjWZ_Xf_6iN",Me="pLL2Ok4QckLG8GAWriCB",_e=[{transform:"scale(1)",opacity:0},{transform:"scale(1.3)",opacity:1},{transform:"scale(1.6)",opacity:0}],Ae=[{transform:"scale(1)",opacity:1},{transform:"scale(1)",opacity:1}],Be={duration:500,easing:"ease-out"},Oe=function({visible:e,className:t,darkOverlayOnHover:i=!1,animatePlayPauseButtonOnClick:s=!0}){const{videoPlayerMode:o}=(0,oe.d)(),a=(0,r.wA)(),d=(0,te.lZ)(),v=(0,je.$)(),m=(0,l.NC)(b.mzn),f=(0,n.useContext)(ee.s),g=o===ae.K.cinemaLegacy,h=(0,Ee.j)(),y=(0,r.d4)((e=>e.platform.isDesktop)),{item:C}=(0,ie.L)()??{},x=C?.uri??"",{isActive:k,onClick:P,showButton:j}=(0,fe.D)({item:C}),E=v.getCapabilities().hasPipSupport,L=(0,Le.z)(),R=(0,V.o)((e=>e),((e,t)=>(0,Re.a)(e?.restrictions,t?.restrictions)&&e?.item?.uri===t?.item?.uri&&e?.isPaused===t?.isPaused)),{isPaused:w,canResume:N,canPause:I}=(0,te.Nh)(R),{spec:M,logger:_,UBIFragment:A}=(0,ce.r)(J.E,{data:{uri:x,identifier:ae.K.npv}}),B=(0,n.useRef)(null),O=(0,n.useRef)(null),z=(0,n.useCallback)((()=>{let e=null;w&&N?(L.resume(),_.logInteraction(M.playButtonFactory().hitPlay({itemToBePlayed:x})),e=B):!w&&I&&(L.pause(),_.logInteraction(M.playButtonFactory().hitPause({itemToBePaused:x})),e=O),s&&e?.current?.animate&&e.current.animate(h?Ae:_e,Be)}),[I,N,w,_,L,M,x,s,h]),D=(0,n.useMemo)((()=>g?null:j?(0,p.jsx)($.D,{label:k?c.Ru.get("miniplayer.close"):c.Ru.get("miniplayer.open-in"),onClick:P,active:k,children:(0,p.jsx)(G.F,{size:"small"})}):y&&E?(0,p.jsx)(ke,{uri:x}):null),[k,g,y,E,P,j,x]);return(0,p.jsxs)(A,{spec:M,children:[!m&&(0,p.jsxs)("div",{className:u()(we,t,{[Me]:e}),children:[(0,p.jsx)(Pe.C,{renderInline:!0}),(0,p.jsx)(ue,{}),D,d&&(0,p.jsx)($.D,{label:c.Ru.get("npv.full-screen"),onClick:()=>{f?.current&&((0,ye.X8)(f.current),a((0,X.f)()))},children:(0,p.jsx)(q.L,{size:"small"})})]}),i&&(0,p.jsx)("div",{tabIndex:-1,className:u()(Ne,{[Me]:e})}),(0,p.jsxs)("div",{className:Ve,tabIndex:-1,onClick:z,onKeyDown:()=>{},"aria-label":w?c.Ru.get("play"):c.Ru.get("pause"),role:"button",children:[(0,p.jsx)("div",{className:Ie,ref:B,children:(0,p.jsx)(Y.x,{size:"xlarge",width:48})}),(0,p.jsx)("div",{className:Ie,ref:O,children:(0,p.jsx)(Q.B,{size:"xlarge",width:48})})]})]})};function ze(e,t){(0,n.useLayoutEffect)((()=>{t.current&&e(t.current)}),[t,e])}const De="kJKEEG391Pf_PLzwG2Vm",Se=({setVideoContainer:e})=>{const t=(0,n.useRef)(null);ze(e,t);const{isControlsVisible:i,handleKeepViewVisible:r}=Z(),s=document.getElementById("VideoPlayerCinema_ReactPortal");return null===s?null:(0,W.createPortal)((0,p.jsx)("div",{ref:t,hidden:!1,className:De,onMouseMove:r,onFocus:r,"data-testid":"video-player-cinema",children:(0,p.jsx)(Oe,{visible:i})}),s)};var Fe=i(40894),Ke=i(57639),Te=i(49872);const Ue="dg_LeRfnn0R3ivigmbze",We="wdZZT43qDlLzMbBxRH7T",He=({cinemaModeRef:e,setVideoContainer:t})=>{const i=(0,n.useRef)(null),{nowPlayingBarRef:r}=(0,Fe.JT)(),{videoPlayerUIFlags:s,setVideoPlayerUIFlag:o}=(0,Ke.d)();ze(t,i);const{isControlsVisible:a,handleKeepViewVisible:l}=Z();return(0,n.useEffect)((()=>{const e=e=>{"Escape"===e.key&&o(ae.n.cinemaLegacy,!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[o,s.cinemaLegacy]),e.current?r.current?(0,W.createPortal)((0,p.jsxs)("div",{ref:i,className:Ue,onMouseMove:l,onFocus:l,"data-testid":"video-player-cinema",children:[(0,p.jsx)(Te.s,{containerElements:[e.current,r.current],active:!0,focusTrapOptions:{allowOutsideClick:!0}}),(0,p.jsx)(Oe,{visible:a,className:We})]}),e.current):(console.error("No ref found for nowPlayingBar!"),null):(console.error("No container found for cinema video!"),null)};var Ze=i(16096);const Ge=({setVideoContainer:e})=>{const t=(0,n.useRef)(null);ze(e,t);const i=window.documentPictureInPicture?.window,r=i?.document.getElementById("document-pip-main-container"),s=(0,je.$)();return(0,n.useEffect)((()=>(i&&s.setWindow(i),()=>{s.setWindow(window)})),[i,s]),r?(0,W.createPortal)((0,p.jsx)("div",{ref:t,"data-testid":"video-player-document-pip",className:Ze.A.videoPlayerContainer}),r):(0,p.jsx)(p.Fragment,{})},qe=n.memo((function({setVideoContainer:e,fullscreenModeRef:t}){const i=(0,n.useRef)(null);return ze(e,i),t.current?(0,W.createPortal)((0,p.jsx)("div",{"data-testid":"video-player-fullscreen",className:u()("VideoFullscreenMode"),children:(0,p.jsx)("div",{className:"VideoFullscreenMode__video-container",ref:i})}),t.current):(console.error("No container found for fullscreen video!"),null)}));var Ye=i(65234);const Qe="_2r290M0vbnbQGfhLbvq",Je=({setVideoContainer:e})=>{const t=(0,n.useRef)(null),i=(0,Ye.v7)();ze(e,t);const r=(0,n.useRef)(!0);(0,n.useEffect)((()=>(r.current=!0,()=>{r.current=!1})));const s=document.getElementById("VideoPlayerNpb_ReactPortal");return null===s?null:(0,W.createPortal)((0,p.jsx)("div",{ref:t,hidden:!1,className:Qe,style:{position:"relative"},onMouseDown:e=>{t.current&&i.current&&(e.stopPropagation(),e.preventDefault())},"data-testid":"video-player-npb"}),s)};var Xe=i(1759),$e=i(72630);const et="H2mo30Z5kNiGZbZ9U2Nu",tt="TbZ7pNOfpFK2FmnFuQcW",it="BRt_JFU0qTnWIGCaWWJY",nt=({visible:e})=>{const t=(0,r.wA)(),i=u()(tt,{[it]:e});return(0,p.jsx)("div",{className:et,children:(0,p.jsx)("div",{className:i,children:(0,p.jsx)(v.$,{"aria-label":c.Ru.get("npv.full-screen"),colorSet:"overMedia",iconOnly:q.L,onClick:e=>{e.stopPropagation(),e.preventDefault(),t((0,L.MW)()),t((0,L.i2)(N.ee.EXPANDED))},size:"small"})})})},rt="Qhq7SHNg9UlhtkK9I6Km",st="ZWx9Xu8F_WoC4M_KEbtW",ot=({element:e,handleKeepViewVisible:t,isControlsVisible:i,item:n,scrollNodeRef:s,setIsControlsVisible:o,setVideoContainer:a,videoContainerRef:l})=>{ze(a,l);const c=(0,r.wA)(),d="portrait"===n.videoOrientation,v=n.url??void 0,m=u()(rt,{[st]:d});return(0,W.createPortal)((0,p.jsx)("div",{ref:l,hidden:!1,className:m,onMouseLeave:()=>{o(!1)},onMouseDown:e=>{l.current&&s.current&&(e.stopPropagation(),e.preventDefault())},onMouseMove:t,onFocus:t,"data-testid":"ads-video-player-npv",children:v?(0,p.jsx)("a",{style:{zIndex:2},href:v,onClick:()=>{c((0,$e.q5)(Xe.c.VIDEO_PLAYER,Xe.V.AD_NPV))},"data-testid":"video-player-ad-wrapper",children:(0,p.jsx)(nt,{visible:i})}):(0,p.jsx)(nt,{visible:i})}),e)},at="ouiL5cH1WduxtprQ0Iig",lt=({setVideoContainer:e})=>{const t=(0,n.useRef)(null),i=(0,Ye.v7)(),r=(0,V.o)((e=>e?.item??void 0),((e,t)=>e?.uri===t?.uri));ze(e,t);const s=(0,n.useRef)(!0);(0,n.useEffect)((()=>(s.current=!0,()=>{s.current=!1})));const{isControlsVisible:o,setIsControlsVisible:a,handleKeepViewVisible:l}=Z(),c=document.getElementById("VideoPlayerNpv_ReactPortal");return null===c?null:(0,I.N)(r)?(0,p.jsx)(ot,{element:c,handleKeepViewVisible:l,isControlsVisible:o,item:r,scrollNodeRef:i,setIsControlsVisible:a,setVideoContainer:e,videoContainerRef:t}):(0,W.createPortal)((0,p.jsx)("div",{ref:t,hidden:!1,className:at,style:{position:"relative"},onMouseLeave:()=>{a(!1)},onMouseDown:e=>{t.current&&i.current&&(e.stopPropagation(),e.preventDefault())},onMouseMove:l,onFocus:l,"data-testid":"video-player-npv",children:(0,p.jsx)(Oe,{visible:o,darkOverlayOnHover:!0})}),c)};const ct=e=>{const t=(()=>{const[e]=(0,n.useState)((()=>{const e=document.createElement("div");return e.classList.add("VideoPlayer__container"),e}));return e})();if((0,n.useLayoutEffect)((()=>{null!==e&&null!==t&&e.insertBefore(t,e.firstChild)}),[e,t]),t&&t.firstChild instanceof HTMLVideoElement){const e=t.firstChild;return`${e.videoWidth}/${e.videoHeight}`}return"16/9"};var dt=i(38254),ut=i(64407);const vt=i(39111).S.PICTURE_IN_PICTURE_CHANGED;const mt=({setVideoContainer:e,videoContainerRef:t})=>(ze(e,t),(0,p.jsx)("div",{ref:t,style:{display:"none"}})),ft=({cinemaModeRef:e,fullscreenModeRef:t})=>{const{videoPlayerMode:i}=(0,Ke.d)(),s=(0,n.useRef)(null),[o,a]=(0,n.useState)(null),l=(0,r.d4)((e=>e.platform.isDesktop)),{isPlayingVideoAd:c}=(0,V.o)((e=>{const t=e?.item??void 0;return{isPlayingVideoAd:(0,Ce.A3)(e)&&(0,I.N)(t)}})),d=(0,r.d4)((e=>e?.ads?.vto?.isMinimized));if(ct(o),(()=>{const{isPlayingVideo:e,contextUri:t}=(0,V.o)((e=>({isPlayingVideo:(0,Ce.A3)(e),contextUri:e?.context.uri}))),{setVideoPlayerUIFlag:i}=(0,oe.d)(),r=(0,dt.v)((({connectionStatus:e})=>e===ut.zP.CONNECTED||e===ut.zP.CONNECTING));(0,n.useEffect)((()=>{const t=e&&!r;i(ae.n.videoAvailable,t)}),[e,r,i,t])})(),(()=>{const e=(0,V.o)(Ce.A3),{setVideoPlayerUIFlag:t}=(0,oe.d)();(0,n.useEffect)((()=>{const e=()=>{t(ae.n.fullscreen,(0,ye.ge)())};return window.addEventListener("fullscreenchange",e),document.addEventListener("fullscreenchange",e),window.addEventListener("fullscreenChange",e),document.addEventListener("fullscreenChange",e),window.addEventListener("webkitfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),window.addEventListener("mozfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),()=>{window.removeEventListener("fullscreenchange",e),document.removeEventListener("fullscreenchange",e),window.removeEventListener("fullscreenChange",e),document.removeEventListener("fullscreenChange",e),window.removeEventListener("mozfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),window.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e)}}),[e,t])})(),(()=>{const e=(0,je.$)(),{videoPlayerMode:t}=(0,Ke.d)(),{leavePipVideoMode:i}=be(),r=t===ae.K.pip;(0,n.useEffect)((()=>e.getEvents().addListener(vt,(({data:e})=>{!e&&r&&i()}))),[e,r,i]),(0,n.useEffect)((()=>{const t=document.pictureInPictureElement;r&&!t&&e.setPip?.(!0),!r&&t&&e.setPip?.(!1)}),[e,r])})(),function(){const e=(0,je.$)(),{videoPlayerMode:t}=(0,oe.d)(),[i,r]=(0,n.useState)(!document.hidden),[s,o]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e="visibilitychange",t=()=>{r(!document.hidden)};return document.addEventListener(e,t),()=>{document.removeEventListener(e,t)}}),[e,r]),(0,n.useEffect)((()=>{const n=!(t===ae.K.pip||t===ae.K.documentPip||t!==ae.K.none&&i),r=e.getCapabilities().hasMinimizeBitrateSupport&&n;s!==r&&(e.setMinimizeBitrate(r),o(r))}),[e,t,i,s,o])}(),(()=>{const e=(0,r.wA)(),t=(0,n.useRef)(),{isPlayingVideoAd:i,playbackId:s}=(0,V.o)((e=>{const t=e?.item??void 0;return{isPlayingVideoAd:(0,Ce.A3)(e)&&(0,I.N)(t),playbackId:e?.playbackId}}));(0,n.useEffect)((()=>{i&&t.current!==s&&(e((0,L.MW)()),t.current=s)}),[s,i,e])})(),l&&c&&i!==ae.K.pip&&!d)return(0,p.jsx)(T,{setVideoContainer:a});switch(i){case ae.K.fullscreen:return(0,p.jsx)(U.s,{children:(0,p.jsx)("div",{ref:s,children:(0,p.jsx)(qe,{fullscreenModeRef:t,setVideoContainer:a})})});case ae.K.cinema:return(0,p.jsx)(U.s,{children:(0,p.jsx)("div",{ref:s,children:(0,p.jsx)(Se,{setVideoContainer:a})})});case ae.K.cinemaLegacy:return(0,p.jsx)(U.s,{children:(0,p.jsx)("div",{ref:s,children:(0,p.jsx)(He,{cinemaModeRef:e,setVideoContainer:a})})});case ae.K.npv:return(0,p.jsx)(U.s,{children:(0,p.jsx)("div",{ref:s,children:(0,p.jsx)(lt,{setVideoContainer:a})})});case ae.K.documentPip:return(0,p.jsx)(U.s,{children:(0,p.jsx)("div",{ref:s,children:(0,p.jsx)(Ge,{setVideoContainer:a})})});case ae.K.nowPlayingBar:return(0,p.jsx)(U.s,{children:(0,p.jsx)("div",{ref:s,children:(0,p.jsx)(Je,{setVideoContainer:a})})});case ae.K.none:default:return(0,p.jsx)("div",{ref:s,children:(0,p.jsx)(mt,{videoContainerRef:s,setVideoContainer:a})})}}},8874:(e,t,i)=>{i.d(t,{sY:()=>y,Nh:()=>b,bo:()=>C,r3:()=>h,EX:()=>g,lZ:()=>p});var n=i(63166),r=i(86565);i(50684);const s=new r.l("queryFullscreenMode","query","5aa77fcd9a5b65f829d8dee4000703ff1a7ff68e813c60999c0b2dce754240e2",null);var o=i(19412),a=i(84014),l=i(45640),c=i(45080),d=i(61804),u=i(4114),v=i(91950),m=i(754),f=i(85690);const p=()=>{const e=(0,n.NC)(o.WYm,{loadingValue:!1});return(0,a.o)(m.A3)||e};function g(e){return(0,u.v)(e)?{uri:e.uri,name:e.name,creatorName:e.artists[0]?.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,d.p)(e)?{uri:e.uri,name:e.name,creatorName:e.show.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,c.d)(e)?{uri:e.uri,name:e.name,creatorName:e.book.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,l.N)(e)?{uri:e.uri,name:e.title??"",creatorName:e.advertiser??"",coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,v.v)(e)||void 0===e?void 0:(0,f.d)(e)}function h(e){const t=g(e);return(0,u.v)(e)||(0,d.p)(e)||(0,c.d)(e)||(0,l.N)(e)?{...t,duration:e.duration.milliseconds,mediaType:(i=e.mediaType,"video"===i||"mixed"===i?"video":"audio")}:(0,v.v)(e)||void 0===e?void 0:(0,f.d)(e);var i}function b(e){const t=e?.context.metadata?.context_description,i=e?.context.uri||void 0,n=e?.positionAsOfTimestamp??void 0,r=e?.timestamp,s=e?.isPaused,o=e?.restrictions.canPause,a=e?.restrictions.canResume;return{contextName:t,contextUri:i,position:n,timestamp:r,isPaused:s,canPause:o,canResume:a}}async function y(e,t){return e(s,{artistUri:t}).then((e=>{if("Artist"===e?.data?.artistUnion.__typename)return e.data.artistUnion.visuals.headerImage?.sources[0]?.url})).catch((()=>{}))}function C(e,t,i){if(e&&i&&i.hasLyrics)return{status:t?"loading":"success",content:{provider:i.provider,syncType:i.syncType,lines:i.lyrics.map((e=>({timestamp:Number(e.start),text:e.text})))}}}},58137:(e,t,i)=>{i.d(t,{A:()=>a});var n=i(1978),r=i(79150),s=i(60472),o=i(37300);function a({referrer:e,onChange:t}){const i=(0,n.Zp)(),{isActive:a,routeDestination:l}=(0,r.$)(),{setVideoPlayerUIFlag:c}=(0,s.d)(),d=()=>{a||(c(o.n.cinemaLegacy,!1),i(l,{state:{referrer:e}}),t?.(l))},u=()=>{a&&(i(-1),t?.(null))};return{isActive:a,showLyrics:d,hideLyrics:u,toggleLyrics:()=>{a?u():d()}}}},66531:(e,t,i)=>{i.d(t,{D:()=>d});var n=i(30758),r=i(93007);var s=i(60472),o=i(37300),a=i(89494),l=i(64474),c=i(1620);const d=({item:e,onClick:t})=>{const i=(0,a.W)(),{capabilities:{isEnabled:d},isOpen:u,close:v,open:m,canOpen:f}=(0,l.H)(),{videoPlayerMode:p}=(0,s.d)(),{spec:g,logger:h}=(0,c.r)(r.h9,{data:{identifier:p===o.K.cinemaLegacy?r.gw.CINEMA:r.gw.DESKTOP}}),b=(0,n.useCallback)((()=>{let n;d&&(u?(v(),e?.uri&&h.logInteraction(g.pipButtonFactory({uri:e.uri}).hitUiHide()),n="close-picture-in-picture"):(m(),e?.uri&&(({spec:e,logger:t,uri:i})=>{const n=window.documentPictureInPicture;if(!n)return;const r=s=>{setTimeout((()=>{const n=s.window?.innerWidth,r=s.window?.innerHeight;if(!n||!r)return;const o=e.pipButtonFactory({uri:i}).hitUiOpenWindow({widthPx:n,heightPx:r});t.logInteraction(o)}),100),n.removeEventListener("enter",r)};n.addEventListener("enter",r)})({spec:g,logger:h,uri:e.uri}),n="show-picture-in-picture"),t?.(!u,e?.uri),i({type:"click",intent:n,targetUri:e?.uri,itemIdSuffix:"picture-in-picture-toggle"}))}),[v,d,u,e?.uri,h,t,i,m,g]);return{showButton:f,isActive:u,onClick:b}}},74843:(e,t,i)=>{i.d(t,{$:()=>s});var n=i(49667),r=i(25214);function s(){return(0,r.N)(n.n)}},16096:(e,t,i)=>{i.d(t,{A:()=>n});const n={videoPlayerContainer:"ngkFeIGFyNUaxRspbs5H"}}}]);
//# sourceMappingURL=dwp-video-player.js.map