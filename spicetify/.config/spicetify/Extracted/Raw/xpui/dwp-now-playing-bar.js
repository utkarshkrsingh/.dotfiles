"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3322],{97688:(e,t,i)=>{i.d(t,{n:()=>o});var n=i(40748),a=i(43494),s=i(86070);const o=({icon:e,activeIcon:t,label:i,isActive:o,...r})=>(0,s.jsx)(a.Zp,{label:i,children:(0,s.jsx)(n.H,{"aria-label":`${i}, ${o?"selected":"unselected"}, button`,"aria-pressed":o,semanticColor:o?"textBrightAccent":"textSubdued",iconOnly:o?t:e,"aria-haspopup":"menu",size:"small",...r})})},92087:(e,t,i)=>{i.d(t,{t:()=>h});var n=i(95440),a=i(91814),s=i(54336),o=i(64721),r=i(97688),c=i(40351),l=i(55705),d=i(5176),u=i(44979),m=i(30758),g=i(99903),v=i(12433),p=i(95309),b=i(86070);const y=(0,m.memo)((function({onFeedbackReasonSelect:e}){const t=new Map([["not_relevant",o.Ru.get("ad-formats.ad-feedback.dislike.not-relevant")],["too_often",o.Ru.get("ad-formats.ad-feedback.dislike.too-often")],["unpleasant",o.Ru.get("ad-formats.ad-feedback.dislike.unpleasant-content")],["offensive",o.Ru.get("ad-formats.ad-feedback.dislike.offensive-content")],["do_not_like",o.Ru.get("ad-formats.ad-feedback.dislike.do-not-like")]]);return(0,b.jsx)(p.pZ,{value:"dislike-ad",children:(0,b.jsx)(g.W,{children:Array.from(t).map((([t,i])=>(0,b.jsx)(p.pZ,{value:i,children:(0,b.jsx)(v.D,{role:"menuitem","aria-label":i,onClick:()=>e(t,i),children:i})},t)))})})})),h=({item:e,isDisabled:t})=>{const i=(0,n.wA)(),{logAdFeedback:m}=(0,c.L)(e),g=(0,n.d4)((t=>(0,d.N2)(t,e.id)));return(0,b.jsx)(u.b,{menu:(0,b.jsx)(y,{onFeedbackReasonSelect:(t,n)=>{e.id&&(i((0,l.NI)({adId:e.id,reason:n})),m(`dislike_${t}`))}}),children:(0,b.jsx)(r.n,{item:e,icon:a.P,activeIcon:s.X,label:o.Ru.get("ad-formats.ad-feedback.dislike"),isActive:g,"data-testid":"button-dislike-ad",onClick:()=>{if(e.id){if(g)return i((0,l.vA)({adId:e.id})),void m("cancel_dislike");i((0,l.NI)({adId:e.id})),m("dislike_menu")}},disabled:t})})}},88482:(e,t,i)=>{i.d(t,{T:()=>h});var n=i(95440),a=i(98449),s=i(5835),o=i(64721),r=i(97688),c=i(40351),l=i(55705),d=i(5176),u=i(44979),m=i(30758),g=i(99903),v=i(12433),p=i(95309),b=i(86070);const y=(0,m.memo)((function({onFeedbackReasonSelect:e}){const t=new Map([["relevant",o.Ru.get("ad-formats.ad-feedback.like.relevant")],["interested_in_brand",o.Ru.get("ad-formats.ad-feedback.like.interested-in-brand")],["interested_in_product",o.Ru.get("ad-formats.ad-feedback.like.interested-in-product")],["enjoyable",o.Ru.get("ad-formats.ad-feedback.like.enjoyable-content")],["discovered_new",o.Ru.get("ad-formats.ad-feedback.like.discovered-new")]]);return(0,b.jsx)(p.pZ,{value:"like-ad",children:(0,b.jsx)(g.W,{children:Array.from(t).map((([t,i])=>(0,b.jsx)(p.pZ,{value:i,children:(0,b.jsx)(v.D,{role:"menuitem","aria-label":i,onClick:()=>e(t,i),children:i})},t)))})})})),h=({item:e,isDisabled:t})=>{const i=(0,n.wA)(),{logAdFeedback:m}=(0,c.L)(e),g=(0,n.d4)((t=>(0,d.Tt)(t,e.id)));return(0,b.jsx)(u.b,{menu:(0,b.jsx)(y,{onFeedbackReasonSelect:(t,n)=>{e.id&&(i((0,l.F$)({adId:e.id,reason:n})),m(`like_${t}`))}}),children:(0,b.jsx)(r.n,{item:e,icon:a.G,activeIcon:s.q,label:o.Ru.get("ad-formats.ad-feedback.like"),isActive:g,"data-testid":"button-like-ad",onClick:()=>{if(e.id){if(g)return i((0,l.D$)({adId:e.id})),void m("cancel_like");i((0,l.F$)({adId:e.id})),m("like_menu")}},disabled:t})})}},53232:(e,t,i)=>{i.d(t,{O:()=>d});var n=i(40748),a=i(36196),s=i(64721),o=i(43494),r=i(90861),c=i(90089),l=i(86070);const d=({isDisliked:e=!1,onClick:t=(()=>{}),className:i,size:d="medium",label:u=s.Ru.get("playback-control.ban")})=>{const m=(0,c.y)();return(0,l.jsx)(o.Zp,{label:u,children:(0,l.jsx)(n.H,{role:"switch","aria-label":u,"aria-checked":e,className:i,onClick:t,iconOnly:a.P,size:m===r.E.MEDIUM?d:"small"})})}},85745:(e,t,i)=>{i.d(t,{f:()=>m});var n=i(30758),a=i(97500),s=i.n(a),o=i(40748),r=i(43494);const c="main-genericButton-button",l="main-genericButton-buttonActive",d="main-genericButton-buttonActiveDot";var u=i(86070);const m=(0,n.forwardRef)(((e,t)=>{const i=e.isActive??!1,n=s()(c,{[l]:i||e.isActiveNoIndicator,[d]:i},e.className);return(0,u.jsx)(r.Zp,{label:e.label,children:(0,u.jsx)(o.H,{ref:t,style:e.style,"aria-label":e.label,size:"small",className:n,disabled:e.disabled,iconOnly:e.icon,onClick:e.onToggle,"data-testid":e.testId,"data-active":i.toString(),"aria-pressed":i,"data-restore-focus-key":e.restoreFocusKey})})}))},1630:(e,t,i)=>{i.d(t,{z:()=>a});var n=i(8364);const a=()=>{const{togglePanel:e,isActive:t}=(0,n.C)();return{isPickerOpen:t,triggerRef:{current:null},toggleDevicePicker(t){e(t)}}}},88013:(e,t,i)=>{i.d(t,{NowPlayingBar:()=>ba});var n=i(30758),a=i(95440),s=i(94079),o=i(49280),r=i(6128),c=i(61214),l=i(64721),d=i(49058);const u="dz_h98rH9nZCwfPdnKgr",m="rAfV2jB_HMM9Xtr0Rqvn",g="XkXPpDRWozMF6G8_GlLQ";var v=i(86070);const p=n.memo((function(e){const{handleClick:t}=e,i=(0,a.d4)(d.q),n=l.Ru.get("pta.bottom-bar.title"),s=l.Ru.get("fta.bottom-bar.subtitle"),o=l.Ru.get("fta.sign-up-free");return(0,v.jsxs)("div",{className:u,onClick:t,"data-testid":"signup-bar",children:[(0,v.jsxs)("div",{className:m,children:[(0,v.jsx)(r.E,{as:"p",variant:"bodySmallBold",children:n}),(0,v.jsx)(r.E,{as:"p",variant:"bodyMedium",dangerouslySetInnerHTML:{__html:i?l.Ru.get("fta.bottom-bar.subtitle-two"):s}})]}),(0,v.jsx)(c.$,{colorSet:"invertedLight",onClick:t,className:g,children:i?l.Ru.get("mwp.d2p.modal.cta"):o})]})}));var b=i(97500),y=i.n(b),h=i(7004),k=i(87673),f=i(23369),x=i(1630),C=i(45247),N=i(64407),j=i(1620);const I="gqYYMz8DkhaT3e44LcHQ",T="VX33mI2V_jRA7hRBI9_0",w=({remoteDeviceName:e,remoteDeviceType:t,connectionStatus:i,omitConnectionStateText:n=!1})=>{const{spec:a,logger:s}=(0,j.r)(k.s,{}),{triggerRef:o,toggleDevicePicker:c,isPickerOpen:d}=(0,x.z)(),u=(0,C.$A)(t,i),m=i===N.zP.CONNECTED?l.Ru.get("web-player.connect.bar.connected-state",{device_name:e}):l.Ru.get("web-player.connect.bar.connecting-state",{device_name:e});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u,{size:"small",className:T,role:"presentation",semanticColor:"essentialBase"}),(0,v.jsx)(h.Y,{component:"button",onClick:()=>{const e=a.activeDeviceButtonFactory(),{interactionId:t}=s.logInteraction(d?e.hitUiHide():e.hitUiReveal()),i=d;c(t),i||(0,f.I)("DEVICE-PICKER")},ref:o,className:I,children:(0,v.jsx)(r.E,{variant:"bodySmallBold","aria-live":"polite",semanticColor:"textBase",children:n&&i===N.zP.CONNECTED?e:m})})]})},S="nQSM_BrSHJ4Cp3XSuLOF",A=()=>(0,v.jsxs)("svg",{width:"1",height:"16",viewBox:"0 0 1 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"separator",className:S,children:[(0,v.jsx)("g",{id:"separator",clipPath:"url(#clip0_491_88335)",children:(0,v.jsx)("rect",{id:"Rectangle 111112858",width:"1",height:"16",rx:"0.5",fill:"var(--essential-base)"})}),(0,v.jsx)("defs",{children:(0,v.jsx)("clipPath",{id:"clip0_491_88335",children:(0,v.jsx)("rect",{width:"1",height:"16",fill:"white"})})})]});var E=i(83211),P=i(73868),D=i(38254),R=i(4316),L=i(45231);const _="main-connectBar-connectBar",B="main-connectBar-connected",O="main-connectBar-connecting",F=function(){const{isPlayingRemotely:e,connectionStatus:t,remoteDeviceName:i,remoteDeviceType:n}=(0,D.v)((e=>{const t=(0,P.V)(e);return{isPlayingRemotely:t.isPlayingRemotely,connectionStatus:t.connectionStatus,remoteDeviceName:t.remoteDevice?.name,remoteDeviceType:t.remoteDevice?.type}}),L.a),{currentSession:a}=(0,R.D)(),s=Boolean(a?.active),o=e&&i&&n;if(!o&&!s)return null;const r=t===N.zP.CONNECTED||s,c=t===N.zP.CONNECTING&&!s;return(0,v.jsxs)("div",{className:y()(_,{"encore-bright-accent-set":r,[B]:r,[O]:c}),children:[s&&(0,v.jsx)(E.K,{}),s&&o&&(0,v.jsx)(A,{}),o&&(0,v.jsx)(w,{connectionStatus:t,remoteDeviceName:i,remoteDeviceType:n,omitConnectionStateText:s})]})},U=()=>(0,v.jsx)(n.Suspense,{fallback:null,children:(0,v.jsx)(F,{})});var M=i(40638),H=i(63166),V=i(93007),z=i(2430),Q=i(66686),q=i(82185),G=i(8874),K=i(85745),Z=i(86128),Y=i(84014);const W=({className:e="",disabledClassName:t="",onClick:i})=>{const s=(0,G.lZ)(),o=(0,n.useContext)(q.s),r=(0,Y.o)((e=>e?.hasContext??!1)),c=(0,a.wA)(),d=!r,u=(0,n.useCallback)((async()=>{o?.current&&(i?.(!0),c((0,Q.f)()),(0,Z.X8)(o.current))}),[c,o,i]),m=y()(e,{[t]:d});return s?(0,v.jsx)(K.f,{onToggle:u,className:m,icon:z.L,label:l.Ru.get("npv.full-screen"),disabled:d,testId:"fullscreen-mode-button"}):null},X=(0,n.memo)(W);var $=i(93567),J=i(58704),ee=i(80488),te=i(8364);var ie=i(98540),ne=i(40748),ae=i(41089);const se="xP7v0EBcbJMj1xIJxywg",oe="zJU_lLLzQL6oKvMA0c5b",re=({onClose:e,onMouseEnter:t,onMouseLeave:i,onClick:n,impressionCallback:a,message:s})=>(0,v.jsxs)("div",{className:se,onMouseEnter:t,onMouseLeave:i,ref:a,onClick:n,children:[(0,v.jsx)(r.E,{id:"nudgeBody",as:"p",variant:"bodyMedium",semanticColor:"textBase",children:s}),(0,v.jsx)(ne.H,{iconOnly:ae.M,size:"small",semanticColor:"textBase",onClick:t=>{t.stopPropagation(),e?.()},"aria-label":l.Ru.get("close"),className:oe})]});var ce=i(91799),le=i(70354);const de=(e=ce.C)=>{const t=(0,a.Pj)(),{isActive:i}=e(),n=(0,le.h)();return document.hasFocus()&&!i&&!(({ui:e,ads:t},i)=>e.blockUserDialog.isOpen||e.connectDevicePicker.isOpen||e.deleteFolderDialog.isOpen||e.deletePlaylistDialog.isOpen||e.fullscreenMode.isOpen||e.improvedSignupPromptDialog.isOpen||e.keyboardShortcutsHelpModal.isOpen||e.leavePlaylistDialog.isOpen||e.loginToListenDialog.isOpen||e.offlineDeviceLimitReachedDialog.isOpen||e.playbackNotSupportedErrorDialog.isOpen||e.premiumDialog.isOpen||e.signupToListenDialog.isOpen||!0===t.billboard?.isOpen&&!t.billboard.isMinimized||!1===t.vto?.isHidden&&!1===t.vto?.isMinimized||i)(t.getState(),n.current.length>0)};var ue=i(18209);const me=e=>Boolean(e?.supportsDJNarration);var ge=i(69941),ve=i(48431),pe=i(88318),be=i(73303),ye=i(31861),he=i(32751),ke=i(86103),fe=i(28584),xe=i(754),Ce=i(27602);const Ne="spotify:playlist:37i9dQZF1EYkqdzj48dyYq",je=e=>{const t=(0,n.useRef)(),i=(0,n.useRef)(),a=(0,n.useRef)(!1),s=(0,he.z)(),o=(0,ve.e)(),r=(0,pe.Z)(),c=(0,H.NC)(Ce.vF),{spec:d,logger:u}=(0,j.r)(ue.w,{}),m=(0,n.useRef)(null),g=(0,n.useCallback)((()=>{u.logInteraction(d.djVoiceUnsupportedNudgeFactory().closeButtonFactory().hitUiHide())}),[d,u]),v=(0,n.useCallback)((e=>{e&&m.current!==e&&u.logImpression(d.djVoiceUnsupportedNudgeFactory().impression()),m.current=e}),[d,u]),p=(0,n.useCallback)((()=>{const e=s.getState();if(c){const t=r.getActiveDevice();return!(e=>e?.isLocal??!1)(t)&&(0,xe.yc)(e,Ne)!==fe.i.NOT_ACTIVE&&!me(t??void 0)}const t=o.getState();return!(e=>e?.connectionStatus===N.zP.NOT_CONNECTED)(t)&&(0,xe.yc)(e,Ne)!==fe.i.NOT_ACTIVE&&!me(t?.activeDevice??void 0)}),[s,c,o,r]),b=(0,n.useCallback)((()=>{p()&&e({nudgeType:"message-only-nudge",message:l.Ru.get("web-player.connect.nudge.dj-voice-unavailable"),onClose:g,impressionCallback:v})}),[e,p,g,v]),y=(0,n.useCallback)((e=>{e.data.action===ye.Ik.PLAY&&(a.current=!0)}),[]);(0,ke.p)(ye.gd.ACTION,y);const h=(0,n.useCallback)((e=>{a.current&&(0,xe.uW)(e.data)===fe.i.PLAYING&&(t.current=e.data?.context.uri,b(),t.current=void 0,a.current=!1)}),[b]);(0,ke.p)(ye.gd.UPDATE,h);const k=(0,n.useCallback)((e=>{const t=e.data?.activeDevice;t&&!t.isLocal&&i.current!==t.connectStateId&&b(),i.current=t?.connectStateId}),[b]);(0,be.W)(ge.P.UPDATE,k)};var Ie=i(17256);const Te=e=>{switch(e.type){case N.bq.AUDIO_DONGLE:case N.bq.AVR:case N.bq.CAST_AUDIO:case N.bq.CAST_VIDEO:case N.bq.GAME_CONSOLE:case N.bq.SPEAKER:case N.bq.STB:case N.bq.TV:return!0;default:return!1}},we=e=>!e||!(e.terminalType===Ie.FI.HEADPHONES||e.terminalType===Ie.FI.SPEAKERS&&(e.transportType===Ie.Yg.BLUETOOTH||e.transportType===Ie.Yg.USB));var Se=i(63319),Ae=i(18775),Ee=i(76698);const Pe=new Date(0).toISOString(),De=["shift+alt+f10"],Re=e=>{const t=(0,n.useRef)(),i=(0,n.useRef)(!1),s=(0,n.useRef)(!1),o=(0,a.Pj)(),r=(0,he.z)(),c=(0,ve.e)(),d=(0,pe.Z)(),u=(0,Ae.V)(),[m,g]=(0,Ee.x)("connect-nudge-triggered-at",Pe),v=(0,n.useRef)(null),{spec:p,logger:b}=(0,j.r)(ue.w,{}),y=(0,H.NC)(Ce.vF),h=(0,n.useCallback)((()=>{b.logInteraction(p.connectFromDevicePickerNudgeFactory().hitNoAction())}),[p,b]),k=(0,n.useCallback)((()=>{b.logInteraction(p.connectFromDevicePickerNudgeFactory().closeButtonFactory().hitUiHide())}),[p,b]),f=(0,n.useCallback)((e=>{e&&v.current!==e&&b.logImpression(p.connectFromDevicePickerNudgeFactory().impression()),v.current=e}),[p,b]);(0,Se.f)(De,(async()=>{const{platform:{isDeveloperMode:e}}=o.getState();if(e){const e=new Date;e.setHours(e.getHours()-8),g(e.toISOString())}}));const x=(0,n.useCallback)((()=>{const e=r.getState(),t=c.getState(),i=d.getActiveDevice(),n=d.getDevices(),a=u.getDefaultDevice(),s=new Date(m);s.setHours(s.getHours()+8);const o=s<=new Date;return y?o&&(e=>e?.isLocal??!1)(i)&&!(0,xe.A3)(e)&&(e=>e.some((e=>e.isLocalNetwork&&!e.isDisabled&&Te(e))))(n)&&we(a):o&&(e=>e?.connectionStatus===N.zP.NOT_CONNECTED)(t)&&!(0,xe.A3)(e)&&(e=>!!e?.devices.length&&e.devices.some((e=>e.isLocalNetwork&&!e.isDisabled&&Te(e))))(t)&&we(a)}),[r,c,u,m,y,d]),C=(0,n.useCallback)((()=>{if(x()){e({nudgeType:"message-only-nudge",message:l.Ru.get("web-player.connect.nudge.listen-to-speaker"),impressionCallback:f,onClick:h,onClose:k});const t=(new Date).toISOString();g(t)}}),[e,x,g,h,k,f]),I=(0,n.useCallback)((e=>{e.data.action===ye.Ik.PLAY?i.current=!0:e.data.action===ye.Ik.RESUME&&(s.current=!0)}),[]);(0,ke.p)(ye.gd.ACTION,I);const T=(0,n.useCallback)((e=>{i.current&&(0,xe.uW)(e.data)===fe.i.PLAYING?(t.current=e.data?.context.uri,C(),t.current=void 0,i.current=!1):s.current&&!1===e.data?.isPaused&&(t.current=e.data?.context.uri,C(),t.current=void 0,s.current=!1)}),[C]);(0,ke.p)(ye.gd.UPDATE,T)};var Le=i(29621),_e=i(75627),Be=i(84576),Oe=i(97550),Fe=i(70865),Ue=i(76766),Me=i(7917),He=i(5617);const Ve=e=>{const t=(0,Ue.d)(),{getSessionInfo:i,joinSession:a,currentSession:s}=(0,R.D)(),o=(0,Be.vh)(),r=(0,Oe.b)(),c=(0,Ie.lS)(r),d=(0,n.useRef)(new Set),u=(0,n.useCallback)((async(e,t)=>{d.current.add(t);const i="IN_PERSON",n=He.JO.NEARBY_DIALOG;try{const s=await a(e,n,i);s&&o.send((0,Le.X)({session_id:t,join_type:n,join_url:s.joinSessionUri,participation_mode:i}))}catch(e){e instanceof Error&&o.send((0,Le.X)({session_id:t,error_category:e.name,error_data:e.message}))}}),[o,a]),m=(0,he.z)(),g=(0,n.useCallback)((()=>(0,xe.uW)(m.getState())!==fe.i.PLAYING),[m]),v=(0,n.useCallback)((async(t,{sessionMembers:i,sessionOwnerId:n,sessionId:a,isSessionOwner:s})=>{const o=i.find((e=>e.id===n));if(!o||s)return;const r=i.map((e=>({uri:(0,_e.Qjr)(e.username).toURI(),displayName:e.displayName,username:e.username,images:e.imageUrl?[{url:e.imageUrl}]:[]})));g()&&e({nudgeType:"join-listening-session-nudge",title:l.Ru.get("web-player.social-connect.broadcasting.join-listening-session-nudge-title",{host:o.displayName,device:t.title}),message:l.Ru.get("web-player.social-connect.broadcasting.join-listening-session-nudge-text"),onClose:()=>{},onActionButtonClick:()=>{u(t.token,a)},users:r})}),[g,u,e]);(0,Me.c)(Fe.P.SCAN_UPDATE,(()=>{if(s?.active)return;const e=t.getLocalNetSessionDevices(),n=e?.devices.find((e=>e.isNew));n&&(async e=>{if(c)return;const n=await i(e.token);if(n){if(d.current.has(n.sessionId))return;const i=await t.getLocalNetSesssionDeviceVisibility(n.sessionId);i!==He.MS.UNSPECIFIED&&i!==He.MS.NOTIFY||v(e,n)}})(n)}))};var ze=i(86502),Qe=i(13979),qe=i(2799),Ge=i(72575);const Ke=e=>{Re(e),je(e),Ve(e),(e=>{const{panelSend:t}=(0,ze.AI)(qe.Z.DevicePicker,qe.Z.DevicePickerOverlay),[i,a]=(0,Ee.x)("session-broadcast-nudge-shown",[]),s=(0,n.useCallback)((e=>{const t=[...i,e];t.length>10&&t.shift(),a(t)}),[i,a]);(0,Me.c)(Fe.P.BROADCAST_NUDGE,(({data:n})=>{const a=n.deviceId;n.broadcastStatus===Ge.ez.BROADCAST_ON&&a&&!i.includes(a)&&e({nudgeType:"session-is-being-broadcasted-nudge",message:l.Ru.get("web-player.social-connect.broadcasting.session-is-being-broadcasted-nudge-text"),onClose:()=>{},onActionButtonClick:()=>{t({type:Qe.$S.DEVICE_PICKER_BUTTON_CLICK})},onShow:()=>{s(a)}})}))})(e)},Ze=()=>{const e=(0,n.useRef)(),t=(0,n.useRef)(!1),i=(0,n.useRef)(!1),s=(0,a.wA)(),o=(0,a.d4)((e=>e.ui.connectNudge.isOpen)),r=(0,a.d4)((e=>e.ui.connectDevicePicker.isOpen)),c=(0,n.useCallback)((()=>{i.current&&(clearTimeout(e.current),i.current=!1),s((0,Q.Yp)())}),[s]),l=(0,n.useCallback)((()=>{i.current=!1,t.current||c()}),[c]),d=(0,n.useCallback)((()=>{e.current=window.setTimeout(l,8e3),s((0,Q.dK)()),i.current=!0}),[s,l]),u=(0,n.useCallback)((e=>{t.current=e,e||i.current||c()}),[c]);return(0,n.useEffect)((()=>{r&&c()}),[r,c]),(0,n.useMemo)((()=>({hideNudge:c,showNudge:d,setShouldKeepShowingNudge:u,isNudgeVisible:o})),[c,d,u,o])};var Ye=i(26709),We=i(90);const Xe="uETBcNmdHUHF_YPLJfOx",$e="kb2DrVIixaicEzk6sEcP",Je="PmEpl43j3MvwvoqnnZ6A",et="zWPenObFu5ZjWvtk_qSb",tt=({onClose:e,onActionButtonClick:t,onMouseEnter:i,onMouseLeave:a,message:s,title:o,users:d})=>{const{spec:u,logger:m}=(0,j.r)(Ye.m,{});(0,n.useEffect)((()=>{m.logImpression(u.nudgeScanningTooltipFactory().impression())}),[m,u]);const g=(0,n.useCallback)((()=>{m.logInteraction(u.nudgeScanningTooltipFactory().closeButtonFactory().hitUiHide()),e?.()}),[m,e,u]),p=(0,n.useCallback)((()=>{m.logInteraction(u.nudgeScanningTooltipFactory().joinButtonFactory().hitJoinSocialListeningSession()),t()}),[m,t,u]);return(0,v.jsxs)("div",{className:Xe,onMouseEnter:i,onMouseLeave:a,children:[(0,v.jsxs)("div",{className:$e,children:[d.length>0&&(0,v.jsx)(We.g,{users:d}),(0,v.jsx)(r.E,{as:"p",variant:"bodyMediumBold",semanticColor:"textBase",className:Je,children:o}),(0,v.jsx)(ne.H,{iconOnly:ae.M,size:"small",semanticColor:"textBase",onClick:g,"aria-label":l.Ru.get("close")})]}),(0,v.jsx)(r.E,{id:"nudgeBody",as:"p",variant:"bodySmall",semanticColor:"textBase",children:s}),(0,v.jsx)("div",{className:et,children:(0,v.jsx)(c.$,{colorSet:"invertedLight",size:"small",onClick:p,children:l.Ru.get("web-player.social-connect.join-modal.button-primary")})})]})};var it=i(31214);const nt="_eXNo3nLWPbXuTHH7K08",at="VT_giL9ITyvqFuzZsmWk",st="m5mgkcoKawOAJIWj0JE7",ot=({onActionButtonClick:e,onMouseEnter:t,onMouseLeave:i,message:a,onShow:s})=>{const{spec:o,logger:d}=(0,j.r)(Ye.m,{});(0,n.useEffect)((()=>{s?.(),d.logImpression(o.nudgeBroadcastingTooltipFactory().impression())}),[d,s,o]);const u=(0,n.useCallback)((()=>{d.logInteraction(o.nudgeBroadcastingTooltipFactory().changeButtonFactory().hitUiReveal()),e?.()}),[d,e,o]);return(0,v.jsxs)("div",{className:nt,onMouseEnter:t,onMouseLeave:i,children:[(0,v.jsx)(it.h,{size:"medium",className:at}),(0,v.jsx)(r.E,{id:"nudgeBody",as:"p",variant:"bodySmall",semanticColor:"textBase",children:a}),(0,v.jsx)("div",{className:st,children:(0,v.jsx)(c.$,{colorSet:"invertedLight",size:"small",onClick:u,children:l.Ru.get("web-player.social-connect.broadcasting.session-is-being-broadcasted-nudge-button")})})]})},rt=({children:e,useNudgeTriggers:t=Ke,useToggleNudgeWithTimer:i=Ze,useCanShowNudge:a=de,disabled:s=!1})=>{const{showNudge:o,hideNudge:r,setShouldKeepShowingNudge:c,isNudgeVisible:l}=i(),[d,u]=(0,n.useState)(null),m=a();(0,n.useEffect)((()=>{l&&!m&&r()}),[m,r,l]),t((e=>!(l||!m)&&(u(e),o(),!0)));const g=(0,n.useCallback)((e=>{if(!e)return(0,v.jsx)(v.Fragment,{});const t=()=>{e?.onClose?.(),r()};if("join-listening-session-nudge"===e.nudgeType){const i=()=>{e.onActionButtonClick?.(),r()};return(0,v.jsx)(tt,{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),...e,onClose:t,onActionButtonClick:i})}if("session-is-being-broadcasted-nudge"===e.nudgeType){const i=()=>{e.onShow?.()};return(0,v.jsx)(ot,{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),...e,onClose:t,onShow:i})}return(0,v.jsx)(re,{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),...e,onClose:t})}),[r,c]);return(0,v.jsx)(ie.W,{maxWidth:"join-listening-session-nudge"===d?.nudgeType?450:void 0,placement:"top",visible:Boolean(d?.message)&&l&&!s,overlay:g(d),popperOptions:{modifiers:[{name:"preventOverflow",options:{rootBoundary:"viewport",altAxis:!0,padding:24,tether:!1}}]},onHide:()=>{},fadeOut:!0,useLazyMounting:!0,children:e})},ct=()=>{const{remoteDeviceType:e,remoteDeviceIsGroup:t,connectionStatus:i}=(0,D.v)((e=>{const t=(0,P.V)(e);return{remoteDeviceType:t.remoteDevice?.type,remoteDeviceIsGroup:t.remoteDevice?.isGroup,connectionStatus:t.connectionStatus}}),L.a),a=(0,J.g)(),{canTogglePanel:s,isActive:o,togglePanel:r}=(0,te.C)(),{spec:c,logger:d}=(0,j.r)($.p,{}),u=(0,n.useCallback)((()=>{const{interactionId:e}=d.logInteraction(function(e,t,i){return {interactionId:null,pageInstanceId:null};let n;return n=t===N.zP.CONNECTING?e.connectingButtonFactory():t===N.zP.CONNECTED?e.connectedButtonFactory():e.notConnectedButtonFactory(),i?n.hitUiHide():n.hitUiReveal()}(c,i,o));r(e)}),[i,r,o,c,d]),{currentDevice:m}=(0,ee.l)(),{isLocal:g}=m,p=(0,n.useMemo)((()=>(0,C.tf)(e,t,g?a:null)),[a,g,t,e]);return(0,v.jsx)(rt,{children:(0,v.jsx)(K.f,{isActive:o,disabled:!s,onToggle:u,label:l.Ru.get("playback-control.connect-picker"),icon:p})})};var lt=i(40069),dt=i(81886),ut=i(95255),mt=i(20057);const gt="A8ETvbaffbfWsxJDy_OW",vt="yQQ8ZWvoqRXw2oHD1OJR",pt=({children:e})=>(0,v.jsx)("div",{className:gt,children:e}),bt=({onHide:e})=>{const t=(0,ze._Y)();return(0,v.jsxs)(pt,{children:[(0,v.jsx)(r.E,{variant:"bodyMedium",children:l.Ru.get("web-player.puffin.upsell.enhance-headphones")}),(0,v.jsxs)("div",{className:vt,children:[(0,v.jsx)(ne.H,{semanticColor:"textSubdued",onClick:e,condensedAll:!0,size:"small",children:l.Ru.get("web-player.puffin.upsell.enhance-headphones.cancel")}),(0,v.jsx)(c.$,{colorSet:"invertedLight",onClick:()=>{t(Qe.$S.PUFFIN_START_ACTIVATION),e()},size:"small",children:l.Ru.get("web-player.puffin.upsell.enhance-headphones.confirm")})]})]})};var yt=i(41968);const ht=()=>{const{deviceFilterState:{audioDevice:e}}=(0,yt.j)();if(!e)return null;const t=e.transportType===Ie.Yg.BLUETOOTH?e.name:l.Ru.get("web-player.puffin.wired-connection");return(0,v.jsx)(pt,{children:(0,v.jsx)(r.E,{variant:"bodyMedium",children:l.Ru.get("web-player.puffin.upsell.optimized-for",t)})})},kt=({hasDevice:e})=>(0,P.l)()?(0,v.jsx)(pt,{children:(0,v.jsx)(r.E,{variant:"bodyMedium",children:l.Ru.get("web-player.puffin.upsell.enhanced-listening")})}):e?(0,v.jsx)(pt,{children:(0,v.jsx)(r.E,{variant:"bodyMedium",children:l.Ru.get("web-player.puffin.upsell.enhanced-headphones")})}):(0,v.jsx)(pt,{children:(0,v.jsx)(r.E,{variant:"bodyMedium",children:l.Ru.get("web-player.puffin.upsell.lossless-listening")})});var ft=i(85690);const xt=({state:e,hasDevice:t,onHide:i})=>{switch(e){case"detection":return(0,v.jsx)(bt,{onHide:i});case"initial":return(0,v.jsx)(kt,{hasDevice:t});case"filters_applied":return(0,v.jsx)(ht,{});default:(0,ft.k)(e)}return null};var Ct=i(63912),Nt=i(68656);var jt=i(3566);const It=({children:e,onVisibilityChange:t})=>{const{isPuffinPanelActive:i}=(0,jt.c)(),[a,s]=(0,n.useState)("none"),{deviceFilterState:o,isMaybeHeadphoneDevice:r}=(0,yt.j)(),c=(0,n.useRef)(o.audioDevice),l=(0,Nt.N)().getSavedDevices().length>0,{incrementDismissCountForDevice:d,isDeviceDismissed:u}=(0,Ct.o)();(0,n.useEffect)((()=>{if(o.audioDevice&&c.current?.id!==o.audioDevice.id){if(c.current=o.audioDevice,i||o.audioDevice.terminalType!==Ie.FI.HEADPHONES)return;u||o.isOnboarded?(o.currentState.externalizationEnabled||o.currentState.specificEnabled)&&s("filters_applied"):s("detection")}}),[o,u,i,c]);const m=(0,n.useCallback)((()=>{s("none")}),[]),g=(0,n.useCallback)((()=>{null!==o.audioDevice&&d(),m()}),[o.audioDevice,m,d]);(0,n.useEffect)((()=>{if("detection"!==a){const e=setTimeout(m,5e3);return()=>clearTimeout(e)}return()=>{}}),[m,a]),(0,n.useEffect)((()=>{l||u||s("initial")}),[l,u,s]),(0,n.useEffect)((()=>{!i&&r||m()}),[m,i,r]);const p="none"!==a;return(0,n.useEffect)((()=>{t(p)}),[p,t]),(0,v.jsx)(ut.E,{isVisible:p,placement:"top-start",content:p?(0,v.jsx)(dt.z,{onClose:m,maxWidth:287,header:(0,v.jsx)(mt.s,{variant:"bodyMediumBold"}),children:(0,v.jsx)(xt,{state:a,hasDevice:r,onHide:g})}):null,children:e})};var Tt=i(51169);const wt=Qe.$S.PUFFIN_BUTTON_CLICK,St=Qe.$S.DEVICE_PICKER_BUTTON_CLICK,At=()=>{const{isPuffinPanelActive:e}=(0,Tt.c)(),{isActive:t,panelSend:i}=(0,ze.AI)(qe.Z.DevicePicker,qe.Z.DevicePickerOverlay),[a,s]=(0,n.useState)(!1),o=(0,ze.Ev)(wt),{remoteDeviceType:r,remoteDeviceisGroup:c}=(0,D.v)((e=>{const t=(0,P.V)(e);return{remoteDeviceType:t.remoteDevice?.type,remoteDeviceisGroup:t.remoteDevice?.isGroup}}),L.a),d=(0,J.g)(),u=d?.audioDevice.terminalType===Ie.FI.HEADPHONES,m=(()=>{const{deviceFilterState:e}=(0,yt.j)();return e.currentState.externalizationEnabled||e.currentState.specificEnabled})(),g=t||e,p=m||u,{currentDevice:b}=(0,ee.l)(),{isLocal:y}=b,h=(0,n.useMemo)((()=>m?lt.C:(0,C.tf)(r,c,y?d:null)),[d,m,c,r,y]);return(0,v.jsx)(rt,{disabled:a,children:(0,v.jsx)(It,{onVisibilityChange:s,children:(0,v.jsx)(K.f,{isActive:g,isActiveNoIndicator:p,onToggle:()=>{const e=t;i(St),e||(0,f.I)("DEVICE-PICKER")},label:l.Ru.get("playback-control.connect-picker"),icon:h,disabled:!o,restoreFocusKey:e?qe.Z.Puffin:qe.Z.DevicePicker})})})};var Et=i(82199),Pt=i(95052);const Dt=()=>{const{isAnonymous:e}=(0,a.d4)(Pt.Ht),t=(0,Et.v)();return e?null:t?(0,v.jsx)(n.Suspense,{fallback:null,children:(0,v.jsx)(At,{})}):(0,v.jsx)(ct,{})};var Rt=i(7961),Lt=i(79150),_t=i(64422),Bt=i(29754),Ot=i(19412);const Ft=n.memo((({onClick:e,className:t,isActive:i,isEnabled:n})=>{const a=n?l.Ru.get("web-player.lyrics.title"):l.Ru.get("web-player.lyrics.noLyrics1"),s=n?e:void 0;return(0,v.jsx)(K.f,{className:t,isActive:i,onToggle:s,disabled:!n,label:a,testId:"lyrics-button",icon:Rt.q})})),Ut=n.memo((e=>{const t=Boolean((0,Bt.J)().data?.hasLyrics);return(0,v.jsx)(Ft,{...e,isEnabled:t,isActive:!1})})),Mt=n.memo((e=>{const t=(0,Y.o)((e=>e?.item?.uri)),i=Boolean((0,_t.f)(t).hasLyrics);return(0,v.jsx)(Ft,{...e,isEnabled:i,isActive:!1})})),Ht=n.memo((e=>{const{isActive:t}=(0,Lt.$)(),{isAnonymous:i}=(0,a.d4)(Pt.Ht),n=(0,H.NC)(Ot.khs),s=(0,Y.o)((e=>{if(e?.item?.uri&&(0,_e.U_m)(e?.item?.uri)){return!Boolean(e?.item?.metadata?.["segment.index"])}return!1}));return i||!s?null:t?(0,v.jsx)(Ft,{...e,isActive:!0,isEnabled:!0}):n?(0,v.jsx)(Ut,{...e}):(0,v.jsx)(Mt,{...e})}));var Vt=i(58137);const zt=({onClick:e,className:t})=>{const{toggleLyrics:i}=(0,Vt.A)({onChange:e,referrer:"now_playing_bar"});return(0,v.jsx)(Ht,{onClick:i,className:t})};var Qt=i(43654),qt=i(13556),Gt=i(28261);const Kt=Qe.$S.NPV_BUTTON_CLICK,Zt=({onClick:e})=>{const{isActive:t,panelSend:i}=(0,ze.AI)(qe.Z.NowPlayingView),n=(0,ze.Ev)(Kt),{mode:a,setMode:s}=(0,qt.r)(),{item:o}=(0,Y.o)((e=>({item:e?.item})),((e,t)=>e.item?.uri===t.item?.uri)),r=!o||!n;return(0,v.jsx)(K.f,{isActive:t,disabled:r,onToggle:()=>{e?.(!t),i(Kt),a===Gt.YU.cinema&&s(Gt.YU.npv)},icon:Qt.d,label:l.Ru.get("web-player.now-playing-view.label"),testId:"control-button-npv",restoreFocusKey:qe.Z.NowPlayingView})};var Yt=i(1978),Wt=i(94852),Xt=i(14576),$t=i(83842),Jt=i(67674),ei=i(39733),ti=i(60809);const ii=({uri:e,to:t,children:i,onDrop:s,onNavigate:o,className:r})=>{const[c,l]=(0,n.useState)(!1),d=(0,n.useRef)(null),u=(0,Yt.Zp)(),m=(0,a.wA)(),g=(0,ei.f)(),p=(0,ti.g)(),b=(0,he.z)(),y=function(e){const t=(0,_e.o_h)(e),i=(0,a.d4)(Pt.F6);switch(t?.type){case _e.NQG.PLAYLIST:case _e.NQG.PLAYLIST_V2:{let e;if((0,_e.iwx)(t)&&(e=t.username),i&&e===i)return[Jt.Ay[_e.NQG.TRACK],Jt.Ay[_e.NQG.LOCAL],Jt.Ay[_e.NQG.ALBUM]];break}case _e.NQG.COLLECTION:return[Jt.Ay[_e.NQG.TRACK],Jt.Ay[_e.NQG.ALBUM],Jt.Ay[_e.NQG.ARTIST],Jt.Ay[_e.NQG.PLAYLIST],Jt.Ay[_e.NQG.PLAYLIST_V2],Jt.Ay[_e.NQG.SHOW]];case _e.NQG.QUEUE:return[Jt.Ay[_e.NQG.TRACK],Jt.Ay[_e.NQG.LOCAL],Jt.Ay[_e.NQG.EPISODE]];default:return[]}return[]}(e),h=!!y.length;return(0,n.useEffect)((()=>(c?d.current=window.setTimeout((()=>{(0,_e.U_m)(e)||(o?.(),u(t||(0,_e.o_h)(e).toURLPath(!0)))}),1e3):!c&&d.current&&clearTimeout(d.current),()=>{d.current&&clearTimeout(d.current)})),[c,e,t,o,u]),h?(0,v.jsx)($t.A,{types:y,onDrop:t=>{const i=(0,_e.o_h)(e),n=Array.from(t.dataTransfer.types).find((e=>y.includes(e))),a=n&&t.dataTransfer.getData(n),o=a&&a.split("\n")[0],r=(0,_e.o_h)(o);if(r&&i)switch(s?.(r.toURI()),i.type){case _e.NQG.PLAYLIST:case _e.NQG.PLAYLIST_V2:m((0,Xt.io)(e,[r.toURI()]));break;case _e.NQG.COLLECTION:(0,_e._Tv)(r)||(0,_e.ecE)(r)||(0,_e.U_m)(r)?g.add({uris:[r.toURI()]}):(0,_e.tbX)(r)?p.add([r.toURI()],{before:"start"}):(0,_e.WB1)(r)&&g.add({uris:[r.toURI()]});break;case _e.NQG.QUEUE:b.addToQueue([{uri:r.toURI(),uid:null}])}},onDragEnter:()=>{l(!0)},onDragLeave:()=>{l(!1)},className:r,children:i}):(0,v.jsx)("div",{children:i})};var ni=i(89494);function ai({style:e,active:t,disabled:i,intent:a,label:s,labelActive:o,icon:r,iconActive:c,className:l,onClick:d}){const[u,m]=(0,n.useState)(!1),g=(0,ni.W)(),p=t&&o?o:s,b=t&&c?c:r;return(0,v.jsx)(K.f,{style:e,className:l,isActive:t,disabled:i,onToggle:e=>{d?.(),u||e.target.blur(),m(!1),a&&g({type:"click",intent:a,targetUri:""})},onKeyDown:({key:e})=>{"enter"===e.toLowerCase()&&m(!0)},label:p,icon:b,testId:`control-button-${a}`})}var si=i(13625),oi=i(60472),ri=i(37300),ci=i(11687);const li=()=>{const{isAnonymous:e}=(0,a.d4)(Pt.Ht),{videoPlayerMode:t}=(0,oi.d)();return e||t===ri.K.cinemaLegacy?{isVisible:!1}:{isVisible:!0,isEnabled:!0}},di=({onClick:e})=>{const{isEnabled:t,isVisible:i}=li(),a=(0,Yt.zy)(),s=(0,ci.J)(),o=(0,Yt.Zp)(),r=(0,n.useMemo)((()=>"/queue"===a.pathname||"/history"===a.pathname),[a.pathname]),c=(0,n.useCallback)((()=>{const t=s.entries?.slice(0,s.index+1)?.reverse()?.findIndex((({pathname:e})=>"/queue"!==e&&"/history"!==e));e({mode:"main",route:null}),o(-1===t?"/":t>=0?-t:-1)}),[o,s,e]),d=(0,n.useCallback)((()=>{e({mode:"main",route:"/queue"}),o("/queue",{state:{referrer:"now_playing_bar"}})}),[e,o]),u=(0,n.useCallback)((()=>{t&&(r?c():d())}),[t,r,c,d]);return i?(0,v.jsx)(ii,{uri:"spotify:queue",children:(0,v.jsx)(ai,{intent:"queue",icon:Wt.j,label:l.Ru.get("playback-control.queue"),onClick:u,active:r,disabled:!t})}):null},ui=Qe.$S.QUEUE_BUTTON_CLICK,mi=({onClick:e})=>{const{isEnabled:t,isVisible:i}=li(),a=(0,ze.Ev)(ui),{isActive:s}=(0,ze.AI)(qe.Z.Queue,qe.Z.QueueOverlay),{toggleQueue:o}=(0,si.R)(),r=(0,n.useCallback)((()=>{t&&(e({mode:"panel",aboutToShow:!s}),o())}),[t,e,s,o]);return i?(0,v.jsx)(ii,{uri:"spotify:queue",children:(0,v.jsx)(K.f,{icon:Wt.j,label:l.Ru.get("playback-control.queue"),onToggle:r,isActive:s,disabled:!t||!a,testId:"control-button-queue",restoreFocusKey:qe.Z.Queue})}):null},gi=({onClick:e})=>(0,H.NC)(Ot.eWj)?(0,v.jsx)(mi,{onClick:e}):(0,v.jsx)(di,{onClick:e});var vi=i(99062),pi=i(81240),bi=i(66531);const yi=({onClick:e})=>{const{item:t}=(0,pi.L)()??{},{isActive:i,onClick:n,showButton:a}=(0,bi.D)({item:t,onClick:e});return t&&a?(0,v.jsx)(K.f,{isActive:i,onToggle:n,label:i?l.Ru.get("miniplayer.close"):l.Ru.get("miniplayer.open"),icon:vi.F,testId:"pip-toggle-button"}):null};var hi=i(11944),ki=i(3217);const fi="main-nowPlayingBar-extraControls",xi="main-nowPlayingBar-lyricsButton",Ci="main-nowPlayingBar-volumeBar",Ni=()=>{const e=(0,H.NC)(Ot.yux),t=(0,H.NC)(Ot.mzn),{setVideoPlayerUIFlag:i,videoPlayerMode:a}=(0,oi.d)(),{spec:s,logger:o,UBIFragment:r}=(0,j.r)(V.h9,{data:{identifier:a===ri.K.cinemaLegacy?V.gw.CINEMA:V.gw.DESKTOP}}),c=(0,M.YQ)((e=>{o.logInteraction(s.volumeBarFactory().dragSetVolume({newVolumePercentage:Math.floor(100*e)}))}),500,{leading:!1,trailing:!0}),l=(0,n.useCallback)((e=>{e&&i(ri.n.cinemaLegacy,!1)}),[i]);return(0,v.jsx)(r,{spec:s,children:(0,v.jsxs)("div",{className:fi,children:[(0,v.jsx)(ki.mA,{onClick:()=>{o.logInteraction(s.djJumpButtonFactory().hitRefreshContent())}}),(0,v.jsx)(Zt,{onClick:e=>{e?o.logInteraction(s.npvButtonFactory().hitUiReveal()):o.logInteraction(s.npvButtonFactory().hitUiHide())}}),!e&&(0,v.jsx)(zt,{className:xi,onClick:e=>{e?o.logInteraction(s.lyricsButtonFactory().hitUiNavigate({destination:e})):o.logInteraction(s.lyricsButtonFactory().hitUiNavigateBack())}}),(0,v.jsx)(gi,{onClick:e=>{"main"===e.mode?e.route?o.logInteraction(s.queueButtonFactory().hitUiNavigate({destination:e.route})):o.logInteraction(s.queueButtonFactory().hitUiNavigateBack()):e.aboutToShow?o.logInteraction(s.queueButtonFactory().hitUiReveal()):o.logInteraction(s.queueButtonFactory().hitUiHide())}}),(0,v.jsx)(Dt,{}),(0,v.jsx)(hi.M,{className:Ci,onVolumeBarClick:e=>{o.logInteraction(s.volumeBarFactory().hitSetVolume({newVolumePercentage:Math.floor(100*e)}))},onToggleMuteClick:e=>{"muted"===e?o.logInteraction(s.volumeMuteButtonFactory().hitMutePlayback()):"not_muted"===e&&o.logInteraction(s.volumeMuteButtonFactory().hitUnmutePlayback())},onVolumeBarDrag:c}),(0,v.jsx)(yi,{onClick:l}),!t&&(0,v.jsx)(X,{className:"control-button",disabledClassName:"control-button--disabled",onClick:e=>{e&&o.logInteraction(s.fullscreenButtonFactory().hitUiReveal())}})]})})};var ji=i(37970),Ii=i(97666),Ti=i(24902);const wi="yyrJTUPMeLS8qs1a0YJr",Si=({logoUrl:e})=>e?(0,v.jsx)("div",{className:wi,"data-testid":"context-ad-logo",children:(0,v.jsx)(Ii.N,{loading:"eager",imgSrc:e,width:56,height:56,type:Ti.c.AD})}):null;var Ai=i(19369),Ei=i(1759),Pi=i(39470);const Di=({item:e,context:t,index:i})=>{const{logoImage:n}=(0,Ai.iz)(e);return(0,v.jsx)(Pi.e,{item:e,context:t,index:i,"aria-label":l.Ru.get("ad-formats.advertisement"),adEventReason:Ei.c.AD_LOGO,isVisible:!1,children:(0,v.jsx)(Si,{logoUrl:n})})};var Ri=i(1044),Li=i(66810),_i=i(49066);const Bi=n.memo((function({uri:e,className:t,onClick:i,size:a=Li.t.xs}){const[s,o]=(0,_i.A)(e),r=(0,ni.W)(),c=(0,n.useCallback)((t=>{t.preventDefault(),r({targetUri:e,intent:s?"remove-from-library":"add-to-library",type:"click"}),i&&i(!s),o(!s)}),[r,e,s,i,o]);return(0,v.jsx)(Li.M,{className:t,size:a,onClick:c,isAdded:!!s,isAudiobook:!0,condensed:!0})}));var Oi=i(9675),Fi=i(73145),Ui=i(34482);const Mi=({uri:e,isBook:t=!1,size:i=Li.t.xs,className:a,onClick:s})=>{const{isPreSaved:o,addPresave:r,removePresave:c}=(0,Ui.w)({uri:e,isBook:t}),l=(0,n.useCallback)((()=>{o?c():r(),s?.(!o)}),[o,s,c,r]);return(0,v.jsx)(Li.M,{className:a,size:i,onClick:l,isAdded:!!o,isAudiobook:!0,condensed:!0})};var Hi=i(84889),Vi=i(39235),zi=i(5868),Qi=i(1729),qi=i(13377),Gi=i(32170),Ki=i(82822),Zi=i(60528),Yi=i(96802),Wi=i(61804),Xi=i(4114);function $i(e){return(0,Xi.v)(e)||(0,Wi.p)(e)}var Ji=i(92057);const en="main-nowPlayingWidget-nowPlaying",tn="main-coverSlotCollapsed-navAltContainer",nn="main-nowPlayingWidget-coverArt",an="main-nowPlayingWidget-trackInfo",sn="HD9s7U5E1RLSWKpXmrqx",on=({onClick:e})=>{const t=(0,pi.L)(),{draggable:i,onDragStart:n}=(0,Ji.P)(),{isActive:a,panelSend:s}=(0,ze.AI)(qe.Z.NowPlayingView);if(null===t)return null;const{context:o,item:r}=t,c=Qe.$S.NPV_BUTTON_CLICK;return(0,v.jsx)(qi.h,{menu:(0,v.jsx)(Ki.W,{context:o,item:r}),children:(0,v.jsx)("div",{draggable:i&&$i(r),onDragStart:e=>{n(e,{itemUris:[r.uri],dragLabelText:(0,Yi.r)(r)})},children:(0,v.jsx)(Zi.R,{uri:o.uri,owner:o.metadata?.context_owner,children:(0,v.jsx)("button",{type:"button","data-testid":"cover-art-button",className:sn,"aria-label":l.Ru.get("web-player.now-playing-view.label"),onClick:()=>{s(c),e?.(a)},children:(0,v.jsx)(Gi.b,{item:r,size:56,maxSize:56,className:nn})})})})})};var rn=i(42683),cn=i(37948),ln=i(43494);const dn="main-coverSlotCollapsed-container",un="main-coverSlotCollapsed-expandButton",mn=Qe.$S.NPV_BUTTON_CLICK,gn=({children:e,className:t})=>{const i=(0,ze.Ev)(mn),{isActive:a}=(0,ze.AI)(qe.Z.NowPlayingView),s=(0,ze._Y)(),o=(0,n.useMemo)((()=>a?{label:l.Ru.get("npb.collapseCoverArt"),Icon:cn.r}:{label:l.Ru.get("npb.expandCoverArt"),Icon:rn.o}),[a]);return(0,v.jsxs)("div",{"data-testid":"CoverSlotCollapsed__container",className:y()(dn,t),children:[e,(0,v.jsx)(ln.Zp,{label:o.label,children:(0,v.jsx)("button",{className:y()(un),disabled:!i,onClick:()=>{s(mn)},"aria-label":l.Ru.get("web-player.now-playing-view.label"),"aria-pressed":a,children:(0,v.jsx)(o.Icon,{iconSize:16})})})]})};var vn=i(64842),pn=i(58901),bn=i(32892);var yn=i(37375),hn=i(58778),kn=i(17566),fn=i(45640),xn=i(45080),Cn=i(91950),Nn=i(63112);const jn=({context:e,item:t,onLike:i})=>{const n=(0,kn.X)(),a=(0,Vi.v)(t);if(n&&(0,hn.N)(t))return(0,v.jsx)(yn.o,{contextUri:t.metadata?.context_uri??e.uri,id:t.uid??void 0,uri:t.uri,isActive:!0});if(a)return(0,v.jsx)(Hi.g,{uri:t.uri,condensed:!1});if((0,Xi.v)(t))return t.isLocal?null:(0,v.jsx)(Fi.b,{uri:t.uri,className:"control-button control-button-heart",onClick:i});if((0,Wi.p)(t))return(0,v.jsx)(Oi.b,{uri:t.uri,className:"control-button control-button-heart",onClick:i,condensed:!0});if((0,xn.d)(t)){return"trailer"===t?.metadata?.type&&"true"===t?.metadata?.is_pre_release?(0,v.jsx)(Mi,{uri:t.book.uri,isBook:!0,className:"control-button control-button-heart",onClick:i}):(0,v.jsx)(Bi,{uri:t.book.uri,className:"control-button control-button-heart",onClick:i})}return(0,fn.N)(t)||(0,Cn.v)(t)?null:(0,ft.d)(t)},In=({state:{item:e,context:t,index:i}})=>{!function(e){const t=(0,bn.i)(),i=(0,pn.X)(e);(0,n.useEffect)((()=>{i&&t.say(i)}),[i,t])}(e);const{videoPlayerMode:a,setVideoPlayerUIFlag:s}=(0,oi.d)(),{spec:o,logger:r}=(0,j.r)(ji.p6,{data:{identifier:a===ri.K.cinemaLegacy?ji.gw.CINEMA:ji.gw.DESKTOP}}),c=(0,pn.P)(e),l=(0,H.NC)(Ot.WAA),d=(0,Ri.w)(e);(0,n.useEffect)((()=>{s(ri.n.nowPlayingBar,l)}),[l,s]);const u=a===ri.K.nowPlayingBar&&l;return(0,v.jsx)(n.Suspense,{fallback:null,children:(0,v.jsx)("div",{"data-testid":"now-playing-widget",className:en,role:"contentinfo","aria-label":c,children:(0,v.jsxs)(Nn.r,{spec:o,children:[d?(0,v.jsx)(Di,{item:e,context:t,index:i}):(0,v.jsxs)(gn,{className:tn,children:[!u&&(0,v.jsx)(on,{onClick:t=>{t?r.logInteraction(o.coverartFactory({uri:e.uri}).hitUiReveal()):r.logInteraction(o.coverartFactory({uri:e.uri}).hitUiHide())}}),l&&(0,v.jsx)("div",{id:"VideoPlayerNpb_ReactPortal"})]}),(0,v.jsx)(zi.d,{context:t,className:an,item:e,size:"xsmall",enableVideoButton:!0,onTitleClick:t=>{r.logInteraction(o.titleFactory({uri:e.uri}).hitUiNavigate({destination:t||""}))},onSubtitleClick:t=>{r.logInteraction(o.subtitleFactory({uri:e.uri}).hitUiNavigate({destination:t||""}))},referrer:Qi.G.NPB}),(0,v.jsx)(vn.a,{context:t,item:e,onClick:()=>{r.logInteraction(o.hideButtonFactory().hitRemoveRecommendation({recommendedItemUri:e.uri,contextUri:t.uri}))}}),(0,v.jsx)(jn,{item:e,onLike:t=>{r.logInteraction(t?o.likeButtonFactory({uri:e.uri}).hitLike({itemToBeLiked:e.uri}):o.likeButtonFactory({uri:e.uri}).hitRemoveLike({itemNoLongerLiked:e.uri}))},context:t})]})})})},Tn=()=>{const e=(0,pi.L)();return null===e?(0,v.jsx)("div",{className:y()("now-playing")}):(0,v.jsx)(In,{state:e})};var wn=i(72360),Sn=i(1429);const An="aguQsGoZR9wZeawKGdDh",En="ieqOSqJb6kk3bG5XDOHk",Pn=({paused:e,fromSeconds:t})=>{const[i,a]=(0,n.useState)(t);return(0,Sn.$)((t=>{a((i=>e?i:i>0?i-1:(t(),i)))}),1e3),(0,v.jsxs)("div",{className:An,children:[l.Ru.get("ad-formats.skippable_ads.skip_countdown"),(0,v.jsx)("span",{className:En,children:i})]})};var Dn=i(28218);const Rn=({children:e})=>{const t=(0,Y.o)((e=>e),((e,t)=>(0,L.a)(e?.restrictions,t?.restrictions)&&e?.item?.uri===t?.item?.uri&&e?.isPaused===t?.isPaused)),i=t?.restrictions.disallowSkippingNextReasons.includes("ad_disallow"),n=t?.isPaused??!1,s=(0,Dn.qc)(t),o=(0,Dn.Tv)(t),r=(0,a.d4)((e=>s?e?.ads?.audio?.info?.skippableAdDelaySeconds:o?e?.ads?.vto?.info?.skippableAdDelaySeconds:void 0));return i&&r?(0,v.jsx)(Pn,{paused:!!n,fromSeconds:r}):(0,v.jsx)(v.Fragment,{children:e})};var Ln=i(38286),_n=i(92087),Bn=i(88482),On=i(16383),Fn=i(48432),Un=i(57970),Mn=i(40161),Hn=i(16970),Vn=i(72020),zn=i(22840);const Qn="player-controls",qn="player-controls__buttons",Gn="player-controls__left",Kn="player-controls__right",Zn=(0,n.memo)((function({item:e}){const t=e.isPodcastAd,i=(0,On.o)(e);return(0,v.jsxs)("div",{"data-testid":"ad-controls",className:qn,children:[(0,v.jsxs)("div",{className:Gn,children:[t&&(0,v.jsx)(zn.w,{}),(0,v.jsx)(Bn.T,{item:e,isDisabled:i}),t?(0,v.jsx)(Un.h,{}):(0,v.jsx)(Hn.d,{})]}),(0,v.jsx)(Fn.x,{}),(0,v.jsxs)("div",{className:Kn,children:[t?(0,v.jsx)(Mn.v,{}):(0,v.jsx)(Rn,{children:(0,v.jsx)(Vn.$,{})}),(0,v.jsx)(_n.t,{item:e,isDisabled:i})]})]})}));var Yn=i(72704),Wn=i(14361),Xn=i(57424),$n=i(77986),Jn=i(43215),ea=i(84058),ta=i(60001);const ia=(0,n.memo)((function({isPreview:e}){const t=(0,he.z)(),{videoPlayerMode:i}=(0,oi.d)(),{spec:a,logger:s}=(0,j.r)(wn.kD,{data:{identifier:i===ri.K.cinemaLegacy?wn.gw.CINEMA:wn.gw.DESKTOP}}),o=(0,Y.o)((e=>e?.item??void 0),((e,t)=>e?.uri===t?.uri)),r=(0,Ri.w)(o),c=(0,Xn.p)(),d=(0,n.useCallback)(((e,t)=>{switch(t){case"drag":return s.logInteraction(a.progressBarFactory().dragSeekToTime({msToSeekTo:e}));case"hit":return s.logInteraction(a.progressBarFactory().hitSeekToTime({msToSeekTo:e}));default:return(0,ft.k)(t)}}),[s,a]);return(0,v.jsxs)("div",{className:Qn,"data-testid":"player-controls",dir:"ltr","aria-label":l.Ru.get("playback-control.a11y.landmark-label"),children:[r?(0,v.jsx)(Zn,{item:o}):(0,v.jsxs)("div",{className:qn,"data-testid":"general-controls",children:[(0,v.jsxs)("div",{className:Gn,children:[c&&(0,v.jsx)(zn.w,{onClick:e=>{const i=t.getState();i?.item&&s.logInteraction(a.speedControlButtonFactory().hitSetPlaybackSpeed({currentlyPlayedItem:i.item.uri,playbackSpeed:e}))}})," ",!c&&(0,v.jsx)(Jn.w,{renderEnabled:()=>(0,v.jsx)(Nn.r,{spec:a,children:(0,v.jsx)($n.a,{size:"small"})}),renderDisabled:()=>(0,v.jsx)(Wn.u,{onClick:e=>{s.logInteraction(e?a.shuffleButtonFactory().hitShuffleEnable():a.shuffleButtonFactory().hitShuffleDisable())}})}),c&&(0,v.jsx)(Un.h,{onClick:e=>{s.logInteraction(a.seekBackButtonFactory().hitSeekByTime({msSeekedOffset:e}))}}),(0,v.jsx)(Hn.d,{onClick:()=>{const e=t.getState();e&&s.logInteraction(a.previousButtonFactory().hitSkipToPrevious({itemToBeSkipped:e.item?.uri||"",positionMs:(0,ta.s)(e)??-1,totalContentMs:e.duration??-1}))}})]}),(0,v.jsx)(Fn.x,{onClick:e=>{const i=t.getState();i?.item&&("resume"===e?s.logInteraction(a?.playPauseButtonFactory().hitResume({itemToBeResumed:i.item.uri})):"pause"===e&&s.logInteraction(a?.playPauseButtonFactory().hitPause({itemToBePaused:i.item.uri})))}}),(0,v.jsxs)("div",{className:Kn,children:[(0,v.jsx)(Rn,{children:(0,v.jsx)(Vn.$,{onClick:()=>{const e=t.getState();e?.item&&s.logInteraction(a.nextButtonFactory().hitSkipToNext({itemToBeSkipped:e.item.uri,positionMs:(0,ta.s)(e)??-1,totalContentMs:e.duration??-1}))}})}),c&&(0,v.jsx)(Mn.v,{onClick:e=>{s.logInteraction(a.seekForwardButtonFactory().hitSeekByTime({msSeekedOffset:e}))}}),!c&&(0,v.jsx)(Yn.s,{onClick:e=>{const t={[ea.p.REPEAT_NONE]:a.repeatButtonFactory().hitRepeatDisable(),[ea.p.REPEAT_TRACK]:a.repeatButtonFactory().hitRepeatOneEnable(),[ea.p.REPEAT_CONTEXT]:a.repeatButtonFactory().hitRepeatEnable()};s.logInteraction(t[e])}})]})]}),(0,v.jsx)(Ln.x,{isPreview:e,onChange:d})]})}));var na=i(95309),aa=i(65234),sa=i(66641),oa=i(97020);const ra="main-nowPlayingBar-container",ca="main-nowPlayingBar-nowPlayingBar",la="MWD1i_CSJ5N9wRBDpZmX",da="k3NVrHXkbfflNdAxpT1_",ua="m8UPWsNtWbdkvBNvqgBN",ma="aepuRyT82biv_XmkH1eS",ga="main-nowPlayingBar-left",va="main-nowPlayingBar-center",pa="main-nowPlayingBar-right",ba=()=>{const{isAnonymous:e}=(0,a.d4)(Pt.Ht),t=(0,a.wA)(),i=(0,ni.W)(),r=(0,Y.o)((e=>e),((e,t)=>e?.hasContext===t?.hasContext&&e?.item?.uri===t?.item?.uri)),c=(0,Y.o)((e=>(0,fn.N)(e?.item??void 0))),l=(0,n.useCallback)((e=>{e.stopPropagation(),t((0,o.Ai)()),i({intent:"signup",type:"click"})}),[t,i]),d=()=>(0,v.jsx)(aa.ql.Provider,{value:"now_playing_bar",children:(0,v.jsxs)("div",{className:e?la:ca,children:[(0,v.jsx)("div",{className:ga,children:(0,v.jsx)(Tn,{})}),(0,v.jsx)("div",{className:va,children:(0,v.jsx)(n.Suspense,{fallback:null,children:(0,v.jsx)(ia,{isPreview:e})})}),(0,v.jsx)("div",{className:pa,children:(0,v.jsx)(Ni,{})})]})});return(0,v.jsx)(oa.P,{surface:sa.u.NOW_PLAYING,children:(0,v.jsx)(na.pZ,{value:"now-playing-bar",children:(0,v.jsxs)("footer",{className:ra,"data-testid":"now-playing-bar","data-testadtype":"ad-type-"+(c?"ad":"none"),children:[e?(0,v.jsx)(na.pZ,{value:"preview-bar",children:(0,v.jsx)(p,{handleClick:l})}):null,e?(0,v.jsx)(s.A,{in:r?.hasContext??!1,timeout:200,classNames:{enter:da,enterActive:ua,enterDone:ma},children:d()}):d(),(0,v.jsx)(U,{})]})})})}},40351:(e,t,i)=>{i.d(t,{L:()=>o});var n=i(47359),a=i(56989),s=i(84576);const o=e=>{const t=(0,a.dY)(),i=(0,s.vh)(),o=t.getInStreamAd();return{logAdFeedback:function(t){i.send((0,n.F)({ad_id:e.id,advertiser:e.advertiser,creative_id:o?.adId===e.id?o?.metadata?.creative_id:void 0,format:e.mediaType,line_item_id:o?.adId===e.id?o?.metadata?.lineitem_id:void 0,event:t}))}}}},16383:(e,t,i)=>{function n(e){return"survey"===e?.metadata?.["ad.companion.type"]}i.d(t,{o:()=>n})},5176:(e,t,i)=>{i.d(t,{N2:()=>o,Tt:()=>s});var n=i(42551);const a=e=>e.ads.adFeedback,s=(0,n.Mz)([e=>a(e),(e,t)=>t],((e,t)=>!(!t||e.adId!==t)&&e.liked)),o=(0,n.Mz)([e=>a(e),(e,t)=>t],((e,t)=>!(!t||e.adId!==t)&&e.disliked));(0,n.Mz)([e=>a(e),(e,t)=>t],((e,t)=>t&&e.adId===t?e.feedback:null))},8874:(e,t,i)=>{i.d(t,{sY:()=>k,Nh:()=>h,bo:()=>f,r3:()=>y,EX:()=>b,lZ:()=>p});var n=i(63166),a=i(86565);i(50684);const s=new a.l("queryFullscreenMode","query","5aa77fcd9a5b65f829d8dee4000703ff1a7ff68e813c60999c0b2dce754240e2",null);var o=i(19412),r=i(84014),c=i(45640),l=i(45080),d=i(61804),u=i(4114),m=i(91950),g=i(754),v=i(85690);const p=()=>{const e=(0,n.NC)(o.WYm,{loadingValue:!1});return(0,r.o)(g.A3)||e};function b(e){return(0,u.v)(e)?{uri:e.uri,name:e.name,creatorName:e.artists[0]?.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,d.p)(e)?{uri:e.uri,name:e.name,creatorName:e.show.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,l.d)(e)?{uri:e.uri,name:e.name,creatorName:e.book.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,c.N)(e)?{uri:e.uri,name:e.title??"",creatorName:e.advertiser??"",coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,m.v)(e)||void 0===e?void 0:(0,v.d)(e)}function y(e){const t=b(e);return(0,u.v)(e)||(0,d.p)(e)||(0,l.d)(e)||(0,c.N)(e)?{...t,duration:e.duration.milliseconds,mediaType:(i=e.mediaType,"video"===i||"mixed"===i?"video":"audio")}:(0,m.v)(e)||void 0===e?void 0:(0,v.d)(e);var i}function h(e){const t=e?.context.metadata?.context_description,i=e?.context.uri||void 0,n=e?.positionAsOfTimestamp??void 0,a=e?.timestamp,s=e?.isPaused,o=e?.restrictions.canPause,r=e?.restrictions.canResume;return{contextName:t,contextUri:i,position:n,timestamp:a,isPaused:s,canPause:o,canResume:r}}async function k(e,t){return e(s,{artistUri:t}).then((e=>{if("Artist"===e?.data?.artistUnion.__typename)return e.data.artistUnion.visuals.headerImage?.sources[0]?.url})).catch((()=>{}))}function f(e,t,i){if(e&&i&&i.hasLyrics)return{status:t?"loading":"success",content:{provider:i.provider,syncType:i.syncType,lines:i.lyrics.map((e=>({timestamp:Number(e.start),text:e.text})))}}}},34482:(e,t,i)=>{i.d(t,{w:()=>d});var n=i(30758),a=i(58048),s=i(64721),o=i(72744),r=i(83439),c=i(11548),l=i(1620);const d=({uri:e,isBook:t})=>{const{add:i,remove:d}=(0,c.p)("prerelease"),u=(0,r.o)("prerelease",[e]).at(0),{enqueueSnackbar:m}=(0,o.d)(),{spec:g,logger:v}=(0,l.r)(a.k,{data:{uri:e}});return{isPreSaved:u,addPresave:(0,n.useCallback)((async()=>{v.logInteraction(g.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:e,itemToBePresaved:e,contextUri:e})),await i(e),m(t?s.Ru.get("web-player.prerelease.audiobook_feedback_presaved"):s.Ru.get("web-player.prerelease.album_feedback_presaved"))}),[i,m,t,v,g,e]),removePresave:(0,n.useCallback)((async()=>{v.logInteraction(g.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:e,itemToBeRemovedFromPresaved:e,contextUri:e})),await d(e)}),[v,d,g,e])}}},60114:(e,t,i)=>{i.d(t,{H:()=>a,k:()=>n});const n=18e5,a=6e5},81178:(e,t,i)=>{i.d(t,{I:()=>y});var n=i(15758),a=i(63166),s=i(60114),o=i(64422),r=i(95826),c=i(38241),l=i(34083),d=i(8296),u=i(91470);function m(e,t,i){const{startTimeMs:n,words:a}=e,s=i[t+1];return{start:n||0,end:s&&s.startTimeMs?s.startTimeMs:1/0,text:a}}function g(e){return d.Q.fromInt(e).toCSS(u.a.RGB)}var v=i(49502),p=i(27602);const b={hasLyrics:!1},y=(e,t)=>{const i=(0,v.h)(t||void 0,{desiredLabel:"large",desiredSize:600})??t?.[0]?.url??"",d=(0,r.X)(),u=(0,a.NC)(p.Tc,{loadingValue:p.LZ.CONTROL}),y={[p.LZ.CONTROL]:void 0,[p.LZ.SYSTEM_LANGUAGE]:navigator.language,[p.LZ.ALL_LANGUAGES]:"all"}[u],h=["lyrics",{uri:e,image:i,vocalRemoval:d}],{hasLyrics:k,isLoading:f}=(0,o.f)(e),{data:x,isLoading:C,isError:N}=(0,n.I)({queryKey:h,queryFn:async()=>{if(!e||!i)return b;const t=await async function(e,t,i=!1,n){try{const o=await(0,c.S)(e,t,i,n);return{hasLyrics:!0,isTimeSynced:(s=o.lyrics.syncType,"LINE_SYNCED"===s||"SYLLABLE_SYNCED"===s),syncType:o.lyrics.syncType,lyrics:o.lyrics.lines.map(m),colors:(a=o.colors,{text:g(a.text),activeText:g(a.highlightText),background:g(a.background)}),provider:o.lyrics.provider,providerDisplayName:o.lyrics.providerDisplayName,providerLyricsId:o.lyrics.providerLyricsId,hasVocalRemoval:o.hasVocalRemoval??!1,showUpsell:o.lyrics.showUpsell??!1,alternatives:o.lyrics.alternatives}}catch(e){if(e instanceof l.O&&404===e.status)return{hasLyrics:!1};throw e}var a,s}(e,i,d,y);return t},gcTime:s.k,staleTime:s.H,enabled:k}),j=f||C;let I=null;return j||(I=k?x??null:b),{data:I,loading:j,error:N}}},64422:(e,t,i)=>{i.d(t,{f:()=>d});var n=i(15758),a=i(72509),s=i(63166),o=i(75627),r=i(60114),c=i(38241),l=i(19412);const d=e=>{const t=!!e&&(0,o.U_m)(e),i=(0,s.NC)(l.s6w)&&t,{data:d,isLoading:u}=(0,n.I)({queryKey:["useLyricsAvailability",e],queryFn:async()=>!!e&&await(0,c.z)(e),gcTime:r.k,staleTime:r.H,enabled:i,placeholderData:a.rX});return{isLoading:u,hasLyrics:!!i&&(d??!1)}}},29754:(e,t,i)=>{i.d(t,{J:()=>s});var n=i(81178),a=i(84014);const s=()=>{const e=(0,a.o)((e=>e?.item),((e,t)=>e?.uri===t?.uri));return(0,n.I)(e?.uri,e?.images)}},95826:(e,t,i)=>{i.d(t,{X:()=>o});var n=i(63166),a=i(19412),s=i(63560);const o=()=>{const e=(0,s.S)(),{isSupported:t}=e.getCapabilities();return(0,n.NC)(a.OBX,{loadingValue:!1})&&t}},37145:(e,t,i)=>{i.d(t,{s:()=>a,u:()=>n});const n=e=>e.ui.lyrics.mode,a=e=>e.ui.lyrics.translationLanguage},38241:(e,t,i)=>{i.d(t,{S:()=>o,z:()=>r});var n=i(75627),a=i(5050),s=i(96022);const o=async(e,t,i,o)=>{const r=(0,n.o_h)(e).id,c=a.n.getInstance(),l={format:"json",vocalRemoval:i};o&&(l.clientLanguage=o);return(await c.build().withHost(s.Hj).withPath(`/track/${encodeURIComponent(r)}/image/${encodeURIComponent(t)}`).withQueryParameters(l).withEndpointIdentifier("/track/{trackId}").send()).body},r=async e=>{const t=(0,n.Y8v)((0,n.o_h)(e)?.id);if(!t)return!1;const i=a.n.getInstance(),o=await i.build().withHost(s.XE).withPath(`/track/${encodeURIComponent(t)}`).withEndpointIdentifier("/track/{trackId}").send();return o.body?.has_lyrics||!1}},58137:(e,t,i)=>{i.d(t,{A:()=>r});var n=i(1978),a=i(79150),s=i(60472),o=i(37300);function r({referrer:e,onChange:t}){const i=(0,n.Zp)(),{isActive:r,routeDestination:c}=(0,a.$)(),{setVideoPlayerUIFlag:l}=(0,s.d)(),d=()=>{r||(l(o.n.cinemaLegacy,!1),i(c,{state:{referrer:e}}),t?.(c))},u=()=>{r&&(i(-1),t?.(null))};return{isActive:r,showLyrics:d,hideLyrics:u,toggleLyrics:()=>{r?u():d()}}}},57424:(e,t,i)=>{i.d(t,{p:()=>r});var n=i(84014),a=i(45640),s=i(45080),o=i(61804);function r(){const e=(0,n.o)((e=>e?.item??void 0),((e,t)=>e?.uri===t?.uri));return(0,o.p)(e)||(0,s.d)(e)?"audio"===e.mediaType||"mixed"===e.mediaType:!!(0,a.N)(e)&&e.isPodcastAd}},17566:(e,t,i)=>{i.d(t,{X:()=>n.XR});var n=i(62101)},1429:(e,t,i)=>{i.d(t,{$:()=>a});var n=i(30758);const a=(e,t)=>{const i=(0,n.useRef)(e);(0,n.useEffect)((()=>{i.current=e}),[e]),(0,n.useEffect)((()=>{let e;function n(){e&&clearInterval(e)}if(null!==t)return e=setInterval((function(){i.current(n)}),t),n}),[t])}},66531:(e,t,i)=>{i.d(t,{D:()=>d});var n=i(30758),a=i(93007);var s=i(60472),o=i(37300),r=i(89494),c=i(64474),l=i(1620);const d=({item:e,onClick:t})=>{const i=(0,r.W)(),{capabilities:{isEnabled:d},isOpen:u,close:m,open:g,canOpen:v}=(0,c.H)(),{videoPlayerMode:p}=(0,s.d)(),{spec:b,logger:y}=(0,l.r)(a.h9,{data:{identifier:p===o.K.cinemaLegacy?a.gw.CINEMA:a.gw.DESKTOP}}),h=(0,n.useCallback)((()=>{let n;d&&(u?(m(),e?.uri&&y.logInteraction(b.pipButtonFactory({uri:e.uri}).hitUiHide()),n="close-picture-in-picture"):(g(),e?.uri&&(({spec:e,logger:t,uri:i})=>{const n=window.documentPictureInPicture;if(!n)return;const a=s=>{setTimeout((()=>{const n=s.window?.innerWidth,a=s.window?.innerHeight;if(!n||!a)return;const o=e.pipButtonFactory({uri:i}).hitUiOpenWindow({widthPx:n,heightPx:a});t.logInteraction(o)}),100),n.removeEventListener("enter",a)};n.addEventListener("enter",a)})({spec:b,logger:y,uri:e.uri}),n="show-picture-in-picture"),t?.(!u,e?.uri),i({type:"click",intent:n,targetUri:e?.uri,itemIdSuffix:"picture-in-picture-toggle"}))}),[m,d,u,e?.uri,y,t,i,g,b]);return{showButton:v,isActive:u,onClick:h}}},93915:(e,t,i)=>{i.d(t,{I:()=>l});var n=i(30758),a=i(5050),s=i(96022);var o=i(32751),r=i(43915),c=i(67526);const l=({uri:e,setFeedbackPath:t,removeFeedbackPath:i,contextUri:l})=>{const d=(0,o.z)(),u=(0,r.m)(),{isPlaying:m}=(0,c.te)(e),g=(0,n.useCallback)((()=>{l&&u.resync(l)}),[l,u]);return{setDislikeFeedback:(0,n.useCallback)((async()=>{t&&(await((e,t,i)=>{const n=t.replace("<reason>","LOCAL_NOT_APPROPRIATE_FOR_CONTEXT").replace("<track-uri>",i);return e.build().withMethod("POST").withHost(s.L1).withPath(n).withEndpointIdentifier("/<feature>/feedback/").send()})(a.n.getInstance(),t,e),g(),m&&d.skipToNext())}),[t,e,g,m,d]),removeDislikeFeedback:(0,n.useCallback)((async()=>{i&&(await((e,t,i)=>{const n=t.replace("<reason>","LOCAL_NOT_APPROPRIATE_FOR_CONTEXT").replace("<track-uri>",i);return e.build().withMethod("DELETE").withHost(s.L1).withPath(n).withEndpointIdentifier("/<feature>/feedback/").send()})(a.n.getInstance(),i,e),g())}),[i,g,e])}}}}]);
//# sourceMappingURL=dwp-now-playing-bar.js.map