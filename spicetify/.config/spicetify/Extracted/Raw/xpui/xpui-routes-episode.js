"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9528],{96597:(e,t,i)=>{i.d(t,{o:()=>T});var a=i(30758),s=i(6128),n=i(86560),r=i(62856),l=i(93395),o=i(64721),c=i(96930),d=i(65583),u=i(91825),p=i(17934),m=i(61214),h=i(62130),g=i(55285);const y="c5Ml9BbBuUEHjNkcSwZA";var x=i(86070);const b="70px",j=({adId:e,advertiser:t,tagline:i,displayImage:a,buttonMessage:s,cardOnClick:n,buttonOnClick:r,clickthroughUrl:l})=>(0,x.jsx)(g.N,{to:(0,h.H)(l),className:y,"data-testid":"leavebehind",children:(0,x.jsx)(c.v,{onClick:n,onClickHint:o.Ru.get("ad-formats.learnMore"),layout:"wide",variant:"tinted",id:e,size:"xl",title:(0,x.jsx)(d.d,{weight:"bold",variant:"ballad",lineClamp:1,"data-testid":"leavebehind-advertiser",children:t}),subtitle:(0,x.jsx)(u.j,{as:"div",lineClamp:2,"data-testid":"leavebehind-tagline",children:i}),media:(0,x.jsx)(p.C,{"data-testid":"leavebehind-image",src:a.src,alt:a.alt,imageHeight:b,imageWidth:b,size:"xl"}),trailing:(0,x.jsx)(m.$,{onClick:()=>{r&&r()},"data-testid":"leavebehind-button",colorSet:"invertedLight",size:"small","aria-label":o.Ru.get("ad-formats.learnMore"),children:s})})});var v=i(31761),k=i(96009),C=i(57016),f=i(84576);const P="zlUJfROzFEOsEDWL7ucP",I="Fxvq1Fw7XQdGRDvYokRg",T=({leavebehinds:e,seeAllButton:t,surface:i,uri:c})=>{const d=(0,f.vh)(),u=(0,C.w)(C.P),[p,m]=(0,a.useState)(void 0);(0,a.useEffect)((()=>{e&&e.length>0&&p!==e[0].requestId&&c&&(e.forEach(((e,t)=>{e.uri===c&&(e.trackingEvents?.viewed.forEach((async t=>{try{await u(t)}catch(a){const s=a;d.send((0,r.G)({error_type:"trackingURLFailure",error_message:s.message,http_error_code:422,surface:(0,v.Fh)(i),request_url:t,request_type:"leavebehindAds",lineitem_id:e.lineitemId,ad_content_origin:(0,k.Zl)(i)}))}})),d.send((0,l.x)({leavebehind_lineitem_id:e.lineitemId,leavebehind_request_id:e.requestId,event:"event_viewed",event_reason:`viewed_on_${(0,v.Fh)(i).toLowerCase()}`,surface:(0,v.Fh)(i),surface_position:t+1,uri:c})))})),m(e[0].requestId))}),[d,u,e,c,i,p]);const h=({eventReason:e,lineitemId:t,requestId:a,trackingEvents:s,surfacePosition:n})=>{((e,t)=>{t?.forEach((async t=>{try{await u(t)}catch(a){const s=a;d.send((0,r.G)({error_type:"trackingURLFailure",error_message:s.name,http_error_code:422,surface:(0,v.Fh)(i),request_url:t,request_type:"leavebehindAds",lineitem_id:e,ad_content_origin:(0,k.Zl)(i)}))}}))})(t,s),d.send((0,l.x)({leavebehind_lineitem_id:t,leavebehind_request_id:a,event:"event_clicked",event_reason:e,surface:(0,v.Fh)(i),surface_position:n,uri:c}))};return(0,x.jsxs)("section",{"data-testid":"leavebehinds-wrapper",children:[(0,x.jsxs)("div",{className:I,children:[(0,x.jsx)(s.E,{as:"h2",semanticColor:"textBase",variant:"titleSmall",paddingBottom:(0,n.po)("tighter"),"data-testid":"leavebehinds-title",children:o.Ru.get("podcast-ads.recent_ads")}),t]}),(0,x.jsx)("div",{className:P,"data-testid":"leavebehinds-list-wrapper",children:e.map(((e,t)=>(0,x.jsx)(j,{...e,buttonOnClick:()=>{h({eventReason:"button_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})},cardOnClick:()=>{h({eventReason:"card_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})}},e.adId)))})]})}},55895:(e,t,i)=>{i.d(t,{J:()=>u});var a=i(20618),s=i(40748),n=i(93395),r=i(64721),l=i(31761),o=i(96009),c=i(84576),d=i(86070);const u=({leavebehinds:e,surface:t,uri:i,pathname:u,state:p})=>{const m=(0,c.vh)(),h=`${r.Ru.get("view.see-all")} (${e.length<=o.E9?r.Ru.formatNumber(e.length):r.Ru.formatNumber(o.E9)})`;return(0,d.jsx)(a.N_,{to:u,state:p,children:(0,d.jsx)(s.H,{"data-testid":"leavebehinds-see-all",size:"small",onClick:()=>{m.send((0,n.x)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,l.Fh)(t),uri:i}))},children:h})})}},97953:(e,t,i)=>{i.d(t,{W:()=>H});var a=i(97500),s=i.n(a),n=i(75627),r=i(64721),l=i(16249),o=i(86565),c=i(50684);const d=new o.l("internalLinkRecommenderEpisode","query","1a707c8b0ffba70f26bb06446ad3c3b75c966e35a9f71a00120a67444558f321",null);var u=i(43431),p=i(30758),m=i(95440),h=i(63642),g=i(9885),y=i(13377),x=i(48732),b=i(68371),j=i(37435),v=i(30860),k=i(92057),C=i(65311),f=i(61155),P=i(71502),I=i(44632),T=i(74511),S=i(95309),E=i(90089),w=i(88417),R=i(40564),_=i(19434),N=i(30057),A=i(86070);const L=e=>`activation-trigger-mme-${e}`,U=p.memo((function({index:e=-1,audio:t,contentInformation:i,coverArt:a,contentRatingLabel:s,description:r,mediaTypes:l,isoString:o,name:c,playable:d,playedState:u,podcastSubscription:U,sharingInfo:D,showName:F,showTrailer:M,showTypes:B,showUri:O,status:q,totalMilliseconds:$,type:z,uri:H}){const G=u.playPositionMilliseconds,W=(0,p.useRef)(null),[K,Q]=(0,p.useState)(u.state===_._w.Completed),{draggable:V,onDragStart:Y}=(0,k.P)(),Z=(0,C.V)(),X=(0,E.y)(),J=(0,m.wA)(),{isActive:ee,isPlaying:te,togglePlay:ie}=(0,w.P)({uri:H},{featureIdentifier:"episode"}),[ae]=(0,R.S)(1e4,(e=>e?.item?.uri===H));(0,p.useEffect)((()=>{te&&(W.current=ae)}),[te,ae]),(0,p.useEffect)((()=>{!te&&W.current&&$<=W.current&&Q(!0)}),[te,$]);const se=(0,p.useCallback)((e=>{e||(W.current=0),Q(e)}),[]),ne={uri:O,name:F,trailer:M,showTypes:B},re=(0,f.C)({audio:t,name:c,uri:H,mediaTypes:l,coverArt:{sources:a}},ne),le=(0,p.useCallback)((()=>{z!==_.I_.Episode?Z?re():ie():j.h.set((()=>({triggerId:L(H),triggerAction:null})))}),[z,Z,H,re,ie]),oe=U?.isPaywalled??!1,ce=U?.isUserSubscribed??!1,de=oe&&!ce,ue=oe&&Z,{badges:pe}=(0,N.b)({contentRating:s,isPaywalled:oe}),me=(0,p.useCallback)((()=>J((0,h.Tf)(O))),[O,J]),he=(0,p.useCallback)((e=>{let t=e;return(de||ue)&&(t=(0,A.jsx)(v.N,{enabled:!0,showUri:O,children:t})),!d&&pe.nineteen&&(t=(0,A.jsx)("div",{onClick:e=>{e.stopPropagation(),me()},children:e})),t=(0,A.jsx)(g.k,{id:L(H),targetURI:(0,n.o_h)(H),children:t}),t}),[de,ue,d,pe.nineteen,H,O,me]);return(0,A.jsx)(S.pZ,{value:"row",index:e,children:(0,A.jsx)(y.h,{menu:(0,A.jsx)(x.b,{uri:H,showUri:O,sharingInfo:D,isPlayed:K,onMarkAsPlayed:se}),children:(0,A.jsx)(b.k,{requestId:void 0,index:e,uri:H,size:X,images:a||[],name:c,showName:F,description:r,isPlayable:d||de,fullyPlayed:K,durationMs:$,releaseDate:o||"",resumePositionMs:W.current??G,draggable:V,handleDragStart:e=>{if(e.target!==e.currentTarget)return;Y(e,{itemUris:[H],dragLabelText:`${c} â€¢ ${F}`,contextUri:O})},handlePlaybackClick:le,isCurrentlyPlaying:ee,isPaywalled:oe,isUserSubscribed:ce,isPlaying:te,position:te?ae:void 0,episodeSharingInfo:D,onMarkAsPlayed:se,contentInformation:i,showUri:O,mediaTypes:l??void 0,badges:(0,A.jsxs)(A.Fragment,{children:[pe.explicit&&(0,A.jsx)(P.U,{}),pe.paid&&(0,A.jsx)(I.y,{}),pe.nineteen&&(0,A.jsx)(T.q,{size:16})]}),playButtonWrapper:he,status:q})})})}));var D=i(24902);var F=i(25355),M=i(58528);const B="GgMHVmfXNzteIydSWMIA",O="GcupflQsYyy0IMOsCeD1",q="A4FqrLbXeENogU0IRaPn",$="YCYs0Gv5B5ctDN0f5Zby",z=({uri:e,isFullPage:t=!1})=>{const{data:i}=(a={uri:e},(0,c.I)(d,a,l));var a,l;const o=i?.seoRecommendedEpisode.totalCount,u=i?.seoRecommendedEpisode.items,p=function(e){return(e||[]).filter((e=>(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(e.data)))}(u),m=t?p:p.slice(0,5);if(0===o)return null;const h=(0,n.o_h)(e)?.id,g=`spotify:app:episode:${h}:more-like-this`;return(0,A.jsxs)("section",{className:s()(B,{[O]:!t}),"data-testid":"episode-list",children:[(0,A.jsx)(F.k,{title:r.Ru.get("internal-link-recommender.more-episodes-like-this"),showSeeAll:!t,seeAllUri:g}),m.map((({data:e},t)=>{const i=(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Podcast"===e.__typename;var t})(e.podcastV2.data)?e.podcastV2.data:null;return i?e&&(0,A.jsxs)("div",{className:$,children:[(0,A.jsx)("hr",{className:q,"aria-hidden":!0}),(0,A.jsx)(U,{index:t,audio:e.audio,contentInformation:e.contentInformation,contentRatingLabel:e.contentRating?.label,coverArt:e.coverArt?e.coverArt.sources:void 0,description:e.description,isoString:e.releaseDate?.isoString,mediaTypes:e.mediaTypes,name:e.name,playable:e.playability.playable,playedState:e.playedState,podcastSubscription:(0,M.Wx)(e.restrictions,e.playability),sharingInfo:e.sharingInfo,showTrailer:(a=i.trailerV2?.data,a&&(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(a)?{type:D.c.EPISODE,uri:a.uri,name:a.name,coverArt:a.coverArt?.sources||[],audio:a.audio,audioPreview:a.audioPreview,sharingInfo:a.sharingInfo,duration:{milliseconds:a.duration.totalMilliseconds},contentRating:a.contentRating,mediaTypes:a.mediaTypes}:null),showName:i.name,showTypes:i.showTypes,showUri:i.uri,totalMilliseconds:e.duration.totalMilliseconds,type:e.type,uri:e.uri},`${e.uri}/${t}`)]},`${t}${e.uri}`):null;var a}))]})},H=e=>{const t=(0,u.D)({entityType:D.c.EPISODE,componentType:"list",uri:e.uri});return(0,A.jsx)(l.s,{onError:t,children:(0,A.jsx)(z,{...e})})}},33896:(e,t,i)=>{i.d(t,{g:()=>x});var a=i(30758),s=i(97500),n=i.n(s),r=i(6128),l=i(75627),o=i(13377),c=i(58681),d=i(1467),u=i(43494),p=i(55285),m=i(92057),h=i(11716),g=i(30113),y=i(86070);const x=({children:e,uri:t,name:i,nonInteractive:s=!1,creatorUri:x,spec:b})=>{let j=null;const{draggable:v,onDragStart:k}=(0,m.P)({itemUris:[t],dragLabelText:i}),C=(0,h.s)(),f=(0,a.useCallback)((()=>{b&&C.logInteraction(b.albumLinkFactory({uri:t}).hitUiNavigate({destination:t}))}),[C,b,t]);return s?(0,y.jsx)("span",{className:n()("standalone-ellipsis-one-line",g.A.text),children:e}):((0,l._Tv)(t)&&(j=(0,y.jsx)(c.h,{uri:t,artistUri:x})),(0,l.WB1)(t)&&(j=(0,y.jsx)(d.H,{uri:t})),(0,y.jsx)(o.h,{menu:j,children:(0,y.jsx)(r.E,{variant:"bodySmall",children:(0,y.jsx)(u.Zp,{label:i,showDelay:u.uF,children:(0,y.jsx)(p.N,{draggable:v,onDragStart:k,className:n()("standalone-ellipsis-one-line"),to:t,dir:"auto",onClick:f,children:e})})})}))}},89318:(e,t,i)=>{i.d(t,{P:()=>a.P});var a=i(48253)},92815:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Hi});var a=i(30758),s=i(20618),n=i(1978),r=i(83606),l=i(54628),o=i(75627),c=i(64721),d=i(18212),u=i(37435),p=i(97953),m=i(9498),h=i(72277),g=i(95440),y=i(20673),x=i(63642),b=i(69319),j=i(16683),v=i(44503),k=i(49740),C=i(9675),f=i(44979),P=i(48732),I=i(84889),T=i(39235),S=i(39521),E=i(9885),w=i(30860),R=i(55530),_=i(65311),N=i(1817),A=i(86070);const L="activation-trigger-mme",U=({episodeUri:e,showUri:t,isLocked:i,isPlaying:a,isPlayDisabled:s,playButtonPlayLabel:n,playButtonPauseLabel:r,onClick:l,size:c="large"})=>{const d=(0,N.c)();if((0,_.V)())return(0,A.jsx)(R.R,{size:c,onClick:l,isPlaying:a,disabled:s,locked:i,ariaPlayLabel:n,ariaPauseLabel:r});const u=(0,A.jsx)(w.N,{showUri:t,enabled:i,renderInline:!1,children:(0,A.jsx)(R.R,{size:c,onClick:l,isPlaying:a,disabled:s,locked:i,ariaPlayLabel:n,ariaPauseLabel:r})});return d?(0,A.jsx)(E.k,{id:L,targetURI:(0,o.o_h)(e),fadeOut:!0,children:u}):u};function D(e){return e?.replace(/T.*/,"")||""}var F=i(89318),M=i(49811),B=i(25336),O=i(44670),q=i(40564),$=i(84014),z=i(11716),H=i(1620),G=i(37659),W=i(30057);const K="KY_tGmIGPqs9GPaaPqL1",Q="ZDeijYE6qPzPqT9vG_2w",V="qEoBuparvnBwiHsPzwEj",Y="azmMKgbEFsGjSUnw2Knc",Z="oDljdc6tgUKxTeQMyh0D",X="eCpSFybAW4xJNfuGDJY3",J="aTeXTpJi_WmakpodeGxX",ee="kZWs1d_TjX2JQgmtx90y",te="JCSifKpPc54eqcTYBj5Q",ie="FlK1APGRiu5DTwm_0kix",ae="ahQLeD18bYXcFRWkL_vg",se="l6peddfW1BiAnd1a_mF3",ne="Xkg0O12dNVwomjL8dzm4",re="OexEjZt7Kf7pFUW701v8",le="jAY3diSzPfk19oswf8_y",oe="F3BJWbXwGSqNOwZHInLz",ce="YjVCpFaOT3LCR64t8jTN",de="Q7HlO_WHb9N8aK8bgOjG",ue="xTENSk0_RmQ8qEeEuhnE",pe="H1jMR2c5kT6qQ7lmTqpF",me=({episode:e,onPlayEpisode:t,isPlaying:i,isActive:s,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:l,isLocked:o,spec:d})=>{const{uri:u,playedState:p,contentRating:m,playability:h}=e,E=(0,z.s)(),w=(0,g.wA)(),[R]=(0,q.S)(1e4,(e=>e?.item?.uri===u)),_=(0,$.o)((e=>e?.duration)),{badges:N}=(0,W.b)({contentRating:m?.label}),L=(0,a.useCallback)((e=>{!h.playable&&N.nineteen&&(e.stopPropagation(),w((0,x.Tf)(u||"")))}),[u,h.playable,N.nineteen,w]),K=(0,a.useCallback)((()=>{const e=d.contextMenuButtonFactory().hitUiReveal();E.logInteraction(e)}),[E,d]),Q=(0,a.useCallback)(((e,t)=>{(0,B.Qv)(t,d.downloadButtonFactory(),E,u)}),[E,d,u]),V=(0,S.d$)(),{spec:Y,logger:Z}=(0,H.r)(y.e,{data:{uri:u}});(0,a.useEffect)((()=>{V&&Z.logImpression(Y.impression())}),[V,Z,Y]);const J=(0,a.useCallback)((e=>{const t=d.saveButtonFactory();E.logInteraction(e?t.hitLike({itemToBeLiked:u}):t.hitRemoveLike({itemNoLongerLiked:u})),e&&V&&Z.logInteraction(Y.hitAddToPlaylist({itemToBeAdded:u,playlist:O.Xn}))}),[E,d,u,V,Z,Y]),ee=!o&&!e.playability.playable,te=c.Ru.get("tracklist.a11y.play",e.name,e.podcast?.name),ie=c.Ru.get("tracklist.a11y.pause",e.name,e.podcast?.name),ae=e.podcast?.uri,se=(0,M.j)(),ne=(0,T.v)(e.uri),re=!o;return(0,A.jsxs)(b.E,{backgroundColor:l,children:[(0,A.jsxs)("div",{className:X,children:[(0,A.jsx)(F.P,{episode:e}),(0,A.jsx)(G.j,{fullyPlayed:n,durationMs:s&&_?_:e.duration.milliseconds,releaseDate:D(e.releaseDate?.isoString),resumePositionMs:p.playPositionMilliseconds,isPlaying:i,position:s&&R||void 0})]}),(0,A.jsxs)(j.S,{children:[(0,A.jsx)("div",{onClick:L,children:(0,A.jsx)(U,{episodeUri:e.uri,showUri:ae,isLocked:o,onClick:()=>{t(p.playPositionMilliseconds)},isPlaying:i,isPlayDisabled:ee,playButtonPlayLabel:te,playButtonPauseLabel:ie,size:se})}),(0,A.jsx)(v.e,{uri:e.uri,onClick:Q,size:se,canDownload:re,condensed:!0}),ne?(0,A.jsx)(I.g,{uri:e.uri,size:se}):(0,A.jsx)(C.b,{uri:e.uri,size:se,onClick:J,condensed:!0}),(0,A.jsx)(f.b,{onShow:K,menu:(0,A.jsx)(P.b,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:ae,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r}),children:(0,A.jsx)(k.e,{label:c.Ru.get("more.label.context",e.name),size:se})})]})]})};var he=i(29004),ge=i(63166),ye=i(96597),xe=i(55895),be=i(31761),je=i(34221),ve=i(21270),ke=i(96009),Ce=i(36682),fe=i(35175),Pe=i(24902);const Ie=be.ui.EPISODE_PAGE,Te=({leavebehinds:e,uri:t,seeAllPath:i})=>{const s=(0,a.useMemo)((()=>e.slice(0,ke.un)),[e]);return(0,A.jsx)(ye.o,{leavebehinds:s,surface:Ie,uri:t,seeAllButton:e.length>ke.un?(0,A.jsx)(xe.J,{leavebehinds:e,surface:Ie,uri:t,pathname:i,state:{uri:t}}):null})};function Se(e){const t=(0,Ce.L)(),i=(0,o.o_h)(e.uri)?.id,s=(0,ve.c)(i),{data:n,error:r,getLeavebehinds:l}=(0,je.A)({surface:Ie,uri:e.uri}),c=(d=t?.item.type,(0,fe.Z)(d)===Pe.c.AD&&d===Pe.c.EPISODE);var d;(0,a.useEffect)((()=>{l()}),[l]),(0,a.useEffect)((()=>{c&&l()}),[c]);const u=(0,a.useMemo)((()=>n?(0,ke.iT)(n,e.uri):[]),[n?.requestId]);return u.length<1||r?null:(0,A.jsx)(Te,{uri:e.uri,leavebehinds:u,seeAllPath:s})}var Ee=i(23893),we=i(6128),Re=i(99642),_e=i(61214),Ne=i(19412);const Ae=({cardHeaderText:e,cardBodyText:t,buttonText:i,buttonTarget:a})=>(0,ge.NC)(Ne._Nj)?(0,A.jsxs)("div",{className:te,children:[(0,A.jsxs)("div",{className:ie,children:[(0,A.jsx)(we.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:e}),(0,A.jsx)(we.E,{semanticColor:"textBase",children:t})]}),(0,A.jsx)(_e.$,{size:"small",colorSet:"invertedLight",href:(0,o.o_h)(a).toURLPath(!0),component:Ee.v,children:i})]}):null,Le=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:s,htmlDescription:n,onExpanded:r,onTimeStampClick:l,playability:o,showHeader:d=!0,spec:u})=>{const p=(0,z.s)(),m=(s||t)&&d,h=(0,a.useCallback)((e=>{const t=u.readMoreButtonFactory();p.logInteraction(e?t.hitUiReveal():t.hitUiHide()),r?.()}),[u,p,r]),g=(0,ge.NC)(Ne.ZK8,{loadingValue:!1});return(0,A.jsxs)(A.Fragment,{children:[m&&(0,A.jsx)(we.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Y,children:c.Ru.get("episode.description-title")}),t&&(0,A.jsx)(Ae,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),s&&(0,A.jsx)(Re.N,{className:V,onTimeStampClick:l,maxLines:4,onExpanded:h,content:(i||"").trim(),htmlContent:e&&n?n:void 0,enableTimestamps:o.playable,enableAutomaticLinkification:g&&e&&!!n})]})};var Ue=i(97500),De=i.n(Ue),Fe=i(21743),Me=i(56639),Be=i(17159),Oe=i(18815),qe=i(18162),$e=i(65234),ze=function(e){return e.DESCRIPTION="description",e.TRANSCRIPT="transcript",e}(ze||{});const He=a.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:i,spec:s}){const n=(0,z.s)(),[r,l]=(0,a.useState)(ze.DESCRIPTION),o=(0,$e.v7)(),{ref:d,inView:u}=(0,Fe.Wx)({threshold:[1],root:o.current,rootMargin:`-${qe.uC+1}px 100000px 0px 100000px`}),p=(0,a.useRef)(null),m=(0,a.useCallback)((e=>{p.current=e,d(e)}),[d]);return(0,a.useEffect)((()=>{const e=p.current?.parentElement?.offsetTop,t=o?.current;if(!e||!t)return;const i=e-qe.uC;t.scrollTop>i&&t.scrollTo({top:i})}),[o,r]),(0,A.jsx)(Me.j,{list:(0,A.jsxs)(Be.L,{className:De()(ce,{[de]:!u}),ref:m,children:[(0,A.jsx)(Oe.Y,{label:c.Ru.get("web-player.episode.description"),sentenceCase:!0,active:r===ze.DESCRIPTION,onClick:()=>{const e=s.tabsFactory().descriptionTabButtonFactory().hitUiReveal();n.logInteraction(e),l(ze.DESCRIPTION)},className:De()(ue,{[ae]:r===ze.DESCRIPTION})}),(0,A.jsx)(Oe.Y,{label:c.Ru.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:r===ze.TRANSCRIPT,onClick:()=>{const e=s.tabsFactory().transcriptTabButtonFactory().hitUiReveal();n.logInteraction(e),l(ze.TRANSCRIPT)},className:De()(ue,{[ae]:r===ze.TRANSCRIPT})})]}),children:null===e||r===ze.DESCRIPTION?t:i})}));var Ge=i(26928),We=i(88417),Ke=i(49502);const Qe=(0,a.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:i}){const{spec:a,logger:s}=(0,H.r)(Ge.c,{data:{uri:i}}),{isPlaying:n}=(0,We.P)({uri:i},{featureIdentifier:"episode"}),r=a.timestampLinkFactory();return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:ne,children:(0,A.jsx)(we.E,{variant:"bodySmall",semanticColor:"textBase",children:c.Ru.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,a)=>{const l=`transcript-section-${a}`;return(0,A.jsxs)("div",{className:se,children:[(0,A.jsx)("button",{className:re,onClick:()=>{t(e.startMs,l),s.logInteraction(n?r.hitSeekToTime({msToSeekTo:e.startMs}):r.hitPlay({itemToBePlayed:i}))},children:(0,A.jsx)(E.k,{id:l,targetURI:(0,o.o_h)(i),fadeOut:!0,children:(0,A.jsx)(we.E,{variant:"marginalBold",semanticColor:"textSubdued",className:le,children:(0,Ke.f)(e.startMs)})})}),e.content.map(((e,t)=>(0,A.jsx)(we.E,{variant:"bodySmall",semanticColor:"textBase",className:oe,dir:"auto",children:e},`transcript-text-${t}`)))]},l)}))]})}));var Ve=i(7588),Ye=i(23764),Ze=i(50507),Xe=i(33896),Je=i(67844),et=i(67230),tt=i(75380),it=i(45892),at=i(70540),st=i(37588),nt=i(87432),rt=i(43024),lt=i(6478),ot=i(40638),ct=i(10088),dt=i(4723),ut=i(89494),pt=i(53442),mt=i(30113);const ht=({children:e,index:t,ariaRowIndex:i,onTriggerPlay:s,isActive:n,uri:r,spec:l})=>{const o=(0,z.s)(),{pushPopSelected:c,toggleSelected:d,isSelected:u}=(0,a.useContext)(dt.m),p=(0,a.useRef)(null),m=(0,ut.W)(),h=(0,ot.YQ)((e=>{m({intent:"play",type:"double-click"});const t=o.logInteraction(l.doubleHitPlay({itemToBePlayed:r}));s(e,t)}),pt.d,{leading:!0,trailing:!1}),g=(0,a.useCallback)((e=>{d(t,e.shiftKey,e.ctrlKey||e.metaKey)}),[d,t]),y=(0,a.useCallback)((e=>{if(!p.current?.contains(e.target))return;const i="ArrowUp"===e.key?-1:1;["ArrowUp","ArrowDown"].includes(e.key)&&(e.shiftKey?c(t,i):d(t+i,!1,!1))}),[c,d,t]),x=u(t),b=x&&u(t-1),j=x&&u(t+1);return(0,A.jsx)(ct.$,{rowIndex:i,"aria-selected":x,children:(0,A.jsx)("div",{"data-testid":"tracklist-row",className:De()(mt.A.trackListRow,mt.A.trackListRowGrid,{[mt.A.active]:n,[mt.A.selected]:x,[mt.A.isPreviousRowSelected]:b,[mt.A.isNextRowSelected]:j}),onDoubleClick:h,onClick:g,onKeyDown:y,ref:p,children:e})})};var gt=i(17488),yt=i(95309);const xt=({uri:e,title:t="",index:i,subtitle:s="",showName:n="",showUri:r="",duration:l=0,start:o,stop:d})=>{const{isActive:u,isPlaying:p,onClick:m}=(0,gt.L)({episodeUri:e,start:o,stop:d}),h=(0,a.useCallback)(((e,t)=>{m(t)}),[m]),{spec:g}=(0,H.r)(Ze.i,{data:{position:i,reason:"",uri:e}});return(0,A.jsx)(yt.pZ,{value:"row",index:i,children:(0,A.jsxs)(ht,{index:i,ariaRowIndex:i+1,onTriggerPlay:h,isActive:u,spec:g,uri:e,children:[(0,A.jsxs)(st.U,{ariaColIndex:0,children:[(0,A.jsx)(tt.$,{uri:e,playAriaLabel:c.Ru.get("tracklist.a11y.play",s,n),onClick:h,isPlaying:p,isActive:u,spec:g,children:(0,A.jsx)(it.a,{children:(0,A.jsx)(Ye.M,{className:mt.A.talkIcon,"aria-hidden":!0})})}),(0,A.jsxs)(et.l,{children:[(0,A.jsx)(lt.p,{titleText:t,children:t}),(0,A.jsx)(rt.p,{children:s})]})]}),(0,A.jsx)(nt.o,{ariaColIndex:1,children:(0,A.jsx)(Xe.g,{uri:r,name:n,spec:g,children:(0,A.jsx)("span",{dir:"auto",children:n})})}),(0,A.jsx)(at.l,{ariaColIndex:2,children:(0,A.jsx)(Je.P,{duration:l,className:mt.A.talkSegmentDuration})})]})})};var bt=i(98486),jt=i(89865),vt=i(10108),kt=i(17221),Ct=i(12830),ft=i(4696),Pt=i(62355),It=i(45898);const Tt="HRApv65revEcL42QzRjJ",St="HbJqPqSmOY5H3lLnQVzD",Et="DBcCnhHVt7coNqp3wMB4",wt=({episodeUri:e,index:t,duration:i,start:s,stop:n,name:r,uri:l,artists:o,album:d,playable:u})=>{const{isActive:p,isPlaying:m,onClick:h}=(0,gt.L)({episodeUri:e,start:s,stop:n}),g=(0,a.useCallback)(((e,t)=>{u&&h(t)}),[h,u]),{spec:y}=(0,H.r)(Ze.i,{data:{position:t,reason:"",uri:l}});return(0,A.jsx)(yt.pZ,{value:"row",index:t,children:(0,A.jsx)(vt.t,{trigger:"right-click",action:"open",menu:(0,A.jsx)(kt.P,{uri:l}),children:(0,A.jsxs)(Pt.w,{uri:l,index:t,ariaRowIndex:t+1,dragMetadata:{name:r,createdBy:o?.[0].name??""},onTriggerPlay:g,isActive:p,isPlayable:u,spec:y,children:[(0,A.jsxs)(st.U,{ariaColIndex:0,children:[(0,A.jsx)(tt.$,{uri:l,playAriaLabel:c.Ru.get("tracklist.a11y.play",r,o?.[0].name),onClick:g,isPlaying:m,isActive:p,spec:y,children:(0,A.jsx)(it.a,{children:(0,A.jsx)("img",{className:St,src:d.image,alt:d.name})})}),(0,A.jsxs)(et.l,{children:[(0,A.jsx)(lt.p,{titleText:r,children:r}),(0,A.jsx)(rt.p,{children:(0,A.jsx)(Ct.l,{artists:o,spec:y})})]})]}),(0,A.jsx)(nt.o,{ariaColIndex:1,children:(0,A.jsx)(Xe.g,{uri:d.uri,name:d.name,spec:y,children:d.name})}),(0,A.jsxs)(at.l,{ariaColIndex:2,children:[(0,A.jsx)(It.d,{uri:l,spec:y}),(0,A.jsx)(Je.P,{duration:i}),(0,A.jsx)(ft.Y,{spec:y,menu:(0,A.jsx)(kt.P,{uri:l,artists:o}),label:c.Ru.get("more.label.track",r,o?.[0].name)})]})]})})})};var Rt=i(70451),_t=i(85690);function Nt(e,t,i){return e.reduce(((e,a,s)=>((s>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===a.type?e.push(function(e,t,i){return{type:"MUSIC",index:t,uri:i.uri,episodeUri:e,start:i.start,stop:i.stop,duration:i.duration,name:i.track.name,artists:i.track.artists,album:i.track.album,playable:i.track.playable}}(i,s,a)):"TALK"===a.type&&e.push(function(e,t,i){return{type:"TALK",index:t,uri:e,title:i.title,subtitle:i.subtitle,start:i.start,stop:i.stop,duration:i.duration,showUri:i.show.uri,showName:i.show.name}}(i,s,a)),e)),[])}const At=({uri:e,segmentCount:t})=>{const i=(0,Rt.o)(),s=(0,a.useCallback)((async(a,s)=>{const n=Math.ceil(a/2);try{return{items:Nt(await i.getSegments(e,n,s),n,e),totalLength:2*t-1}}catch(e){return{items:[],totalLength:0}}}),[t,i,e]),n=(0,a.useCallback)((t=>{switch(t.type){case"SPACER":return(0,A.jsx)("div",{className:Et},t.id);case"MUSIC":return(0,A.jsx)(wt,{...t},`${e}-${t.index}`);case"TALK":return(0,A.jsx)(xt,{...t},`${e}-${t.index}`);default:return(0,_t.d)(t)}}),[e]),r=(0,a.useCallback)((e=>({uri:"MUSIC"===e.type?e.uri:""})),[]),l=c.Ru.get("music_and_talk.in_this_episode");return(0,A.jsxs)("div",{children:[(0,A.jsx)(we.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Tt,children:l}),(0,A.jsx)(bt.S4,{ariaLabel:l,hasHeaderRow:!0,rowPlaceholder:Ve.qq,columns:[jt.$.TITLE_AND_ARTIST,jt.$.ALBUM_OR_SHOW,jt.$.DURATION],renderRow:n,fetchTracks:s,resolveItem:r,limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"})]})};var Lt=i(34889),Ut=i(49097),Dt=i(98255),Ft=i(48455),Mt=i(7927);var Bt=i(32218),Ot=i(58476),qt=i(57682),$t=i(78284),zt=i(79133),Ht=i.n(zt),Gt=i(17867),Wt=i(7004),Kt=i(81282),Qt=i(29748);const Vt="EzubtLtLldmRrerGnzHG",Yt="WJoPBwb17TQkdjM85AjA",Zt="LIPKVT33tO8QKqsCDMiD",Xt="Sts43e3FSkhLlkgWo3fC",Jt=e=>e<=10?"textNegative":e<=20?"textWarning":"textSubdued",ei=({addComment:e,autoFocusInput:t})=>{const[i,s]=(0,a.useState)(""),n=(0,a.useRef)(null),{openURLWithSessionTransfer:r}=(0,Qt.L)();(0,Kt.i)({ref:t?n:{current:null},preventScroll:!0,deps:[t]});const l=(0,a.useCallback)((t=>{t.preventDefault(),e(i),s("")}),[e,i]),o=(0,a.useCallback)((e=>{e.target.style.height="auto",e.target.style.height=`${e.target.scrollHeight}px`,s(e.target.value)}),[]),c=(0,a.useCallback)((()=>{r("https://www.spotify.com/safetyandprivacy/platform-rules")}),[r]),d=Ht()(i).length,u=500-d;return(0,A.jsxs)("form",{className:Yt,onSubmit:l,children:[(0,A.jsx)(Gt.h,{ref:n,className:Vt,size:"small",placeholder:(0,Ot.v)("Leave a comment"),onChange:o}),(0,A.jsxs)("div",{className:Zt,children:[(0,A.jsxs)(we.E,{semanticColor:"textSubdued",variant:"bodySmall",children:[(0,Ot.v)("Read our "),(0,A.jsx)(Wt.Y,{semanticColor:"textBase",onClick:c,children:(0,Ot.v)("Platform Rules")})]}),(0,A.jsxs)("div",{className:Xt,children:[(0,A.jsx)(we.E,{semanticColor:Jt(u),variant:"bodySmall",children:u}),(0,A.jsx)(_e.$,{type:"submit",size:"small","aria-disabled":u<0||0===d,children:(0,Ot.v)("Comment")})]})]})]})},ti="HGjuMwWSWy3FYYnzyodc",ii="QnZJ_bXjwXU8Z1ELdttH",ai=({comments:e,addComment:t,user:i,isRestricted:n})=>{const r=(0,a.useRef)(null),[l]=(0,s.ok)(),o="new"===l.get("id")||"top"===l.get("id"),c="new"===l.get("id");return(0,a.useEffect)((()=>{o&&r.current&&r.current.scrollIntoView({block:"start"})}),[o]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(we.E,{variant:"titleSmall",semanticColor:"textBase",ref:r,children:(0,Ot.v)(`Comments (${e.totalCount})`)}),(0,A.jsxs)("div",{className:ii,children:[(0,A.jsx)($t.K,{eligibility:e.eligibilityStatus}),!n&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(qt.e,{label:i.displayName||i.username,width:32,images:i?.images,userIconSize:"small",testID:"user-widget-avatar"}),(0,A.jsx)(ei,{addComment:t,autoFocusInput:c})]})]})]})};var si=i(94811),ni=i(50217),ri=i(7038);const li=({uri:e,className:t})=>{const{data:i,fetchNextPage:n,addComment:r}=(e=>{const t=(0,Mt.n)(),i=(0,Lt.jE)(),{data:s,isLoading:n,isError:r,fetchNextPage:l}=(0,Ut.q)({queryKey:Ft.K.allComments(e),queryFn:({pageParam:i})=>t.getAllComments(e,i),initialPageParam:void 0,getNextPageParam:e=>e.nextPageToken,gcTime:36e5,staleTime:3e4}),{mutate:o,isPending:c}=(0,Dt.n)({mutationFn:i=>t.addComment(e,i),onSettled:()=>{i.invalidateQueries({queryKey:Ft.K.byEntity(e)})}});return{data:(0,a.useMemo)((()=>s&&0!==s.pages.length?{comments:s.pages.flatMap((e=>e.comments)),eligibilityStatus:s.pages[0].eligibilityStatus,totalCount:s.pages[0].totalCount,nextPageToken:null}:null),[s]),fetchNextPage:l,addComment:o,isPendingComment:c,isLoading:n,isError:r}})(e),l=(0,ni.C)(),[o]=(0,s.ok)();if(!i||!l)return null;const{isRestricted:c,isHidden:d}=(0,si.K)(i.eligibilityStatus);return d?null:(0,A.jsxs)("div",{className:De()(ti,t),children:[(0,A.jsx)(ai,{comments:i,addComment:r,user:l,isRestricted:c}),(0,A.jsx)("div",{children:(0,A.jsx)(ri._,{onReachBottom:n,children:i.comments.map(((t,i)=>(0,A.jsx)(Bt.c,{comment:t,entityUri:e,showSeparator:i>0,scrollIntoViewOnMount:o.get("id")===t.id},`${t.uri}-${i}`)))})})]})};var oi=i(99010),ci=i(63112);const di=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:s,hasMusicAndTalkSegments:n,htmlDescription:r,onExpanded:l,onDescriptionTimestampClick:o,onTranscriptTimestampClick:d,playability:u,segmentCount:p,showUrl:m,transcript:h,uri:g,spec:y})=>{const x=(0,z.s)(),b=(0,ge.NC)(Ne.iGu,{loadingValue:!1}),j=(0,a.useMemo)((()=>y.descriptionSectionFactory()),[y]),v=(0,a.useMemo)((()=>j.trackListFactory()),[j]),[k,C]=(0,a.useState)(null),f=(0,a.useCallback)((async e=>{const t=await(0,oi.Q)(e);C(t)}),[]);(0,a.useEffect)((()=>{h&&h.length>0&&f(h[0].cdnUrl)}),[f,h]);const P=a=>(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Le,{hasDescription:s,contentInformation:t,onTimeStampClick:o,onExpanded:l,description:i,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:u,showHeader:a,spec:j}),n&&(0,A.jsx)(ci.r,{spec:v,children:(0,A.jsx)(At,{segmentCount:p,uri:g})}),m&&(0,A.jsx)(he.n,{size:"small",className:Z,href:m,component:Ee.v,onClick:()=>{x.logInteraction(j.allEpisodesLinkFactory().hitUiNavigate({destination:m}))},children:c.Ru.get("episode.see_all_episodes")}),b&&(0,A.jsx)(li,{uri:g,className:pe}),(0,A.jsx)(Se,{uri:g})]}),I=h&&h?.length>0&&u.playable;return(0,A.jsx)(A.Fragment,{children:I?(0,A.jsx)(He,{transcriptSections:k,descriptionContent:P(!1),transcriptContent:(0,A.jsx)(Qe,{transcriptSections:k||[],onTimeStampClick:d,episodeUri:g}),spec:y}):P(!0)})};var ui=i(13377),pi=i(87244),mi=i(11241),hi=i(29080),gi=i(7777),yi=i(98991),xi=i(73686),bi=i(43233),ji=i(22640),vi=i(17067),ki=i(55285),Ci=i(45108),fi=i(41861),Pi=i(2535),Ii=i(90861),Ti=i(90089);const Si=({coverArt:e,name:t})=>{const i=(0,Ti.y)(),a=i===Ii.E.SMALL||i===Ii.E.XSMALL;return(0,A.jsx)(fi.b,{images:e,type:Pe.c.EPISODE,shape:fi.u.ROUNDED_CORNERS,title:t,size:a?Pi.Qe.SIZE_20:Pi.Qe.SIZE_24,className:J})};var Ei=i(19434);const wi=({episode:e,isFullyPlayed:t,setIsFullyPlayed:i,backgroundColor:s,spec:n})=>{const{uri:r,name:l,sharingInfo:d,playedState:u,episodeType:p,releaseDate:m,coverArt:h}=e,g=(0,z.s)(),y=function(e,t,i,a,s){const n=t===Ei.I_.Episode;return(0,Ci.hD)(e,a,i,s)?(0,A.jsx)(Ci.Ih,{isMusicAndTalk:n}):n?c.Ru.get("type.showEpisode"):c.Ru.get("type.podcastEpisode")}(r,p||Ei.I_.Unknown,u.playPositionMilliseconds,D(m?.isoString),u.state===Ei._w.Completed),x=e.podcast?.uri,b=function(e){const t=(0,o.o_h)(e);return`/show/${(0,o.cEw)(t?.id||"")}`}(x),j=(0,a.useCallback)((()=>{g.logInteraction(n.podcastLinkFactory().hitUiNavigate({destination:b}))}),[g,b,n]),v=e.podcast?.coverArt,k=!!(v&&v.length===h.length&&h.every(((e,t)=>e.url===v[t].url))),C=(0,A.jsx)(P.b,{uri:r,sharingInfo:d,showUri:x,contextUri:r,isPlayed:t,onMarkAsPlayed:i});return(0,A.jsxs)(pi.z,{backgroundColor:s,children:[(0,A.jsx)(gi.h,{children:(0,A.jsx)(ui.h,{menu:C,children:(0,A.jsx)(yi.X,{text:l,dragUri:r,dragLabel:l})})}),!k&&(0,A.jsx)(mi.X,{children:(0,A.jsx)(ui.h,{menu:C,children:(0,A.jsx)(xi.b,{loading:"eager",name:l,images:h,placeholderType:"episode",shape:xi.u.SQUARE})})}),(0,A.jsxs)(hi.Y,{children:[(0,A.jsx)(bi.B,{children:y}),(0,A.jsx)(ui.h,{menu:C,children:(0,A.jsx)(vi.mm,{dragUri:r,dragLabel:l,scaleAtMinWidth:vi.tw,className:Q,children:(0,A.jsx)("span",{"data-testid":"episodeTitle",children:l})})}),(0,A.jsx)(ui.h,{menu:C,children:(0,A.jsxs)(ki.N,{to:b,onClick:j,className:ee,children:[k&&(0,A.jsx)(Si,{name:l,coverArt:h}),(0,A.jsx)(ji.g,{children:(0,A.jsx)("span",{"data-testid":"showTitle",children:e.podcast?.name})})]})})]})]})};var Ri=i(7041),_i=i(27317),Ni=i(64526),Ai=i(83989),Li=i(61155),Ui=i(55624),Di=i(97496),Fi=i(36702),Mi=i(32751),Bi=i(67526),Oi=i(60163),qi=i(99916),$i=i(84817);const zi=({episode:e})=>{const{uri:t,episodeType:i,description:l,htmlDescription:c,podcastSubscription:m,segmentsCount:g,podcast:y,contentInformation:x,playedState:b,coverArt:j}=e,{spec:v,logger:k}=(0,H.r)(r.g,{data:{uri:t}}),C=(0,Ai.n)(),f=(0,a.useMemo)((()=>v.headerFactory()),[v]),P=(0,a.useMemo)((()=>v.actionBarFactory()),[v]),[I,T]=(0,a.useState)(b.state===Ei._w.Completed),S=(0,Mi.z)(),E=(0,ut.W)(),w=void 0!==g&&g>0,R=(0,_.V)(),{triggerPlay:U,togglePlay:D,isActive:F}=(0,We.P)({uri:t,...C?{}:{pages:[{items:[{type:Pe.c.EPISODE,uri:t,uid:null,provider:null}]}]}},{featureIdentifier:"episode"}),{isActive:M,isPlaying:B}=(0,Bi.te)(t),O=j.at(0)?.url,q=(0,Ui.H)(O||null),z=(0,$.o)((e=>e?.isPaused??void 0)),G=(0,N.c)(),W=m.isPaywalled&&!m.isUserSubscribed,Q=M||F,V=e?{name:e.name,uri:e.uri,mediaTypes:e.mediaTypes,audio:{items:e.audio.items.map((e=>({url:e.url})))}}:null,Y=y?{name:y.name,uri:y.uri,trailer:y.trailer,showTypes:y.showTypes}:null,Z=(0,Li.C)(V,Y),X=(0,a.useCallback)(((e,a,s,n)=>{const r=()=>{z?(n?.("resume"),S.resume()):(n?.("pause"),S.pause())};if(W)return;let l="play";if(!B||0!==e&&a||(l="pause"),E({intent:l,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),i===Ei.I_.Episode&&G)u.h.set((()=>({triggerId:s||L,triggerAction:null})));else if(F&&!a)R?r():D({loggingParams:n?.()});else if(M&&!a)r();else{const t=n?.("play");R?Z({seekTo:e,loggingParams:t}):U({seekTo:e,loggingParams:t})}}),[W,B,E,t,i,G,M,F,R,z,S,D,Z,U]),J=(0,a.useCallback)((e=>{X(e,!1,void 0,(e=>{const i=v.actionBarFactory().playButtonFactory();let a;return a="pause"===e||B?i.hitPause({itemToBePaused:t}):"resume"===e||Q?i.hitResume({itemToBeResumed:t}):i.hitPlay({itemToBePlayed:t}),k.logInteraction(a)}))}),[X,Q,B,k,v,t]),ee=(0,a.useCallback)((e=>{X(e,!0,void 0,(()=>k.logInteraction(v.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[X,k,v,t]),te=(0,a.useCallback)(((e,t)=>{X(e,!0,t)}),[X]),ie=(0,a.useCallback)((()=>{E({intent:"expand-description",type:"click"})}),[E]),[ae,se]=(0,s.ok)();(e=>{const t=(0,n.Zp)(),[i]=(0,s.ok)(),r=(0,ge.NC)(Ne.MCN,{loadingValue:!1}),l=e.gatedEntityRelations?.entitiesWithValueProps.at(0),c=(0,o.o_h)(l?.fallbackNavigation?.uri),d=l?.uri,u=i.has("si");(0,a.useEffect)((()=>{if(!r||!u||!d)return;let i;e.hasGatedEntityRelationAccess&&e.uri!==d?i=(0,o.o_h)(d)?.toURLPath(!0):!e.hasGatedEntityRelationAccess&&c&&(i=c.toURLPath(!0)),i&&t(i,{replace:!0})}),[r,c,u,t,d,e.hasGatedEntityRelationAccess,e.uri])})(e),(0,a.useEffect)((()=>{if(e&&!Q&&ae.has("t")){const t=ae.get("t")||"0",i=1e3*parseInt(t,10);i<=e.duration.milliseconds&&(ae.delete("t"),se(ae,{replace:!0}),X(i,!0))}}),[e,X,Q,ae,se]);const ne=!!l||!!c,re=e.podcast?.uri,le=(0,o.o_h)(re)?.toURLPath(!0);return(0,A.jsxs)("section",{"data-testid":"episode",className:K,children:[(0,A.jsx)(d.Q,{children:(0,$i.L$)({episodeOrChapterName:e.name,showOrAudiobookName:e.podcast?.name??"",type:"Podcast"})}),(0,A.jsx)(h.c,{artistOrShow:e.podcast?.name,title:e.name,uri:t,entityType:h.p.EPISODE}),(0,A.jsx)(wi,{episode:e,isFullyPlayed:I,setIsFullyPlayed:T,backgroundColor:q,spec:f}),(0,A.jsx)(me,{episode:e,onPlayEpisode:J,isPlaying:B,isActive:Q,isFullyPlayed:I,setIsFullyPlayed:T,backgroundColor:q,isLocked:W,spec:P}),(0,A.jsxs)("div",{className:"contentSpacing",children:[(0,A.jsx)(Ri.q,{gatedEntityRelations:e.gatedEntityRelations,upsellExplanation:e.upsellExplanation,hasAccess:e.hasGatedEntityRelationAccess,showValueProps:!1}),(0,A.jsx)(di,{transcript:e.transcript,hasDescription:ne,contentInformation:x,onDescriptionTimestampClick:ee,onTranscriptTimestampClick:te,onExpanded:ie,description:e.description,areHTMLDescriptionsEnabled:!0,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegments:w,segmentCount:g,uri:e.uri,showUrl:le,spec:v}),G&&(0,A.jsx)(p.W,{uri:t})]})]})},Hi=a.memo((function(){const{episodeId:e=""}=(0,n.g)(),t=(0,o.iMK)(e).toURI(),i=(0,Oi.d)(t),{data:s,isLoading:r}=(0,Fi.r)(t);return i?.isError||!i?.episodeOrChapter||r?(0,A.jsx)(m.LoadingPage,{hasError:i?.isError||!1,errorMessage:c.Ru.get("error.not_found.title.podcast")}):(0,qi.Gr)(i.episodeOrChapter)?(0,A.jsx)(_i.$,{to:(0,o.o_h)(i.episodeOrChapter.book?.uri).toURLPath(!0)}):(0,A.jsx)(a.Suspense,{fallback:null,children:(0,A.jsx)(Ni.u,{pageId:l.$h.PODCAST_EPISODE,uri:t,children:(0,A.jsx)(Di.dj,{dynamicColors:s,children:(0,A.jsx)(zi,{episode:i.episodeOrChapter})})})})}))},50217:(e,t,i)=>{i.d(t,{C:()=>n});var a=i(95440),s=i(24902);const n=()=>{const e=(0,a.d4)((e=>e.session?.user));return e?{type:s.c.USER,uri:e.uri,username:e.id,displayName:e.display_name??null,images:e.images.map((({url:e,width:t,height:i})=>({url:e,width:t||void 0,height:i||void 0})))}:null}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map