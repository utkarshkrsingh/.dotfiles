"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2390],{89916:(e,t,r)=>{r.d(t,{$:()=>f});var n=r(30758),l=r(58274),o=r(27054);function s(e,t,r=!0,n=!1){if(!e)return void console.error("No list element found. Canceling moving focus");if(!(0,o.fk)(e))return;const s=e.querySelector('[tabindex="0"]');t===l.O.UP&&(0,o.MS)(s,a(e,s,l.O.UP,r,n)),t===l.O.DOWN&&(0,o.MS)(s,a(e,s,l.O.DOWN,r,n))}function a(e,t,r,n,s){const a=t.closest('li[role="listitem"]');if(!a)return t;let u=a,c=t;const i=Array.from(e.querySelectorAll('li[role="listitem"]')),f=i.indexOf(a);if(f<0)return t;if(r===l.O.UP){if(document.activeElement===e){if(u=i[i.length-1],s){const e=u?.querySelectorAll(o.nu);c=e[e.length-1]}else c=u?.querySelector(o.nu);return c??t}if(s){const e=Array.from(a.querySelectorAll(o.nu)),r=e.indexOf(t)-1;if(r>=0)return e[r]}let r=f-1;const l=()=>!c&&(!n&&r>=0||n&&f!==r);do{u=i[r];if(n&&!u&&(r=i.length-1,u=i[r]),s){const e=u?.querySelectorAll(o.nu);c=e?e[e.length-1]:null}else c=u?.querySelector(o.nu);r-=1}while(l())}else if(r===l.O.DOWN){if(document.activeElement===e)return u=i[0],c=u?.querySelector(o.nu),c??t;if(s){const e=Array.from(a.querySelectorAll(o.nu)),r=e.indexOf(t)+1;if(r<e.length)return e[r]}let r=f+1;const l=()=>{const e=!n&&r<=i.length;return!c&&(e||n&&f!==r)};do{u=i[r];n&&!u&&(r=0,u=i[r]),c=u?.querySelector(o.nu),r+=1}while(l())}return c||t}var u=r(75867),c=r(69031),i=r(86070);const f=(0,n.forwardRef)((({onKeyDown:e,children:t,circular:r=!0,allowsMultipleInteractiveChildrenInItem:a=!1,...f},d)=>{const g=(0,c.N)(d);(0,u.R)(g);const p=(0,n.useCallback)((t=>{g.current?.contains(t.target)&&("ArrowUp"!==t.key&&"ArrowDown"!==t.key||(t.preventDefault(),document.documentElement.classList.remove("no-focus-outline")),"ArrowUp"===t.key&&s(g.current,l.O.UP,r,a),"ArrowDown"===t.key&&s(g.current,l.O.DOWN,r,a),e?.(t))}),[r,a,g,e]),S=(0,n.useCallback)((e=>{if(!g.current)return;const t=e.target,r=g.current.querySelector('[tabindex="0"]');t.closest('li[role="listitem"]')&&t!==r&&(0,o.MS)(r,t,{preventScroll:!0})}),[g]);return(0,i.jsx)("ul",{role:"list",ref:g,onKeyDown:p,onFocus:S,tabIndex:0,...f,children:t})}))},32350:(e,t,r)=>{r.d(t,{Nz:()=>a,Vp:()=>o,Vv:()=>u,wD:()=>c,xz:()=>s});var n=r(67674),l=r(32165);const o=[n.fl.TRACKS,n.fl.LOCAL_TRACKS,n.fl.ALBUMS,n.fl.ARTISTS,n.fl.PLAYLISTS,n.fl.PLAYLISTS_V2,n.fl.FOLDERS,n.fl.EPISODES,n.fl.CHAPTERS,n.fl.SHOWS,n.fl.AUDIOBOOKS,n.fl.PSEUDO_PLAYLISTS],s={[n.fl.TRACKS]:"tracks",[n.fl.ALBUMS]:"albums",[n.fl.ARTISTS]:"artists",[n.fl.PLAYLISTS]:"playlists",[n.fl.FOLDERS]:"folders",[n.fl.SHOWS]:"shows",[n.fl.EPISODES]:"episodes",[n.fl.CHAPTERS]:"chapters",[n.fl.LOCAL_TRACKS]:"local-tracks",[n.fl.AUDIOBOOKS]:"audiobooks",[n.fl.PSEUDO_PLAYLISTS]:"pseudo-playlists"};let a=function(e){return e.ON="on",e.BEFORE="before",e.AFTER="after",e}({});const u=(0,l.g)(a);function c(e){return o.includes(e)}},47755:(e,t,r)=>{r.d(t,{A:()=>T});var n=r(30758),l=r(88308),o=r(67674),s=r(32350);function a(e,t,r,n){if(e.defaultPrevented)return null;const l=t.includes(s.Nz.BEFORE),o=t.includes(s.Nz.AFTER);let a=s.Nz.ON;if(e.currentTarget instanceof HTMLElement&&(l||o)){const{top:o,height:u,left:c,width:i,right:f}=e.currentTarget.getBoundingClientRect(),d=t.includes(s.Nz.ON);if("horizontal"===r)if(d&&l){(n?e.clientX>Math.round(f)-i/4:e.clientX<Math.round(c)+i/4)&&(a=s.Nz.BEFORE)}else{a=(n?e.clientX>Math.round(f)-i/2:e.clientX<Math.round(c)+i/2)?s.Nz.BEFORE:s.Nz.AFTER}else"vertical"===r&&(d&&l?e.clientY<Math.round(o)+u/4&&(a=s.Nz.BEFORE):a=e.clientY<Math.round(o)+u/2?s.Nz.BEFORE:s.Nz.AFTER)}return t.includes(a)?a:null}var u=r(75627);function c(e,t){return Array.from(e.dataTransfer?.types??[]).filter(o._4).filter((e=>!!(0,s.wD)(e)&&t.includes(e))).filter(s.wD)}var i=r(10058);function f(e,t,r){const n=c(e,t);if(!n.length)return function(e,t){return e.split(/[\s,;]+/g).map((e=>(0,u.o_h)(e?.trim()))).filter(i.P).reduce(((e,r)=>{const n=o.Ay[r.type];return(0,s.wD)(n)&&t.includes(n)?(e[n]||=[],e[n].push(r.toURI()),e):e}),{})}(e.dataTransfer?.getData("text/plain"),t);const l=Object.fromEntries(n.map((t=>[t,e.dataTransfer?.getData(t)?.split("\n").filter(Boolean)??[]])));if(r){const{[o.fl.PLAYLISTS]:e,...t}=l,r=Array.from(new Set([...l[o.fl.PLAYLISTS_V2]??[],...(l[o.fl.PLAYLISTS]??[]).map(d)]));return{...t,...r.length?{[o.fl.PLAYLISTS_V2]:r}:null}}return l}function d(e){const t=(0,u.o_h)(e);return t?.type===u.NQG.PLAYLIST?(0,u.Pse)(t.id).toURI():e}var g=r(29602),p=r(28833);const S={droppableMimeTypes:"albums artists episodes chapters folders playlists shows tracks local-tracks audiobooks pseudo-playlists",useDropTarget:"main-useDropTarget-base","useDropTarget--albums":"main-useDropTarget-album","useDropTarget--artists":"main-useDropTarget-artist","useDropTarget--episodes":"main-useDropTarget-episode","useDropTarget--chapters":"OxrHhBsQAggwnv6RmqRy","useDropTarget--folders":"main-useDropTarget-folder","useDropTarget--playlists":"main-useDropTarget-playlist","useDropTarget--shows":"main-useDropTarget-show","useDropTarget--tracks":"main-useDropTarget-track","useDropTarget--local-tracks":"main-useDropTarget-local","useDropTarget--audiobooks":"main-useDropTarget-audiobook","useDropTarget--pseudo-playlists":"main-useDropTarget-pseudoPlaylist"};function T({uri:e,id:t=e,allowedMimeTypesByDropPosition:r,onDrop:u,onLongDragOver:i,longDragOverTimeout:d=1e3,reorderDirection:T="vertical"}){const D=(0,l.lB)((()=>r),[r]),A=(0,p.W)(),h=(0,g.wK)(),y=!!t&&1===h.length&&h[0]===t,O=Object.values(D).every((e=>e.includes(o.fl.PLAYLISTS_V2)&&!e.includes(o.fl.PLAYLISTS))),[L,v]=(0,n.useState)(null),E=(0,n.useCallback)((e=>y?[]:Object.entries(D).filter((([t,r])=>c(e,r).length>0)).map((([e])=>e)).filter(s.Vv)),[y,D]),w=(0,n.useRef)(!0),b=(0,n.useRef)(null),P=(0,n.useRef)(u);P.current=u;const R=(0,n.useRef)(i);R.current=i;const I=(0,n.useCallback)((()=>{w.current=!0,v(null),b.current&&(window.clearTimeout(b.current),b.current=null)}),[]);(0,n.useEffect)((()=>I),[I]);const N=(0,n.useCallback)((e=>{const t=E(e);t.length&&(v(a(e,t,T,A)),e.dataTransfer&&!e.defaultPrevented&&(e.dataTransfer.dropEffect=t.includes(s.Nz.ON)?"copy":"move"),e.preventDefault())}),[E,A,T]),k=(0,n.useCallback)((e=>{if(E(e).length&&!e.defaultPrevented){if(w.current){w.current=!1;const t=e.currentTarget,r=()=>{document.contains(t)||(I(),document.removeEventListener("dragenter",r))};document.addEventListener("dragenter",r),document.addEventListener("dragend",(()=>{document.removeEventListener("dragenter",r),I()}),{once:!0}),R.current&&(b.current=window.setTimeout((()=>{R.current?.()}),d))}e.preventDefault()}}),[E,d,I]),C=(0,n.useCallback)((e=>{E(e).length&&(function(e){return null===e.relatedTarget&&m?!document.elementsFromPoint(e.clientX,e.clientY).includes(e.currentTarget):!e.currentTarget.contains(e.relatedTarget instanceof Node?e.relatedTarget:null)}(e)&&I(),e.preventDefault())}),[E,I]),x=(0,n.useCallback)((e=>{const t=a(e,E(e),T,A);if(!e.defaultPrevented&&t){const r=f(e,D[t]??[],O),n=function(e){return{sectionId:parseInt(e.dataTransfer.getData("text/x-spotify-section"),10)||0,contextUri:e.dataTransfer.getData("text/x-spotify-context"),itemIds:e.dataTransfer.getData(o.fl.UIDS)?.split("\n").filter(Boolean)??[]}}(e);Object.keys(r).length&&P.current&&(P.current(r,t,n),e.preventDefault())}I()}),[E,T,A,I,D,O]),B=(0,n.useMemo)((()=>`${S.useDropTarget} ${Array.from(new Set(Object.values(D).flat()))?.map((e=>S[`useDropTarget--${s.xz[e]}`]??"")).join(" ")}`),[D]);return(0,n.useMemo)((()=>({dropPosition:L,className:B,onDragEnter:k,onDragLeave:C,onDragOver:N,onDrop:x})),[B,L,k,C,N,x])}const m=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}]);
//# sourceMappingURL=2390.js.map